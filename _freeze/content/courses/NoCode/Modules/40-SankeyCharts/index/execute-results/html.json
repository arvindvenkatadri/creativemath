{
  "hash": "ec4e41c0ca31990aba5d624e294a3fa9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: <iconify-icon icon=\"maki:watermill\"></iconify-icon> Sankey, Alluvial, and Parallet-Set Plots\nsubtitle: \"Yes...On the River, In the River, With the River...\"\ndate: 2024-April-22\ndate-modified: \"2024-05-07\"\norder: 28\nlightbox: true\nabstract: \"Changes in Information over Space and Time\"\ncategories:\n- Qual Variables and Quant Variables\n---\n\n\n\n\n## What graphs will we see today?\n| Variable #1 | Variable #2 | Chart Names |                    Chart Shape                    |\n|:-------------:|:--------------:|:------------------:|:--------------------:|\n|    Quant    |    None     |  Sankey Plot | {{< iconify carbon sankey-diagram-alt size=4x >}}  {{< iconify carbon chart-parallel size=4x  >}} |\n\n\n\n::: column-page-inset-right\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper lightable-hover\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> No </th>\n   <th style=\"text-align:left;\"> Pronoun </th>\n   <th style=\"text-align:left;\"> Answer </th>\n   <th style=\"text-align:left;\"> Variable/Scale </th>\n   <th style=\"text-align:left;\"> Example </th>\n   <th style=\"text-align:left;\"> What Operations? </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> How Many / Much / Heavy? Few? Seldom? Often? When? </td>\n   <td style=\"text-align:left;\"> Quantities with Scale.\nDifferences are meaningful, but not products or ratios </td>\n   <td style=\"text-align:left;\"> Quantitative/Interval </td>\n   <td style=\"text-align:left;\"> pH,SAT score(200-800),Credit score(300-850),SAT score(200-800),Year of Starting College </td>\n   <td style=\"text-align:left;\"> Mean,Standard Deviation </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> How, What Kind, What Sort </td>\n   <td style=\"text-align:left;\"> A Manner / Method, Type or Attribute from a list, with list items in some \" order\" ( e.g. good, better, improved, best..) </td>\n   <td style=\"text-align:left;\"> Qualitative/Ordinal </td>\n   <td style=\"text-align:left;\"> Socioeconomic status (Low income, Middle income, High income),Education level (HighSchool, BS, MS, PhD),Satisfaction rating(Very much Dislike, Dislike, Neutral, Like, Very Much Like) </td>\n   <td style=\"text-align:left;\"> Median,Percentile </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n:::\n\n## {{< iconify mdi food-processor-outline >}} How do these Chart(s) Work?\nSometimes Qual data can itself vary over, or depend upon, over a bunch of independent Qual data *categories*. For instance we can contemplate enrollment at a University, and show how students move from course to course in a University. Or how customers drift from one category of products or brands to another....or the movement of cricket players from one IPL Team to another !!\n\nAs can be surmised, the independent *categories* can be interpreted both as **time** ( e.g semesters / cycles / years) and **space** (teams / courses / departments). And we can chart another Quant or Qual variable that moves across levels of the first chosen Qual variable.\n\n![](../../../../materials/images/sankey.png){fig-align=\"center\" width=\"800\"}\n\n-   The Qualitative variables being connected are mapped to\n    `stages/axes`\n-   Each *level* within a Qual variable is mapped to\n    `nodes / strata / lodes`;\n-   And the connections between the `strata` of the `axes` are called\n    `flows / links / alluvia`.\\\n\nSuch diagrams are best used when you want to show a many-to-many mapping\nbetween two domains or multiple paths through a set of stages E.g\nStudents going through multiple courses during a semester of study.\n\nHere is an example of a Sankey Diagram for the `Titanic` dataset:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Titanic Sankey Plot](index_files/figure-html/fig-titanic-sankey-plot-1.png){#fig-titanic-sankey-plot width=2100}\n:::\n:::\n\n\nIt is seen from @fig-titanic-sankey-plot that the x-axis has Qual variables `stages` shown as \"pillars\" and these are split into `nodes` based on the levels for each Qual variable `stage` respectively. \n`Flows` with variable thickness connect one `node` at one `stage` to another `node` and another `stage`. \n\n::: callout-note\n### Sankey, Parallel sets, and Alluvial Charts\nHere is what [Thomas Lin Pedersen](https://ggforce.data-imaginist.com/reference/geom_parallel_sets.html)\nsays:\n\nA **parallel sets diagram** is a type of visualisation showing the interaction between multiple categorical variables. \n\nIf the variables have an **intrinsic order** the representation can be thought of as a **Sankey Diagram**.\n\nIf each variable is a point in time it will resemble an **Alluvial diagram**.\n\n:::\n\n\n\n## {{< iconify carbon box-plot >}} {{< iconify carbon chart-violin-plot >}} Creating Sankey Plots\n\n::: {.panel-tabset .nav-pills style=\"background: whitesmoke;\"}\n\n### Using Orange\nIt does not seem possible to create an Alluvial Diagram in Orange. ðŸ˜¢\n\n### Using RAWgraphs\n\n\n{{< video https://youtu.be/6BYac2Pmnno >}}\n\n\n{{< downloadthis AlluvialDiagram/TutorialAlluvialDiagram.rawgraphs dname=\"TutorialAlluvialDiagram\" label=\"Download the RAWgraphs Alluvial Tutorial File\" icon=\"database-fill-down\" type=\"info\" >}}\n\n\n\nDownload this file and upload to <https://app.rawgraphs.io/>.\n\nLet us however examine this data in Orange:\n\n\n{{< downloadthis AlluvialDiagram/2020HateCrimesInNY.csv dname=\"HateCrimesInNY\" label=\"Download the Hate Crimes dataset\" icon=\"database-fill-down\" type=\"info\" >}}\n\n\n\n![Hate Crimes in NY 2020](../../../../materials/images/Orange/hate-crimes-data-table.png){#fig-hate-crime-data-table}\n\nFrom the @fig-hate-crime-data-table, We see that the data is all Qualitative, except for `Age`. The `Precinct`, while apparently an integer, is really a Qual variable! Why?\n\nAnd here is the Sankey Diagram:\n\n![Hate Crime Sankey Diagram](AlluvialDiagram/TutorialAlluvialDiagram.png){#fig-hate-crime-sankey}\n\n\nIn the @fig-hate-crime-sankey, we have three Qual variables along the x-axis: `Gender`, `Race` and `Bias-Motivation`. The chart counts the episodes at each level and portrays them as flows leading to the next node. \n\n### Using DataWrapper\n\nIt does not seem possible to create an Alluvial Diagram in DataWrapper. \n\n:::\n\n\n## {{< iconify uiw pay >}} Dataset: Vaccinations\n\nLet us at least examine this dataset in Orange.\n\n\n{{< downloadthis data/salaries.csv dname=\"salaries\" label=\"Download the Salaries data\" icon=\"database-fill-down\" type=\"info\" >}}\n\n\n\n### {{< iconify file-icons influxdata >}} Examine the Data\n\n\n\n\n### {{< iconify streamline dictionary-language-book-solid >}} Data Dictionary\n\n::: callout-note\n### Quantitative Data\n\n\n:::\n\n::: callout-note\n### Qualitative Data\n\n:::\n\n\n### {{< iconify material-symbols query-stats >}} Research Questions\n\nLet's try a few questions and see if they are answerable with Box Plots and Violins\n\n::: callout-note\n## Question\nQ1. \n\n::: {#fig-netflix-histograms layout-ncol=2}\n\n\n:::\n\n:::\n\n::: callout-note\n## Question\nQ2. \n\n:::\n\n\n### {{< iconify game-icons secret-book >}} What is the Story Here?\n\n[*statistical ANOVA test*]{style=\"background: yellow;\"}. \n\n\n\n## {{< iconify bi person-up >}} Your Turn\n\n1.  Within the `ggalluvial` package are two datasets, `majors` and\n    `vaccinations`. Plot alluvial charts for both of these.\n2.  Go to the [American Life Panel\n    Website](https://alpdata.rand.org/index.php?page=data) where you\n    will find many public datasets. Try to take one and make charts from\n    it that we have learned in this Module.\n\n\n## {{< iconify mingcute thought-line >}} Wait, But Why?\n\n\n\n\n## {{< iconify ooui references-ltr >}} References\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../../../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../../../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n<link href=\"../../../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}