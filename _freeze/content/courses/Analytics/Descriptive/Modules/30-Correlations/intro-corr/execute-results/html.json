{
  "hash": "593a9b183a4203ec11c7bd6c06799874",
  "result": {
    "markdown": "---\ntitle: \"\\U0001F4CE Correlations\"\nsubtitle: \"Correlations\"\nauthor: \"Arvind Venkatadri\"\ndate: 22/Nov/2022\ndate-modified: \"2023-03-19\"\norder: 30\nabstract: \"How one variable changes with another\"\nimage: preview.jpg\nimage-alt: image from rawpixel.com\ncategories:\n- Correlations  \n- Scatter Plots\n- Bubble Plots  \n- 2D Density Plots  \n- Heatmaps  \n- Regression Lines  \n---\n\n\n## {{< fa folder-open >}} Slides and Tutorials\n\n|                                                                                     |                                                                                                                         |                                                                                                   |                                                                                       |\n|-------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|\n| <a href=\"./files/correlations.qmd\"><i class=\"fa-brands                              \n                              fa-r-project\"></i> R Tutorial</a>                       | <a href=\"./files/correlations.ows\"> <iconify-icon icon=\"fluent-emoji:orange-circle\"></iconify-icon> Orange Tutorial</a> | <a href=\"./files/correlations.rda\"> <i class=\"fa-solid fa-person-rays\"></i> Radiant Tutorial</a>  | <a href=\"./files/data/qdd-data.zip\"> <i class=\"fa-sold fa-database\"></i> Datasets</a> |\n\n## {{< iconify noto-v1 package >}} Setting up R Packages\n\n\n::: {.cell hash='intro-corr_cache/html/setup_f07c83be1ef546ea6e0688d30e2d5536'}\n\n```{.r .cell-code}\nlibrary(tidyverse) # Tidy data processing and plotting\nlibrary(palmerpenguins) # Our favourite dataset\nlibrary(patchwork) # Arranging plots side by side\nlibrary(ggformula) # Formula based plots\nlibrary(mosaic) # Our go to package\nlibrary(GGally) # Corr plots\nlibrary(corrplot) # More corrplots\n\n#library(grid)\n```\n:::\n\n\n## What is Correlation?\n\nOne of the basic Questions we would have of our data is: Does some\nvariable depend upon another in some way? Does $y$ depend upon $x$? A\n**Correlation Test** is designed to answer exactly this question.\n\nThe word correlation is used in everyday life to denote some form of\nassociation. We might say that we have noticed a correlation between\nrainy days and reduced sales at supermarkets. However, in statistical\nterms we use correlation to denote association between two quantitative\nvariables. We also assume that the association is **linear**, that one\nvariable increases or decreases a fixed amount for a unit increase or\ndecrease in the other. The other technique that is often used in these\ncircumstances is regression, which involves estimating the best straight\nline to summarise the association.\n\n## Correlation coefficient\n\nThe degree of association is measured by a *correlation coefficient*,\ndenoted by r. It is sometimes called Pearson's correlation coefficient\nafter its originator and is a measure of linear association. (If a\ncurved line is needed to express the relationship, other and more\ncomplicated measures of the correlation must be used.)\n\nThe correlation coefficient is measured on a scale that varies from + 1\nthrough 0 to -- 1. Complete correlation between two variables is\nexpressed by either + 1 or -1. When one variable increases as the other\nincreases the correlation is positive; when one decreases as the other\nincreases it is negative.\n\nIn formal terms, the correlation between two variables $x$ and $y$ is\ndefined as\n\n$$\n\\rho = E\\left[\\frac{(x - \\mu_{x}) * (y - \\mu_{y})}{(\\sigma_x)*(\\sigma_y)}\\right]\n$$\n\nwhere $E$ is the expectation operator ( i.e taking mean ). Think of this\nas the average of the products of two scaled variables. (We can see\n$(x-\\mu_x)/\\sigma_x$ is a centering and scaling of the variable $x$. It\nis called the `z-score` of x.)\n\n## What graphs will we see today?\n\nSome of the very basic and commonly used plots for data are:\n\n-   Scatter Plot\n-   Contour Plot\n-   Correlogram\n-   Heatmap\n\n## What Correlation Charts can we plot with Numerical / Quantitative Data?\n\n### Scatter Plot\n\n\n::: {.cell hash='intro-corr_cache/html/charts_09ec6dd0f614f5ccea5efd4d0a05bc21'}\n\n```{.r .cell-code}\nmpg <- mpg %>% mutate(drv= as_factor(drv))\n\np1 <- gf_point(cty ~ hwy, fill = ~drv, \n               colour = ~drv, \n               data = mpg) %>% \n  gf_smooth(method = \"lm\", \n            title = \"Scatter Plot\",\n            subtitle = \"Correlation/Regression/Trend Line\")\n\np2 <- gf_density_2d(cty ~ hwy, \n                    data = mpg, \n                    title = \"2D Density Plot\")\np1 + p2\n```\n\n::: {.cell-output-display}\n![](intro-corr_files/figure-html/charts-1.png){width=4200}\n:::\n:::\n\n\n### Pairwise Correlation Plot\n\n\n::: {.cell hash='intro-corr_cache/html/pairs-charts_3a73ddcdd668e55c808452b6a711bdf6'}\n\n```{.r .cell-code}\np2 <- GGally::ggpairs(mpg, \n                      columns = c(\"hwy\", \"cty\", \"displ\",\"cyl\"), \n                      diag = list(\"densityDiag\"), \n                      title = \"Pairwise Correlations Plot\")\np2\n```\n\n::: {.cell-output-display}\n![](intro-corr_files/figure-html/pairs-charts-1.png){width=4200}\n:::\n:::\n\n\n### Pairwise Correlogram\n\nIn this chart, the correlation between pairs of variables is shown\n*symbolically* as coloured ellipses. The direction of the semi-major\naxis + the colour of the ellipse indicate whether the correlation score\nis positive or negative. And the more *eccentric* the ellipse, the\nhigher is the correlation score in value.\n\n\n::: {.cell hash='intro-corr_cache/html/cor-plot_ae25e2716bc38083447ffb7ea2d529b9'}\n\n```{.r .cell-code}\nlibrary(corrplot)\n\nmpg_num <- mpg %>% select(hwy, cty, displ, cyl)\nmydata_cor <- cor(mpg_num)\n\ncorrplot(mydata_cor,method = \"ellipse\",\n         type = \"lower\",\n         main = \"Correlogram\")\n```\n\n::: {.cell-output-display}\n![](intro-corr_files/figure-html/cor-plot-1.png){width=4200}\n:::\n\n```{.r .cell-code}\n# Heatmap with numbers\ncorrplot.mixed(mydata_cor, \n               lower = \"color\",\n               upper = \"number\",\n               bg = \"wheat\",\n               tl.pos = \"d\",\n               main = \"Heatmap?\")\n```\n\n::: {.cell-output-display}\n![](intro-corr_files/figure-html/cor-plot-2.png){width=4200}\n:::\n:::\n\n\n## References\n\n1.  Minimal R using `mosaic`.\n    <https://cran.r-project.org/web/packages/mosaic/vignettes/MinimalRgg.pdf>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../../../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}