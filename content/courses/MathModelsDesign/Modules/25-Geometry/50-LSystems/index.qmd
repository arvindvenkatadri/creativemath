---
title: "L-Systems"
subtitle: ""
subject: "Shapes and Code"
abstract: ""
date: 02/May/2024
date-modified: "`r Sys.Date()`"
order: 50
categories:
- Iterated Functions
- Fractals
- L-Systems
- Algorithmic Patterns
- Symmetry
image: ""
lightbox: true
---


:::: {.pa4}
::: {.athelas .ml0 .mt0 .pl4 .black-90 .bl .bw2 .b--blue}
[Trees]{.f3 }\

["I think that I shall never see\
A poem lovely as a tree.\
A tree whose hungry mouth is prest\
Against the earth’s sweet flowing breast;\
A tree that looks at God all day,\
And lifts her leafy arms to pray;\
A tree that may in Summer wear\
A nest of robins in her hair;\
Upon whose bosom snow has lain;\
Who intimately lives with rain.\
Poems are made by fools like me,\
But only God can make a tree.\"]{.f5 .f4-m .f3-l .lh-copy .measure .mt0}


[ --- Joyce Kilmer, 1915]{.f6 .ttu .tracked .fs-normal}
:::
::::


![Japanese Daisugi](../../../../../materials/images/daisugi.jpg)


## Introduction

Trees are fractal in nature, meaning that patterns created by the large structures, such as the main branches, repeat themselves in smaller structures, such as smaller branches.... a universal growth pattern first observed by Leonardo da Vinci 500 years ago: a simple yet startling relationship that always holds between the size of a tree's trunk and sizes of its branches. 

<center>
![](../../../../../materials/images/leonardotree1.jpg)
</center>



## {{< iconify icons8 idea >}} Inspiration


## An Introduction to L-Systems

From Job Talle's Website:

> Lindenmayer systems were originally conceived by Hungarian biologist Aristid Lindenmayer while studying algae growth. He developed L-systems as a way to describe the growth process of algae and simple plants. The result was a type of language in which the recursive and self similar properties of organism growth can be expressed. Indeed, L-systems can be used to generate natural patterns, but well known mathematical patterns can also be written as an L-system. In this article, I will explain different flavors of L-systems, and I will demonstrate them by rendering 2D Lindenmayer systems and 3D Lindenmayer systems using turtle graphics.

> The language is very simple. It consists of symbols (the alphabet) and production rules. The first state of the sentence is called the axiom. The production rules can be applied repeatedly on this axiom to evolve or grow the system. A simple example would be a system with the axiom AA, and the rule A→ABAA→ABA. After the first iteration (the first time the rule is applied), the sentence will be changed to ABAABA. After the second iteration, the sentence will be ABABABAABABABA and so forth. You can see how a self expanding sentence can be analogous to cell division in plants and other biological processes.

> L-system Structures thus develop through a process of string rewriting. A string of letters is transformed into a new string of letters using simple rules called productions. The process is repeated indefinitely, each time using the string that was just produced as the source for the next string. Because the strings tend to grow with each rewrite, an L-system can become arbitrarily complex, but always guided by a simple process dictated by a fixed set of simple rules.

In this respect, L-systems are a manifestation of [Complexity Phenomena](Link TBD).


![](https://www.birdsoutsidemywindow.org/wp-content/uploads/2018/11/diagram_da_vinci_rule_of_trees_christophermalloy_insidescience-600x291.jpg)

[(Image Courtesy Christophe Eloy | University of Provence)](https://www.insidescience.org/news/uncovering-da-vincis-rule-trees).

Let us see how we can create **"Algorithmic Trees"**.


## Creating Trees using L-systems

::: {.panel-tabset .nav-pills style="background: whitesmoke;"}

### Using p5.js

<center>
<iframe width="780px" height="600px"
src="https://editor.p5js.org/arvindv/full/3XhIEr2Iv">
</iframe>
</center>

### Using R

We will use the package `LindenmayerR` to create our tree.

```{r}
#| label: setup
#| code-fold: true
#| message: false
#| warning: false

library(tidyverse)
###
library(LindenmayeR)
library(LearnGeom)
library(TurtleGraphics)
options(max.print=20)

```



```{r}

# Lindemayer tree

## Dictionary of Symbols
dictionary <- data.frame(
  symbol = c("F", "f", "+", "-", "[", "]"), # symbol column
  action = c("F", "f", "+", "-", "[", "]"), # action column
  stringsAsFactors = FALSE
)

## Axioms to start and morph
tree_morph_rules <- data.frame(
  inp = c("F"), # starting axiom
  out = c("F[+F][-F]"), # Morphing Rule
  stringsAsFactors = FALSE
)

## Build the Tree with commands
Ltree <- Lsys(
  init = "F",
  rules = tree_morph_rules,
  n = 2,
  verbose = 0, # No progress messages please...
  retAll = FALSE # One Vector output at the end only
)


## Now draw the tree
drawLsys(
  string = Ltree,
  drules = dictionary,
  stepSize = 10, shrinkFactor = 1.2, # integers shrink!
  ang = 12,
  st = c(50, 10, 90) # Root Position x, y, angle from bottom-left
)
```


A more complex, and more botanical-looking, tree or seaweed:

```{r}
#| results: hold
#| 
## Define Axiom and Mutation Rules
fractal_tree_rules <- data.frame(
  inp = c("X", "F"),
  out = c("F-[[X]+X]+F[+FX]-X", "FF"),
  stringsAsFactors = FALSE
)

## Create the Algorithmic Tree
fractal_tree <- Lsys(
  init = "X", # Axiom
  rules = fractal_tree_rules,
  n = 4,
  verbose = 0,
  retAll = FALSE
)

## Now draw the tree
drawLsys(
  string = fractal_tree,
  drules = dictionary,
  stepSize = 2, # Shrink by half each time
  ang = runif(n = 1, min = 3, max = 30),
  st = c(50, 5, 90), # Origin of tree
  gp = gpar(col = "chocolate4", fill = "honeydew")
)

grid.text("Fractal Seaweed (n = 4)", 0.25, 0.25)

```

### Fractal Grower

Head off to <https://www.cs.unm.edu/~joel/PaperFoldingFractal/paper.html>. Download the `.jar` file and save it say in your Documents folder. Open and play. Instructions are on the website. 

:::

## {{< iconify mingcute thought-line >}} Wait, But Why?

- By making use of "just sufficient randomness" in a few parameters, it is possible to generate very organic-looking trees
- These tree-like layouts can show up in a surprising number of places, such as transport networks, residential layouts.
- The multiple iterations generated from a few simple rules embody all the complexity of a **language**. 
- Trees become a great metaphor for a diverse set of things and ideas. 

## {{< iconify ooui references-ltr >}} References

1. Job Talle. *Lindenmayer Systems* <https://jobtalle.com/lindenmayer_systems.html>
1. C. J Jennings. *L-systems*. <https://cgjennings.ca/articles/l-systems/>
1. Przemysław Prusinkiewicz and Aristid Lindenmayer. [The Algorithmic Beauty of Plants](http://algorithmicbotany.org/papers/#abop). Springer-Verlag, 1990.

