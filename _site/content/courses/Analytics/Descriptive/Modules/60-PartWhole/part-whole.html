<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Arvind Venkatadri">
<meta name="dcterms.date" content="2022-11-25">
<title>The Foundation Series - üçï Parts of a Whole</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../../../">
<script src="../../../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../../../../../site_libs/quarto-contrib/jquery-3.6.3/jquery-3.6.3.min.js"></script>
<script src="../../../../../../site_libs/quarto-contrib/code-fullscreen-1.0.0/code-fullscreen.js" defer="true"></script>
<link href="../../../../../../site_libs/quarto-contrib/code-fullscreen-1.0.0/code-fullscreen.css" rel="stylesheet">
<script src="../../../../../../site_libs/quarto-contrib/iconify-1.0.0-beta.2/iconify-icon.min.js"></script><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<script src="../../../../../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="../../../../../../site_libs/echarts4r-4.8.0/echarts-en.min.js"></script><script src="../../../../../../site_libs/echarts4r-4.8.0/ecStat.min.js"></script><script src="../../../../../../site_libs/echarts4r-4.8.0/dataTool.min.js"></script><script src="../../../../../../site_libs/echarts4r-binding-0.4.5/echarts4r.js"></script><link href="../../../../../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../../../../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<meta property="og:title" content="The Foundation Series - üçï Parts of a Whole">
<meta property="og:description" content="Slices, Portions, Counts, and Aggregates of Data">
<meta property="og:image" content="https://av-quarto.netlify.app/content/courses/Analytics/Descriptive/Modules/60-PartWhole/preview.jpg">
<meta property="og:site-name" content="The Foundation Series">
<meta property="og:image:alt" content="image from rawpixels.com">
</head>
<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../../../index.html">
    <span class="navbar-title">The Foundation Series</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../../../../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/arvindvenkatadri/my-quarto-website" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/arvind_v" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../../../../www.linkedin.com/in/arvindvenkatadri" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">üçï Parts of a Whole</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Teaching</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../../../content/courses/Analytics/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analytics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">
<li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/Analytics/Tools/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tools and Software</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/Analytics/Descriptive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Descriptive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/Analytics/Inference/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical Inference</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/Analytics/Modelling/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inferential Modelling</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/Analytics/Predictive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/Analytics/Prescriptive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prescriptive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/Analytics/Workflow/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workflow</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/R4Artists/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R for Artists and Managers</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/TRIZ4ProbSolving/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TRIZ for Innovation</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/MathModelsDesign/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Math Models in Design</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/NoCode/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Vis with No Code</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/courses/ISTW/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">In Short, the World</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/posts/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Posts</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../../../content/projects/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Blogs</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#iconify-noto-v1-package-setting-up-the-packages" id="toc-iconify-noto-v1-package-setting-up-the-packages" class="nav-link active" data-scroll-target="#iconify-noto-v1-package-setting-up-the-packages"><iconify-icon inline="" icon="noto-v1:package"></iconify-icon> Setting up the Packages</a></li>
  <li><a href="#iconify-fxemoji-japanesesymbolforbeginner-what-graphs-will-we-see-today" id="toc-iconify-fxemoji-japanesesymbolforbeginner-what-graphs-will-we-see-today" class="nav-link" data-scroll-target="#iconify-fxemoji-japanesesymbolforbeginner-what-graphs-will-we-see-today"><iconify-icon inline="" icon="fxemoji:japanesesymbolforbeginner"></iconify-icon> What Graphs will we see today?</a></li>
  <li>
<a href="#iconify-noto-folding-hand-fan-pies-and-fans" id="toc-iconify-noto-folding-hand-fan-pies-and-fans" class="nav-link" data-scroll-target="#iconify-noto-folding-hand-fan-pies-and-fans"><iconify-icon inline="" icon="noto:folding-hand-fan"></iconify-icon> Pies and Fans</a>
  <ul class="collapse">
<li><a href="#the-fan-plot" id="toc-the-fan-plot" class="nav-link" data-scroll-target="#the-fan-plot">The <code>fan</code> Plot</a></li>
  <li><a href="#the-donut-chart" id="toc-the-donut-chart" class="nav-link" data-scroll-target="#the-donut-chart">The <code>Donut</code> Chart</a></li>
  </ul>
</li>
  <li><a href="#iconify-noto-waffle-waffle-charts" id="toc-iconify-noto-waffle-waffle-charts" class="nav-link" data-scroll-target="#iconify-noto-waffle-waffle-charts"><iconify-icon inline="" icon="noto:waffle"></iconify-icon> Waffle Charts</a></li>
  <li><a href="#iconify-fa6-solid-people-roof-parliament-charts" id="toc-iconify-fa6-solid-people-roof-parliament-charts" class="nav-link" data-scroll-target="#iconify-fa6-solid-people-roof-parliament-charts"><iconify-icon inline="" icon="fa6-solid:people-roof"></iconify-icon> Parliament Charts</a></li>
  <li>
<a href="#trees-dendrograms-and-circle-packings" id="toc-trees-dendrograms-and-circle-packings" class="nav-link" data-scroll-target="#trees-dendrograms-and-circle-packings">Trees, Dendrograms, and Circle Packings</a>
  <ul class="collapse">
<li><a href="#iconify-mdi-family-tree-dendrograms" id="toc-iconify-mdi-family-tree-dendrograms" class="nav-link" data-scroll-target="#iconify-mdi-family-tree-dendrograms"><iconify-icon inline="" icon="mdi:family-tree"></iconify-icon> Dendrograms</a></li>
  <li><a href="#circle-packing" id="toc-circle-packing" class="nav-link" data-scroll-target="#circle-packing">Circle Packing</a></li>
  </ul>
</li>
  <li><a href="#iconify-bi-person-up-your-turn" id="toc-iconify-bi-person-up-your-turn" class="nav-link" data-scroll-target="#iconify-bi-person-up-your-turn"><iconify-icon inline="" icon="bi:person-up"></iconify-icon> Your Turn</a></li>
  <li><a href="#iconify-ooui-references-ltr-references" id="toc-iconify-ooui-references-ltr-references" class="nav-link" data-scroll-target="#iconify-ooui-references-ltr-references"><iconify-icon inline="" icon="ooui:references-ltr"></iconify-icon> References</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">üçï Parts of a Whole</h1>
<p class="subtitle lead">Parts of a Whole</p>
  <div class="quarto-categories">
    <div class="quarto-category">Pie Charts</div>
    <div class="quarto-category">Fan Charts</div>
    <div class="quarto-category">Donut Charts</div>
    <div class="quarto-category">Grouping</div>
    <div class="quarto-category">Stacking</div>
    <div class="quarto-category">Circular Bar Charts</div>
    <div class="quarto-category">Dot Plots</div>
    <div class="quarto-category">Mosaic Charts</div>
    <div class="quarto-category">Parliament Charts</div>
    <div class="quarto-category">Waffle Charts</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Arvind Venkatadri </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 25, 2022</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">June 19, 2023</p>
    </div>
  </div>
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    Slices, Portions, Counts, and Aggregates of Data
  </div>
</div>

</header><section id="iconify-noto-v1-package-setting-up-the-packages" class="level2"><h2 class="anchored" data-anchor-id="iconify-noto-v1-package-setting-up-the-packages">
<iconify-icon inline="" icon="noto-v1:package"></iconify-icon> Setting up the Packages</h2>
<div class="cell" data-hash="part-whole_cache/html/setup_9ddb8669b0e6aaee4d89a4ee04c8ef7e">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(mosaic)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(ggformula)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(plotrix) <span class="co"># Fan, Pyramid Chart</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(ggparliament) <span class="co"># Parliament Chart</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(ggpol) <span class="co"># Parliament, Arc-Bar and other interesting charts</span></span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># library(waffle) # What it says! See note below: need github version</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co"># install.packages("waffle", repos = "https://cinc.rud.is")</span></span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(tidygraph) <span class="co"># Trees, Dendros, and Circle Packings</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">library</span>(ggraph) <span class="co"># Trees, Dendros, and Circle Packings</span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="fu">library</span>(echarts4r) <span class="co"># Interactive Charts</span></span>
<span id="cb1-14"><a href="#cb1-14"></a></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="fu">library</span>(patchwork) <span class="co"># Arrange your plots</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="iconify-fxemoji-japanesesymbolforbeginner-what-graphs-will-we-see-today" class="level2"><h2 class="anchored" data-anchor-id="iconify-fxemoji-japanesesymbolforbeginner-what-graphs-will-we-see-today">
<iconify-icon inline="" icon="fxemoji:japanesesymbolforbeginner"></iconify-icon> What Graphs will we see today?</h2>
<p>There are a good few charts available to depict things that constitute other bigger things. We will discuss a few of these: Pie, Fan, and Donuts; Waffle and Parliament charts; Trees, Dendrograms, and Circle Packings. (The last three visuals we will explore along with <code>network diagrams</code> in a later module.)</p>
</section><section id="iconify-noto-folding-hand-fan-pies-and-fans" class="level2"><h2 class="anchored" data-anchor-id="iconify-noto-folding-hand-fan-pies-and-fans">
<iconify-icon inline="" icon="noto:folding-hand-fan"></iconify-icon> Pies and Fans</h2>
<p>So let us start with ‚Äúeating humble pie‚Äù: discussing a Pie chart first.</p>
<p>A <code>pie chart</code> is a circle divided into sectors that each represent a proportion of the whole. It is often used to show percentage, where the sum of the sectors equals 100%.</p>
<p>The problem is that humans are pretty bad at reading angles. This ubiquitous chart is much vilified in the industry and <code>bar charts</code> that we have seen earlier, are viewed as better options. On the other hand, pie charts are ubiquitous in business circles, and are very much accepted! Do also read this spirited defense of pie charts here. <a href="https://speakingppt.com/why-tufte-is-flat-out-wrong-about-pie-charts/" class="uri">https://speakingppt.com/why-tufte-is-flat-out-wrong-about-pie-charts/</a></p>
<p>And we will also see that there is an attractive, and similar-looking alternative, called a <code>fan chart</code> which we will explore here.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Using Base R</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Using <code>echarts4r</code></a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Base R has a simple <code>pie</code> command that does the job. Let‚Äôs create some toy data first:</p>
<div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>pie_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="at">sales =</span> <span class="fu">c</span>(<span class="fl">0.12</span>, <span class="fl">0.3</span>, <span class="fl">0.26</span>, <span class="fl">0.16</span>, <span class="fl">0.04</span>, <span class="fl">0.12</span>), </span>
<span id="cb2-3"><a href="#cb2-3"></a>  </span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="co"># Labels MUST be character entries for `pie` to work</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Blueberry"</span>,<span class="st">"Cherry"</span>,<span class="st">"Apple"</span>,<span class="st">"Boston Cream"</span>,</span>
<span id="cb2-6"><a href="#cb2-6"></a>             <span class="st">"Other"</span>,<span class="st">"Vanilla Cream"</span>)</span>
<span id="cb2-7"><a href="#cb2-7"></a>  )</span>
<span id="cb2-8"><a href="#cb2-8"></a>pie_data</span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="fu">pie</span>(</span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="at">x =</span> pie_data<span class="sc">$</span>sales,</span>
<span id="cb2-11"><a href="#cb2-11"></a>  <span class="at">labels =</span> pie_data<span class="sc">$</span>labels, <span class="co"># Character Vector is a MUST</span></span>
<span id="cb2-12"><a href="#cb2-12"></a></span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="co"># Pie is within a square of 1 X 1 units</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="co"># Reduce radius if needed to see labels properly</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>  <span class="at">radius =</span> <span class="fl">0.95</span>,</span>
<span id="cb2-16"><a href="#cb2-16"></a>  </span>
<span id="cb2-17"><a href="#cb2-17"></a>  <span class="at">init.angle =</span> <span class="dv">90</span>, <span class="co"># First slice starts at 12 o'clock position</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>  </span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="co"># Change the default colours. Comment this and see what happens. </span></span>
<span id="cb2-20"><a href="#cb2-20"></a>  <span class="at">col =</span>  grDevices<span class="sc">::</span><span class="fu">hcl.colors</span>(<span class="at">palette =</span> <span class="st">"Plasma"</span>, <span class="at">n =</span> <span class="dv">6</span>)</span>
<span id="cb2-21"><a href="#cb2-21"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-hash="part-whole_cache/html/unnamed-chunk-2_1f9b73a97a995ba40702ae91784d7d63">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["sales"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["labels"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"0.12","2":"Blueberry"},{"1":"0.30","2":"Cherry"},{"1":"0.26","2":"Apple"},{"1":"0.16","2":"Boston Cream"},{"1":"0.04","2":"Other"},{"1":"0.12","2":"Vanilla Cream"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="part-whole_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="2100"></p>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Here is a basic interactive pie chart with<code>echarts4r</code>:</p>
<div class="cell" data-hash="part-whole_cache/html/unnamed-chunk-3_2267309de6410fd0fef9417f5204cb81">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>pie_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="at">sales =</span> <span class="fu">c</span>(<span class="fl">0.12</span>, <span class="fl">0.3</span>, <span class="fl">0.26</span>, <span class="fl">0.16</span>, <span class="fl">0.04</span>, <span class="fl">0.12</span>), </span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Blueberry"</span>,<span class="st">"Cherry"</span>,<span class="st">"Apple"</span>,<span class="st">"Boston Cream"</span>,<span class="st">"Other"</span>,</span>
<span id="cb3-5"><a href="#cb3-5"></a>             <span class="st">"Vanilla Cream"</span>))</span>
<span id="cb3-6"><a href="#cb3-6"></a>pie_data <span class="sc">%&gt;%</span> </span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="fu">e_charts</span>(<span class="at">x =</span> labels) <span class="sc">%&gt;%</span> </span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="fu">e_pie</span>(<span class="at">serie =</span> sales, <span class="at">clockwise =</span> <span class="cn">TRUE</span>, </span>
<span id="cb3-9"><a href="#cb3-9"></a>        <span class="at">startAngle =</span> <span class="dv">90</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="fu">e_legend</span>(<span class="fu">list</span>(<span class="at">orient =</span> <span class="st">"vertical"</span>,</span>
<span id="cb3-11"><a href="#cb3-11"></a>                      <span class="at">left =</span> <span class="st">"right"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-12"><a href="#cb3-12"></a>  <span class="fu">e_tooltip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="echarts4r html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-eba4b06eb56636d7d388" style="width:100%;height:500px;"></div>
<script type="application/json" data-for="htmlwidget-eba4b06eb56636d7d388">{"x":{"theme":"","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"legend":{"data":["Blueberry","Cherry","Apple","Boston Cream","Other","Vanilla Cream"],"show":{"orient":"vertical","left":"right"},"type":"plain"},"series":[{"name":"sales","type":"pie","clockwise":true,"startAngle":90,"data":[{"value":0.12,"name":"Blueberry"},{"value":0.3,"name":"Cherry"},{"value":0.26,"name":"Apple"},{"value":0.16,"name":"Boston Cream"},{"value":0.04,"name":"Other"},{"value":0.12,"name":"Vanilla Cream"}]}],"tooltip":{"trigger":"item"}},"dispose":true},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>We can add more bells and whistles to the humble-pie chart, and make a Nightingale <code>rosechart</code> out of it:</p>
<div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>pie_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="at">sales =</span> <span class="fu">c</span>(<span class="fl">0.12</span>, <span class="fl">0.3</span>, <span class="fl">0.26</span>, <span class="fl">0.16</span>, <span class="fl">0.04</span>, <span class="fl">0.12</span>), </span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Blueberry"</span>,<span class="st">"Cherry"</span>,<span class="st">"Apple"</span>,<span class="st">"Boston Cream"</span>,<span class="st">"Other"</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>             <span class="st">"Vanilla Cream"</span>))</span>
<span id="cb4-6"><a href="#cb4-6"></a>pie_data <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="fu">e_charts</span>(<span class="at">x =</span> labels) <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="#cb4-8"></a>  <span class="fu">e_pie</span>(<span class="at">serie =</span> sales, <span class="at">clockwise =</span> <span class="cn">TRUE</span>, </span>
<span id="cb4-9"><a href="#cb4-9"></a>        <span class="at">startAngle =</span> <span class="dv">90</span>, </span>
<span id="cb4-10"><a href="#cb4-10"></a>        <span class="at">roseType =</span> <span class="st">"area"</span>) <span class="sc">%&gt;%</span> <span class="co"># try "radius"</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>  </span>
<span id="cb4-12"><a href="#cb4-12"></a>  <span class="co"># Lets move the legend</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>  <span class="fu">e_legend</span>(<span class="at">left =</span> <span class="st">"right"</span>, <span class="at">orient =</span> <span class="st">"vertical"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="fu">e_tooltip</span>()</span>
<span id="cb4-15"><a href="#cb4-15"></a>pie_data <span class="sc">%&gt;%</span> </span>
<span id="cb4-16"><a href="#cb4-16"></a>  <span class="fu">e_charts</span>(<span class="at">x =</span> labels) <span class="sc">%&gt;%</span> </span>
<span id="cb4-17"><a href="#cb4-17"></a>  <span class="fu">e_pie</span>(<span class="at">serie =</span> sales, <span class="at">clockwise =</span> <span class="cn">TRUE</span>, </span>
<span id="cb4-18"><a href="#cb4-18"></a>        <span class="at">startAngle =</span> <span class="dv">90</span>, </span>
<span id="cb4-19"><a href="#cb4-19"></a>        <span class="at">roseType =</span> <span class="st">"radius"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-20"><a href="#cb4-20"></a>  </span>
<span id="cb4-21"><a href="#cb4-21"></a>  <span class="co"># Lets move the legend</span></span>
<span id="cb4-22"><a href="#cb4-22"></a>  <span class="fu">e_legend</span>(<span class="at">left =</span> <span class="st">"right"</span>, <span class="at">orient =</span> <span class="st">"vertical"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-23"><a href="#cb4-23"></a>  <span class="fu">e_tooltip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-hash="part-whole_cache/html/rose chart_e919719653736b88e5ca6e24350e6825">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="echarts4r html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-36eea6e39cf23a5ff122" style="width:100%;height:500px;"></div>
<script type="application/json" data-for="htmlwidget-36eea6e39cf23a5ff122">{"x":{"theme":"","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"legend":{"data":["Blueberry","Cherry","Apple","Boston Cream","Other","Vanilla Cream"],"show":true,"type":"plain","left":"right","orient":"vertical"},"series":[{"name":"sales","type":"pie","clockwise":true,"startAngle":90,"roseType":"area","data":[{"value":0.12,"name":"Blueberry"},{"value":0.3,"name":"Cherry"},{"value":0.26,"name":"Apple"},{"value":0.16,"name":"Boston Cream"},{"value":0.04,"name":"Other"},{"value":0.12,"name":"Vanilla Cream"}]}],"tooltip":{"trigger":"item"}},"dispose":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="echarts4r html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-bce879c1c20dc72c79fc" style="width:100%;height:500px;"></div>
<script type="application/json" data-for="htmlwidget-bce879c1c20dc72c79fc">{"x":{"theme":"","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"legend":{"data":["Blueberry","Cherry","Apple","Boston Cream","Other","Vanilla Cream"],"show":true,"type":"plain","left":"right","orient":"vertical"},"series":[{"name":"sales","type":"pie","clockwise":true,"startAngle":90,"roseType":"radius","data":[{"value":0.12,"name":"Blueberry"},{"value":0.3,"name":"Cherry"},{"value":0.26,"name":"Apple"},{"value":0.16,"name":"Boston Cream"},{"value":0.04,"name":"Other"},{"value":0.12,"name":"Vanilla Cream"}]}],"tooltip":{"trigger":"item"}},"dispose":true},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
<p>For more information and customization look at <a href="https://echarts.apache.org/en/option.html#series-pie" class="uri">https://echarts.apache.org/en/option.html#series-pie</a></p>
</div>
</div>
</div>
<section id="the-fan-plot" class="level3"><h3 class="anchored" data-anchor-id="the-fan-plot">The <code>fan</code> Plot</h3>
<p>The <code>fan plot</code> (from the <code>plotrix</code> package) displays numerical values as arcs of <strong>overlapping sectors</strong>. This allows for more effective comparison:</p>
<div class="cell" data-hash="part-whole_cache/html/unnamed-chunk-5_279b36d3b3603f9a3d5a81e17936914c">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>plotrix<span class="sc">::</span><span class="fu">fan.plot</span>(</span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="at">x =</span> pie_data<span class="sc">$</span>sales,</span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="at">labels =</span> pie_data<span class="sc">$</span>labels,</span>
<span id="cb5-4"><a href="#cb5-4"></a>  </span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="at">col =</span> grDevices<span class="sc">::</span><span class="fu">hcl.colors</span>(<span class="at">palette =</span> <span class="st">"Plasma"</span>, <span class="at">n =</span> <span class="dv">6</span>),</span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="at">shrink =</span> <span class="fl">0.03</span>,</span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="co"># How much to shrink each successive sector</span></span>
<span id="cb5-8"><a href="#cb5-8"></a></span>
<span id="cb5-9"><a href="#cb5-9"></a>  <span class="at">label.radius =</span> <span class="fl">1.15</span>,</span>
<span id="cb5-10"><a href="#cb5-10"></a>  <span class="at">main =</span> <span class="st">"Fan Plot of Ice Cream Flavours"</span>,</span>
<span id="cb5-11"><a href="#cb5-11"></a>  <span class="co"># ticks = 360,</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>  <span class="co"># if we want tick marks on the circumference</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>  </span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="at">max.span =</span> pi</span>
<span id="cb5-15"><a href="#cb5-15"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="part-whole_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="2100"></p>
</div>
</div>
<p>There is no fan plot possible with <code>echarts4r</code>, as far as I know.</p>
</section><section id="the-donut-chart" class="level3"><h3 class="anchored" data-anchor-id="the-donut-chart">The <code>Donut</code> Chart</h3>
<p>The <code>donut</code> chart suffers from the same defects as the pie, so should be used with discretion. The <code>donut</code> chart is essentially a <code>gf_rect</code> from <code>ggformula</code>, plotted on a <strong>polar coordinate</strong> set of of axes:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Using <code>ggformula</code></a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Using <code>echarts4r</code></a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Let us make some toy data:</p>
<div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># Data</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">group =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],</span>
<span id="cb6-3"><a href="#cb6-3"></a>                 <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">35</span>))</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a>df <span class="ot">&lt;-</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="#cb6-7"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">fraction =</span> value <span class="sc">/</span> <span class="fu">sum</span>(value), <span class="co"># percentages</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>    <span class="at">ymax =</span> <span class="fu">cumsum</span>(fraction), <span class="co"># cumulative percentages</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>    <span class="at">ymin =</span> <span class="fu">lag</span>(ymax, <span class="dv">1</span>, <span class="at">default =</span> <span class="dv">0</span>),</span>
<span id="cb6-10"><a href="#cb6-10"></a>    <span class="co"># bottom edge of each</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(group, <span class="st">"</span><span class="sc">\n</span><span class="st"> value: "</span>, value),</span>
<span id="cb6-12"><a href="#cb6-12"></a>    <span class="at">labelPosition =</span> (ymax <span class="sc">+</span> ymin) <span class="sc">/</span> <span class="dv">2</span> <span class="co"># labels midway on arcs</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>  )</span>
<span id="cb6-14"><a href="#cb6-14"></a></span>
<span id="cb6-15"><a href="#cb6-15"></a>df</span>
<span id="cb6-16"><a href="#cb6-16"></a>df <span class="sc">%&gt;%</span>  </span>
<span id="cb6-17"><a href="#cb6-17"></a>  <span class="co"># gf_rect() formula: ymin + ymax ~ xmin + xmax</span></span>
<span id="cb6-18"><a href="#cb6-18"></a>  <span class="co"># Bars with varying thickness (y) proportional to data</span></span>
<span id="cb6-19"><a href="#cb6-19"></a>  <span class="co"># Fixed length x (2 to 4)</span></span>
<span id="cb6-20"><a href="#cb6-20"></a>  <span class="fu">gf_rect</span>(ymin <span class="sc">+</span> ymax <span class="sc">~</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span>,</span>
<span id="cb6-21"><a href="#cb6-21"></a>          <span class="at">fill =</span> <span class="sc">~</span> group, <span class="at">colour =</span> <span class="st">"black"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-22"><a href="#cb6-22"></a>  </span>
<span id="cb6-23"><a href="#cb6-23"></a>  <span class="fu">gf_label</span>(labelPosition <span class="sc">~</span> <span class="fl">3.5</span>, </span>
<span id="cb6-24"><a href="#cb6-24"></a>           <span class="at">label =</span> <span class="sc">~</span> label,</span>
<span id="cb6-25"><a href="#cb6-25"></a>           <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-26"><a href="#cb6-26"></a></span>
<span id="cb6-27"><a href="#cb6-27"></a><span class="co"># When switching to polar coords:</span></span>
<span id="cb6-28"><a href="#cb6-28"></a><span class="co"># x maps to radius</span></span>
<span id="cb6-29"><a href="#cb6-29"></a><span class="co"># y maps to angle theta</span></span>
<span id="cb6-30"><a href="#cb6-30"></a><span class="co"># so we create a "hole" in the radius, in x </span></span>
<span id="cb6-31"><a href="#cb6-31"></a>  <span class="fu">gf_refine</span>(<span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>, </span>
<span id="cb6-32"><a href="#cb6-32"></a>                        <span class="at">direction =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-33"><a href="#cb6-33"></a>            <span class="co"># Up to here will give us a pie chart</span></span>
<span id="cb6-34"><a href="#cb6-34"></a>  </span>
<span id="cb6-35"><a href="#cb6-35"></a>  <span class="co"># Now to create the hole</span></span>
<span id="cb6-36"><a href="#cb6-36"></a>  <span class="co"># try to play with the "0"</span></span>
<span id="cb6-37"><a href="#cb6-37"></a>  <span class="co"># Recall x = [2,4]</span></span>
<span id="cb6-38"><a href="#cb6-38"></a>  <span class="fu">gf_refine</span>(<span class="fu">xlim</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">5</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb6-39"><a href="#cb6-39"></a></span>
<span id="cb6-40"><a href="#cb6-40"></a>  </span>
<span id="cb6-41"><a href="#cb6-41"></a>  <span class="fu">gf_theme</span>(<span class="at">theme =</span> <span class="fu">theme_void</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb6-42"><a href="#cb6-42"></a>  <span class="fu">gf_theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-hash="part-whole_cache/html/donut-chart_00bae5284fa96efda2bebb8c5db72831">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["group"],"name":[1],"type":["chr"],"align":["left"]},{"label":["value"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["fraction"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["ymax"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["ymin"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["label"],"name":[6],"type":["chr"],"align":["left"]},{"label":["labelPosition"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"A","2":"25","3":"0.3125","4":"0.3125","5":"0.0000","6":"A\\n value: 25","7":"0.15625"},{"1":"B","2":"20","3":"0.2500","4":"0.5625","5":"0.3125","6":"B\\n value: 20","7":"0.43750"},{"1":"C","2":"35","3":"0.4375","4":"1.0000","5":"0.5625","6":"C\\n value: 35","7":"0.78125"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="part-whole_files/figure-html/donut-chart-1.png" class="img-fluid" width="2100"></p>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>The <code>donut</code> chart is simply a variant of the pie chart in <code>echarts4r</code>:</p>
<div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">group =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],</span>
<span id="cb7-2"><a href="#cb7-2"></a>                 <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">35</span>))</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a>df <span class="ot">&lt;-</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  df <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">fraction =</span> value <span class="sc">/</span> <span class="fu">sum</span>(value), <span class="co"># percentages</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>    <span class="at">ymax =</span> <span class="fu">cumsum</span>(fraction), <span class="co"># cumulative percentages</span></span>
<span id="cb7-8"><a href="#cb7-8"></a>    <span class="at">ymin =</span> <span class="fu">lag</span>(ymax, <span class="dv">1</span>, <span class="at">default =</span> <span class="dv">0</span>),</span>
<span id="cb7-9"><a href="#cb7-9"></a>    <span class="co"># bottom edge of each</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(group, <span class="st">"</span><span class="sc">\n</span><span class="st"> value: "</span>, value),</span>
<span id="cb7-11"><a href="#cb7-11"></a>    <span class="at">labelPosition =</span> (ymax <span class="sc">+</span> ymin) <span class="sc">/</span> <span class="dv">2</span> <span class="co"># labels midway on arcs</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>  )</span>
<span id="cb7-13"><a href="#cb7-13"></a>df</span>
<span id="cb7-14"><a href="#cb7-14"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="fu">e_charts</span>(<span class="at">x =</span> group, <span class="at">width =</span> <span class="dv">400</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-16"><a href="#cb7-16"></a>  <span class="fu">e_pie</span>(<span class="at">serie =</span> value, </span>
<span id="cb7-17"><a href="#cb7-17"></a>        <span class="at">clockwise =</span> <span class="cn">TRUE</span>, </span>
<span id="cb7-18"><a href="#cb7-18"></a>        <span class="at">startAngle =</span> <span class="dv">90</span>,</span>
<span id="cb7-19"><a href="#cb7-19"></a>        </span>
<span id="cb7-20"><a href="#cb7-20"></a>        <span class="at">radius =</span> <span class="fu">c</span>(<span class="st">"50%"</span>, <span class="st">"70%"</span>)</span>
<span id="cb7-21"><a href="#cb7-21"></a>        ) <span class="sc">%&gt;%</span> </span>
<span id="cb7-22"><a href="#cb7-22"></a>  </span>
<span id="cb7-23"><a href="#cb7-23"></a>  <span class="fu">e_legend</span>(<span class="at">left =</span> <span class="st">"right"</span>, <span class="at">orient =</span> <span class="st">"vertical"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-24"><a href="#cb7-24"></a>  <span class="fu">e_tooltip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-hash="part-whole_cache/html/unnamed-chunk-7_6d7fe690e00861cbf31b68c74a52554e">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["group"],"name":[1],"type":["chr"],"align":["left"]},{"label":["value"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["fraction"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["ymax"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["ymin"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["label"],"name":[6],"type":["chr"],"align":["left"]},{"label":["labelPosition"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"A","2":"25","3":"0.3125","4":"0.3125","5":"0.0000","6":"A\\n value: 25","7":"0.15625"},{"1":"B","2":"20","3":"0.2500","4":"0.5625","5":"0.3125","6":"B\\n value: 20","7":"0.43750"},{"1":"C","2":"35","3":"0.4375","4":"1.0000","5":"0.5625","6":"C\\n value: 35","7":"0.78125"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div id="htmlwidget-c9b1899a77707ef9ee79" style="width:400px;height:500px;" class="echarts4r html-widget "></div>
<script type="application/json" data-for="htmlwidget-c9b1899a77707ef9ee79">{"x":{"theme":"","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"legend":{"data":["A","B","C"],"show":true,"type":"plain","left":"right","orient":"vertical"},"series":[{"name":"value","type":"pie","clockwise":true,"startAngle":90,"radius":["50%","70%"],"data":[{"value":25,"name":"A"},{"value":20,"name":"B"},{"value":35,"name":"C"}]}],"tooltip":{"trigger":"item"}},"dispose":true},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="iconify-noto-waffle-waffle-charts" class="level2"><h2 class="anchored" data-anchor-id="iconify-noto-waffle-waffle-charts">
<iconify-icon inline="" icon="noto:waffle"></iconify-icon> Waffle Charts</h2>
<p>Waffle charts are often called ‚Äúsquare pie charts‚Äù !</p>
<p>Here we will need to step outside of <code>ggformula</code> and get into <code>ggplot</code> itself momentarily. (Always remember that <code>ggformula</code> is a simplified and intuitive method that runs on <strong>top</strong> of <code>ggplot</code>.) We will use the <code>waffle</code> package.</p>
<div class="cell" data-hash="part-whole_cache/html/label- using-waffle warning- false_ef31bb7272c7ac499b556dd8c333f51e">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># install.packages("waffle", repos = "https://cinc.rud.is")</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">library</span>(waffle)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># Data</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">group =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],</span>
<span id="cb8-6"><a href="#cb8-6"></a>                 <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">35</span>))</span>
<span id="cb8-7"><a href="#cb8-7"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["group"],"name":[1],"type":["chr"],"align":["left"]},{"label":["value"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"A","2":"25"},{"1":"B","2":"20"},{"1":"C","2":"35"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Waffle plot</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co"># Using ggplot, sadly not yet ggformula</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">fill =</span> group, <span class="at">values =</span> value)) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="fu">geom_waffle</span>(</span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="at">n_rows =</span> <span class="dv">8</span>,</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="at">size =</span> <span class="fl">0.33</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="at">colour =</span> <span class="st">"white"</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>    <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>  ) <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb9-11"><a href="#cb9-11"></a>    <span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-12"><a href="#cb9-12"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#BA182A"</span>, <span class="st">"#FF8288"</span>, <span class="st">"#FFDBDD"</span>),</span>
<span id="cb9-13"><a href="#cb9-13"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>)</span>
<span id="cb9-14"><a href="#cb9-14"></a>  ) <span class="sc">+</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb9-16"><a href="#cb9-16"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="part-whole_files/figure-html/label- using-waffle warning- false-1.png" class="img-fluid" width="2100"></p>
</div>
</div>
</section><section id="iconify-fa6-solid-people-roof-parliament-charts" class="level2"><h2 class="anchored" data-anchor-id="iconify-fa6-solid-people-roof-parliament-charts">
<iconify-icon inline="" icon="fa6-solid:people-roof"></iconify-icon> Parliament Charts</h2>
<p>The package <code>ggpol</code> offers an interesting visualization in the shape of a array of ‚Äúseats‚Äù in a parliament. (There is also a package called <code>ggparliament</code> which in my opinion is a bit cumbersome, having a two step procedure to convert data into ‚Äúparliament form‚Äù etc. )</p>
<div class="cell" data-hash="part-whole_cache/html/using-ggpol_17de9387919944827a7b60d53fb3bd1e">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">group =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],</span>
<span id="cb10-2"><a href="#cb10-2"></a>                 <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">35</span>))</span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co"># Parliament Plot</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="fu">ggplot</span>(df) <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>  ggpol<span class="sc">::</span><span class="fu">geom_parliament</span>(<span class="fu">aes</span>(<span class="at">seats =</span> value, </span>
<span id="cb10-7"><a href="#cb10-7"></a>                             <span class="at">fill =</span> group),</span>
<span id="cb10-8"><a href="#cb10-8"></a>                         <span class="at">r0 =</span> <span class="dv">2</span>, <span class="co"># inner radius</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>                         <span class="at">r1 =</span> <span class="dv">4</span> <span class="co"># Outer radius</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>  ) <span class="sc">+</span> </span>
<span id="cb10-11"><a href="#cb10-11"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb10-12"><a href="#cb10-12"></a>                    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#BA182A"</span>, <span class="st">"#FF8288"</span>, <span class="st">"#FFDBDD"</span>),</span>
<span id="cb10-13"><a href="#cb10-13"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>)) <span class="sc">+</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>  <span class="fu">theme_void</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="part-whole_files/figure-html/using-ggpol-1.png" class="img-fluid" width="2100"></p>
</div>
</div>
</section><section id="trees-dendrograms-and-circle-packings" class="level2"><h2 class="anchored" data-anchor-id="trees-dendrograms-and-circle-packings">Trees, Dendrograms, and Circle Packings</h2>
<p>There are still more esoteric plots to explore, if you are hell-bent on startling people ! There is an R package called <code>ggraph</code>, that can do these charts, and many more:</p>
<blockquote class="blockquote">
<p>ggraph is an extension of <a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a> aimed at supporting relational data structures such as networks, graphs, and trees. While it builds upon the foundation of <code>ggplot2</code> and its API it comes with its own self-contained set of geoms, facets, etc., as well as adding the concept of <em>layouts</em> to the grammar.</p>
</blockquote>
<p>We will explore these charts when we examine <code>network diagrams.</code> For now, we can quickly see what these diagrams look like. Although the R-code is visible to you, it may not make sense at the moment!</p>
<section id="iconify-mdi-family-tree-dendrograms" class="level3"><h3 class="anchored" data-anchor-id="iconify-mdi-family-tree-dendrograms">
<iconify-icon inline="" icon="mdi:family-tree"></iconify-icon> Dendrograms</h3>
<p>From the <a href="http://r-graph-gallery.com/index.html">R Graph Gallery Website</a> :</p>
<blockquote class="blockquote">
<p>Dendrograms can be built from:</p>
<ul>
<li><p><a href="http://r-graph-gallery.com/dendrogram.html#hiera">Hierarchical dataset</a>: think about a CEO managing team leads managing employees and so on.</p></li>
<li><p><a href="http://r-graph-gallery.com/dendrogram.html#clust">Clustering result</a>: clustering divides a set of individuals in group according to their similarity. Its result can be visualized as a tree.</p></li>
</ul>
</blockquote>
<div class="cell" data-hash="part-whole_cache/html/unnamed-chunk-10_2de7558fe897fdfa60c9b90b5b2ece2c">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># create an edge list data frame giving the hierarchical structure of your individuals</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>d1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">from =</span> <span class="st">"origin"</span>, <span class="at">to =</span> <span class="fu">paste</span>(<span class="st">"group"</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">5</span>), <span class="at">sep =</span> <span class="st">""</span>))</span>
<span id="cb11-3"><a href="#cb11-3"></a>d2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">from =</span> <span class="fu">rep</span>(d1<span class="sc">$</span>to, <span class="at">each=</span><span class="dv">5</span>), <span class="at">to =</span> <span class="fu">paste</span>(<span class="st">"subgroup"</span>, <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">25</span>), <span class="at">sep=</span><span class="st">"_"</span>))</span>
<span id="cb11-4"><a href="#cb11-4"></a>edges <span class="ot">&lt;-</span> <span class="fu">rbind</span>(d1, d2)</span>
<span id="cb11-5"><a href="#cb11-5"></a>edges</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["from"],"name":[1],"type":["chr"],"align":["left"]},{"label":["to"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"origin","2":"group1"},{"1":"origin","2":"group2"},{"1":"origin","2":"group3"},{"1":"origin","2":"group4"},{"1":"origin","2":"group5"},{"1":"group1","2":"subgroup_1"},{"1":"group1","2":"subgroup_2"},{"1":"group1","2":"subgroup_3"},{"1":"group1","2":"subgroup_4"},{"1":"group1","2":"subgroup_5"},{"1":"group2","2":"subgroup_6"},{"1":"group2","2":"subgroup_7"},{"1":"group2","2":"subgroup_8"},{"1":"group2","2":"subgroup_9"},{"1":"group2","2":"subgroup_10"},{"1":"group3","2":"subgroup_11"},{"1":"group3","2":"subgroup_12"},{"1":"group3","2":"subgroup_13"},{"1":"group3","2":"subgroup_14"},{"1":"group3","2":"subgroup_15"},{"1":"group4","2":"subgroup_16"},{"1":"group4","2":"subgroup_17"},{"1":"group4","2":"subgroup_18"},{"1":"group4","2":"subgroup_19"},{"1":"group4","2":"subgroup_20"},{"1":"group5","2":"subgroup_21"},{"1":"group5","2":"subgroup_22"},{"1":"group5","2":"subgroup_23"},{"1":"group5","2":"subgroup_24"},{"1":"group5","2":"subgroup_25"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Create a graph object </span></span>
<span id="cb12-2"><a href="#cb12-2"></a>mygraph1 <span class="ot">&lt;-</span> tidygraph<span class="sc">::</span><span class="fu">as_tbl_graph</span>( edges )</span>
<span id="cb12-3"><a href="#cb12-3"></a> </span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># Basic tree</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(mygraph1, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> </span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="fu">geom_node_point</span>() <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="part-whole_cache/html/unnamed-chunk-11_c915e4865377f099fd33a78301af442d">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># create a data frame </span></span>
<span id="cb13-2"><a href="#cb13-2"></a>data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="at">level1=</span><span class="st">"CEO"</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="at">level2=</span><span class="fu">c</span>( <span class="fu">rep</span>(<span class="st">"boss1"</span>,<span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">"boss2"</span>,<span class="dv">4</span>)),</span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="at">level3=</span><span class="fu">paste0</span>(<span class="st">"mister_"</span>, letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>])</span>
<span id="cb13-6"><a href="#cb13-6"></a>)</span>
<span id="cb13-7"><a href="#cb13-7"></a> </span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co"># transform it to a edge list!</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>edges_level1_2 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb13-10"><a href="#cb13-10"></a>  <span class="fu">select</span>(level1, level2) <span class="sc">%&gt;%</span> unique <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">from=</span>level1, <span class="at">to=</span>level2)</span>
<span id="cb13-11"><a href="#cb13-11"></a></span>
<span id="cb13-12"><a href="#cb13-12"></a>edges_level2_3 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb13-13"><a href="#cb13-13"></a>  <span class="fu">select</span>(level2, level3) <span class="sc">%&gt;%</span> unique <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">from=</span>level2, <span class="at">to=</span>level3)</span>
<span id="cb13-14"><a href="#cb13-14"></a></span>
<span id="cb13-15"><a href="#cb13-15"></a>edge_list <span class="ot">&lt;-</span> <span class="fu">rbind</span>(edges_level1_2, edges_level2_3)</span>
<span id="cb13-16"><a href="#cb13-16"></a>edge_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["from"],"name":[1],"type":["chr"],"align":["left"]},{"label":["to"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"CEO","2":"boss1"},{"1":"CEO","2":"boss2"},{"1":"boss1","2":"mister_a"},{"1":"boss1","2":"mister_b"},{"1":"boss1","2":"mister_c"},{"1":"boss1","2":"mister_d"},{"1":"boss2","2":"mister_e"},{"1":"boss2","2":"mister_f"},{"1":"boss2","2":"mister_g"},{"1":"boss2","2":"mister_h"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Now we can plot that</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>mygraph2 <span class="ot">&lt;-</span> <span class="fu">as_tbl_graph</span>(edge_list)</span>
<span id="cb14-3"><a href="#cb14-3"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggraph</span>(mygraph2, <span class="at">layout =</span> <span class="st">'dendrogram'</span>, <span class="at">circular =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">geom_edge_diagonal</span>() <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="fu">geom_node_point</span>() <span class="sc">+</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="part-whole_cache/html/unnamed-chunk-12_9ae58af58b98919db52bf7e8f17b6b2f">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="part-whole_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="2100"></p>
</div>
</div>
</section><section id="circle-packing" class="level3"><h3 class="anchored" data-anchor-id="circle-packing">Circle Packing</h3>
<div class="cell" data-hash="part-whole_cache/html/unnamed-chunk-13_69c0560d2cac0c5d9ed254b1a52ffeb2">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">library</span>(tidygraph)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb16-3"><a href="#cb16-3"></a>graph <span class="ot">&lt;-</span> <span class="fu">tbl_graph</span>(flare<span class="sc">$</span>vertices, flare<span class="sc">$</span>edges)</span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="fu">ggraph</span>(graph, <span class="st">'circlepack'</span>, <span class="at">weight =</span> size) <span class="sc">+</span> </span>
<span id="cb16-6"><a href="#cb16-6"></a>  <span class="fu">geom_node_circle</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">as_factor</span>(depth)), <span class="at">size =</span> <span class="fl">0.25</span>, <span class="at">n =</span> <span class="dv">50</span>) <span class="sc">+</span> </span>
<span id="cb16-7"><a href="#cb16-7"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Depth"</span>) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="part-whole_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="2100"></p>
</div>
</div>
</section></section><section id="iconify-bi-person-up-your-turn" class="level2"><h2 class="anchored" data-anchor-id="iconify-bi-person-up-your-turn">
<iconify-icon inline="" icon="bi:person-up"></iconify-icon> Your Turn</h2>
<ol type="1">
<li>Use the <code>penguins</code> dataset from the <code>palmerpenguins</code> package and plot pies, fans, and donuts as appropriate.</li>
<li>Look at the <code>whigs</code> and <code>highschool</code> datasets in the package <code>ggraph</code>. Plot Pies, Fans and if you are feeling confident, Trees, Dendrograms, and Circle Packings as appropriate for these.</li>
</ol></section><section id="iconify-ooui-references-ltr-references" class="level2"><h2 class="anchored" data-anchor-id="iconify-ooui-references-ltr-references">
<iconify-icon inline="" icon="ooui:references-ltr"></iconify-icon> References</h2>
<ol type="1">
<li><p><a href="https://datavizstory.com/a-parliament-diagram-in-r/" class="uri">https://datavizstory.com/a-parliament-diagram-in-r/</a></p></li>
<li><p><code>ggpol</code>Guide by Frederik Tiedemann, <a href="https://erocoar.github.io/ggpol/" class="uri">https://erocoar.github.io/ggpol/</a></p></li>
<li><p>Thomas Lin Pedersen, <code>ggraph:</code>A grammar of graphics for relational data, <a href="https://ggraph.data-imaginist.com/" class="uri">https://ggraph.data-imaginist.com/</a></p></li>
<li><p>Venn Diagrams in R, <a href="https://r-charts.com/part-whole/ggvenndiagram/">Venn diagram in ggplot2 | R CHARTS (r-charts.com</a>)</p></li>
</ol>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Handle positioning of the toggle
      window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/av-quarto\.netlify\.app");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Website made with üíú and <a href="https://quarto.org/">Quarto</a>, by Arvind Venkatadri. License: <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA 2.0</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/arvindvenkatadri/">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/arvind_v">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:arvind.venkatadri@gmail.com">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


<script src="../../../../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>