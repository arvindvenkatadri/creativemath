<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Arvind Venkatadri">
<meta name="dcterms.date" content="2021-07-06">
<title>The Foundation Series - Lab 06 - The Grammar of Graphics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<link href="../../../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../../../site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
<meta property="og:title" content="The Foundation Series - Lab 06 - The Grammar of Graphics">
<meta property="og:description" content="Part of my R for Artists and Designers course using the idea of metaphors in written language.">
<meta property="og:image" content="https://av-quarto.netlify.app/content/labs/r-labs/graphics/index_files/figure-html/teaser-1.png">
<meta property="og:site-name" content="The Foundation Series">
<meta property="og:image:height" content="6000">
<meta property="og:image:width" content="8400">
<meta name="twitter:title" content="The Foundation Series - Lab 06 - The Grammar of Graphics">
<meta name="twitter:description" content="Part of my R for Artists and Designers course using the idea of metaphors in written language.">
<meta name="twitter:image" content="https://av-quarto.netlify.app/content/labs/r-labs/graphics/index_files/figure-html/teaser-1.png">
<meta name="twitter:image-height" content="6000">
<meta name="twitter:image-width" content="8400">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">The Foundation Series</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/arvindvenkatadri/my-quarto-website" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/arvind_v" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../../www.linkedin.com/in/arvindvenkatadri" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Lab 06 - The Grammar of Graphics</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Teaching</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../../content/courses/Analytics/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analytics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">
<li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/Analytics/Tools/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tools and Software</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/Analytics/Descriptive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Descriptive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/Analytics/Inference/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical Inference</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/Analytics/Modelling/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inferential Modelling</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/Analytics/Predictive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/Analytics/Prescriptive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prescriptive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/Analytics/Workflow/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workflow</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/R4Artists/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R for Artists and Managers</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/TRIZ4ProbSolving/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TRIZ for Innovation</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/MathModelsDesign/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Math Models in Design</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/NoCode/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Vis with No Code</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/courses/ISTW/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">In Short, the World</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/posts/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Posts</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../content/projects/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Blogs</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals"><span class="header-section-number">2</span> Goals</a></li>
  <li><a href="#pedagogical-note" id="toc-pedagogical-note" class="nav-link" data-scroll-target="#pedagogical-note"><span class="header-section-number">3</span> Pedagogical Note</a></li>
  <li><a href="#set-up" id="toc-set-up" class="nav-link" data-scroll-target="#set-up"><span class="header-section-number">4</span> Set Up</a></li>
  <li><a href="#a-teaser-from-john-snow" id="toc-a-teaser-from-john-snow" class="nav-link" data-scroll-target="#a-teaser-from-john-snow"><span class="header-section-number">5</span> A Teaser from John Snow</a></li>
  <li><a href="#review-of-tidy-data" id="toc-review-of-tidy-data" class="nav-link" data-scroll-target="#review-of-tidy-data"><span class="header-section-number">6</span> Review of Tidy Data</a></li>
  <li><a href="#kinds-of-variables" id="toc-kinds-of-variables" class="nav-link" data-scroll-target="#kinds-of-variables"><span class="header-section-number">7</span> Kinds of Variables</a></li>
  <li>
<a href="#interrogations-and-graphs" id="toc-interrogations-and-graphs" class="nav-link" data-scroll-target="#interrogations-and-graphs"><span class="header-section-number">8</span> Interrogations and Graphs</a>
  <ul class="collapse">
<li><a href="#components-of-the-layered-grammar-of-graphics" id="toc-components-of-the-layered-grammar-of-graphics" class="nav-link" data-scroll-target="#components-of-the-layered-grammar-of-graphics"><span class="header-section-number">8.1</span> Components of the layered grammar of graphics</a></li>
  </ul>
</li>
  <li>
<a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="header-section-number">9</span> Data</a>
  <ul class="collapse">
<li><a href="#head" id="toc-head" class="nav-link" data-scroll-target="#head"><span class="header-section-number">9.1</span> Head</a></li>
  <li><a href="#tail" id="toc-tail" class="nav-link" data-scroll-target="#tail"><span class="header-section-number">9.2</span> Tail</a></li>
  <li><a href="#dim" id="toc-dim" class="nav-link" data-scroll-target="#dim"><span class="header-section-number">9.3</span> Dim</a></li>
  </ul>
</li>
  <li>
<a href="#mapping" id="toc-mapping" class="nav-link" data-scroll-target="#mapping"><span class="header-section-number">10</span> Mapping</a>
  <ul class="collapse">
<li><a href="#mapping-example-1" id="toc-mapping-example-1" class="nav-link" data-scroll-target="#mapping-example-1"><span class="header-section-number">10.1</span> Mapping Example-1</a></li>
  <li><a href="#mapping-example-2" id="toc-mapping-example-2" class="nav-link" data-scroll-target="#mapping-example-2"><span class="header-section-number">10.2</span> Mapping Example-2</a></li>
  <li><a href="#mapping-example-3" id="toc-mapping-example-3" class="nav-link" data-scroll-target="#mapping-example-3"><span class="header-section-number">10.3</span> Mapping Example-3</a></li>
  <li><a href="#mapping-example-4" id="toc-mapping-example-4" class="nav-link" data-scroll-target="#mapping-example-4"><span class="header-section-number">10.4</span> Mapping Example-4</a></li>
  </ul>
</li>
  <li>
<a href="#geometric-objects" id="toc-geometric-objects" class="nav-link" data-scroll-target="#geometric-objects"><span class="header-section-number">11</span> Geometric objects</a>
  <ul class="collapse">
<li><a href="#plot1" id="toc-plot1" class="nav-link" data-scroll-target="#plot1"><span class="header-section-number">11.1</span> Plot1</a></li>
  <li><a href="#plot2" id="toc-plot2" class="nav-link" data-scroll-target="#plot2"><span class="header-section-number">11.2</span> Plot2</a></li>
  <li><a href="#plot3" id="toc-plot3" class="nav-link" data-scroll-target="#plot3"><span class="header-section-number">11.3</span> Plot3</a></li>
  </ul>
</li>
  <li><a href="#position-adjustment" id="toc-position-adjustment" class="nav-link" data-scroll-target="#position-adjustment"><span class="header-section-number">12</span> Position adjustment</a></li>
  <li>
<a href="#statistical-transformation" id="toc-statistical-transformation" class="nav-link" data-scroll-target="#statistical-transformation"><span class="header-section-number">13</span> Statistical transformation</a>
  <ul class="collapse">
<li><a href="#count" id="toc-count" class="nav-link" data-scroll-target="#count"><span class="header-section-number">13.1</span> Count</a></li>
  <li><a href="#count-and-bar-graph" id="toc-count-and-bar-graph" class="nav-link" data-scroll-target="#count-and-bar-graph"><span class="header-section-number">13.2</span> Count and Bar Graph</a></li>
  <li><a href="#tidy-count-and-bar-graph" id="toc-tidy-count-and-bar-graph" class="nav-link" data-scroll-target="#tidy-count-and-bar-graph"><span class="header-section-number">13.3</span> Tidy Count and Bar Graph</a></li>
  <li><a href="#count-inside-the-plot" id="toc-count-inside-the-plot" class="nav-link" data-scroll-target="#count-inside-the-plot"><span class="header-section-number">13.4</span> Count inside the Plot</a></li>
  </ul>
</li>
  <li><a href="#scale" id="toc-scale" class="nav-link" data-scroll-target="#scale"><span class="header-section-number">14</span> Scale</a></li>
  <li><a href="#coordinate-system" id="toc-coordinate-system" class="nav-link" data-scroll-target="#coordinate-system"><span class="header-section-number">15</span> Coordinate system</a></li>
  <li><a href="#faceting" id="toc-faceting" class="nav-link" data-scroll-target="#faceting"><span class="header-section-number">16</span> Faceting</a></li>
  <li><a href="#defaults" id="toc-defaults" class="nav-link" data-scroll-target="#defaults"><span class="header-section-number">17</span> Defaults</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Lab 06 - The Grammar of Graphics</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
<p class="subtitle lead">Creating Graphs and Charts using <code>ggplot</code></p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Arvind Venkatadri </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 6, 2021</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">March 12, 2023</p>
    </div>
  </div>
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    Part of my <code>R for Artists and Designers</code> course using the idea of metaphors in written language.
  </div>
</div>

</header><section id="introduction" class="level2" data-number="1"><h2 data-number="1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">1</span> Introduction</h2>
<p>This RMarkdown document is part of my course on R for Artists and Designers. The material is based on A Layered Grammar of Graphics by Hadley Wickham. The intent of this Course is to build Skill in coding in R, and also appreciate R as a way to metaphorically visualize information of various kinds, using predominantly geometric figures and structures.</p>
<p>All RMarkdown files combine code, text, web-images, and figures developed using code. Everything is text; code chunks are enclosed in fences (```)</p>
</section><section id="goals" class="level2" data-number="2"><h2 data-number="2" class="anchored" data-anchor-id="goals">
<span class="header-section-number">2</span> Goals</h2>
<p>At the end of this Lab session, we should: - know the types and structures of tidy data and be able to work with them - be able to create data visualizations using <code>ggplot</code> - Understand <em>aesthetics</em> and <em>scales</em> in `ggplot</p>
</section><section id="pedagogical-note" class="level2" data-number="3"><h2 data-number="3" class="anchored" data-anchor-id="pedagogical-note">
<span class="header-section-number">3</span> Pedagogical Note</h2>
<p>The method followed will be based on <a href="https://blogs.kcl.ac.uk/cser/2017/09/01/primm-a-structured-approach-to-teaching-programming/">PRIMM</a>:</p>
<ul>
<li>
<strong>PREDICT</strong> Inspect the code and guess at what the code might do, <strong>write predictions</strong>
</li>
<li>
<strong>RUN</strong> the code provided and check what happens</li>
<li>
<strong>INFER</strong> what the <code>parameters</code> of the code do and <strong>write comments to explain</strong>. What bells and whistles can you see?</li>
<li>
<strong>MODIFY</strong> the <code>parameters</code> code provided to understand the <code>options</code> available. <strong>Write comments</strong> to show what you have aimed for and achieved.</li>
<li>
<strong>MAKE</strong> : take an idea/concept of your own, and graph it.</li>
</ul></section><section id="set-up" class="level2" data-number="4"><h2 data-number="4" class="anchored" data-anchor-id="set-up">
<span class="header-section-number">4</span> Set Up</h2>
<p>The <code>setup</code> code <strong>chunk</strong> below brings into our coding session <strong>R packages</strong> that provide specific computational abilities and also <strong>datasets</strong> which we can use.</p>
<p>To reiterate: Packages and datasets are <strong>not</strong> the same thing !! Packages are (small) collections of programs. Datasets are just….information.</p>
</section><section id="a-teaser-from-john-snow" class="level2" data-number="5"><h2 data-number="5" class="anchored" data-anchor-id="a-teaser-from-john-snow">
<span class="header-section-number">5</span> A Teaser from John Snow</h2>
<div class="cell" data-hash="index_cache/html/teaser_7a63806f85536b7eb35c83c576d46fba">
<div class="cell-output-display">
<p><img src="index_files/figure-html/teaser-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="review-of-tidy-data" class="level2" data-number="6"><h2 data-number="6" class="anchored" data-anchor-id="review-of-tidy-data">
<span class="header-section-number">6</span> Review of Tidy Data</h2>
<p>“Tidy Data” is an important way of thinking about what data typically look like in R. Let’s fetch a figure from the web to show the (preferred) structure of data in R. (The syntax to bring in a web-figure is <code>![caption](url)</code>)</p>
<p><img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/tidydata_1.jpg" class="img-fluid" alt="Tidy Data"> The three features described in the figure above define the nature of tidy data:</p>
<ul>
<li>
<em>Variables in Columns</em><br>
</li>
<li>
<em>Observations in Rows</em> and<br>
</li>
<li>
<em>Measurements in Cells</em>.</li>
</ul>
<p>Data are imagined to be resulting from an <strong>experiment</strong>. Each <em>variable</em> represents a parameter/aspect in the experiment. Each <em>row</em> represents an additional datum of measurement. A <em>cell</em> is a single measurement on a single parameter(column) in a single observation(row).</p>
</section><section id="kinds-of-variables" class="level2" data-number="7"><h2 data-number="7" class="anchored" data-anchor-id="kinds-of-variables">
<span class="header-section-number">7</span> Kinds of Variables</h2>
<p><strong>Kinds of Variable</strong> are defined by the kind of <em>questions</em> they answer to:</p>
<ol type="1">
<li>What/Who/Where? -&gt; Some kind of Name. <strong>Categorical</strong> variable</li>
<li>What Kind? How? -&gt; Some kind of “Type”. <strong>Factor</strong> variable</li>
<li>How Many? How large? -&gt; Some kind of Quantity. <strong>Numerical</strong> variable. Most Figures in R are computed with variables, and therefore, with <strong>columns</strong>.</li>
</ol></section><section id="interrogations-and-graphs" class="level2" data-number="8"><h2 data-number="8" class="anchored" data-anchor-id="interrogations-and-graphs">
<span class="header-section-number">8</span> Interrogations and Graphs</h2>
<p>Creating graphs from data is an act of asking questions and viewing answers in a geometric way. Let us write some simple English descriptions of measures and visuals and see what commands they use in R.</p>
<section id="components-of-the-layered-grammar-of-graphics" class="level3" data-number="8.1"><h3 data-number="8.1" class="anchored" data-anchor-id="components-of-the-layered-grammar-of-graphics">
<span class="header-section-number">8.1</span> Components of the layered grammar of graphics</h3>
<p><strong>Layers</strong> are used to create the objects on a plot. They are defined by five basic parts:</p>
<ol type="1">
<li>Data (What dataset/spreadsheet am I using?)</li>
<li>Mapping (What does each column do in my graph?)</li>
<li>Statistical transformation (stat) (Do I have count something first?)</li>
<li>Geometric object (geom) (What shape, colour, size…do I want?)</li>
<li>Position adjustment (position) (Where do I want it on the graph?)</li>
</ol></section></section><section id="data" class="level2 tabset tabset-pills" data-number="9"><h2 class="tabset tabset-pills anchored" data-number="9" data-anchor-id="data">
<span class="header-section-number">9</span> Data</h2>
<p>We will use “real world” data. Let’s use the <code>penguins</code> dataset in the <code>palmerpenguins</code> package. Run <code>?penguins</code> in the console to get more information about this dataset.</p>
<section id="head" class="level3" data-number="9.1"><h3 data-number="9.1" class="anchored" data-anchor-id="head">
<span class="header-section-number">9.1</span> Head</h3>
<div class="cell" data-hash="index_cache/html/penguins-1_825bfd59a9174892c71bc9c3837a3855">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["species"],"name":[1],"type":["fct"],"align":["left"]},{"label":["island"],"name":[2],"type":["fct"],"align":["left"]},{"label":["bill_length_mm"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["bill_depth_mm"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["flipper_length_mm"],"name":[5],"type":["int"],"align":["right"]},{"label":["body_mass_g"],"name":[6],"type":["int"],"align":["right"]},{"label":["sex"],"name":[7],"type":["fct"],"align":["left"]},{"label":["year"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"Adelie","2":"Torgersen","3":"39.1","4":"18.7","5":"181","6":"3750","7":"male","8":"2007"},{"1":"Adelie","2":"Torgersen","3":"39.5","4":"17.4","5":"186","6":"3800","7":"female","8":"2007"},{"1":"Adelie","2":"Torgersen","3":"40.3","4":"18.0","5":"195","6":"3250","7":"female","8":"2007"},{"1":"Adelie","2":"Torgersen","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"2007"},{"1":"Adelie","2":"Torgersen","3":"36.7","4":"19.3","5":"193","6":"3450","7":"female","8":"2007"},{"1":"Adelie","2":"Torgersen","3":"39.3","4":"20.6","5":"190","6":"3650","7":"male","8":"2007"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="tail" class="level3" data-number="9.2"><h3 data-number="9.2" class="anchored" data-anchor-id="tail">
<span class="header-section-number">9.2</span> Tail</h3>
<div class="cell" data-hash="index_cache/html/penguins-2_b1d255536b87a0370133be650bce7c2a">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["species"],"name":[1],"type":["fct"],"align":["left"]},{"label":["island"],"name":[2],"type":["fct"],"align":["left"]},{"label":["bill_length_mm"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["bill_depth_mm"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["flipper_length_mm"],"name":[5],"type":["int"],"align":["right"]},{"label":["body_mass_g"],"name":[6],"type":["int"],"align":["right"]},{"label":["sex"],"name":[7],"type":["fct"],"align":["left"]},{"label":["year"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"Chinstrap","2":"Dream","3":"45.7","4":"17.0","5":"195","6":"3650","7":"female","8":"2009"},{"1":"Chinstrap","2":"Dream","3":"55.8","4":"19.8","5":"207","6":"4000","7":"male","8":"2009"},{"1":"Chinstrap","2":"Dream","3":"43.5","4":"18.1","5":"202","6":"3400","7":"female","8":"2009"},{"1":"Chinstrap","2":"Dream","3":"49.6","4":"18.2","5":"193","6":"3775","7":"male","8":"2009"},{"1":"Chinstrap","2":"Dream","3":"50.8","4":"19.0","5":"210","6":"4100","7":"male","8":"2009"},{"1":"Chinstrap","2":"Dream","3":"50.2","4":"18.7","5":"198","6":"3775","7":"female","8":"2009"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="dim" class="level3" data-number="9.3"><h3 data-number="9.3" class="anchored" data-anchor-id="dim">
<span class="header-section-number">9.3</span> Dim</h3>
<div class="cell" data-hash="index_cache/html/penguins-3_49bab014c31925c732229bbcfd0f4163">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 344   8</code></pre>
</div>
</div>
<p>So we know what our data looks like. We pass this data to <code>ggplot</code> use to plot as follows: in R this creates an empty graph sheet!! Because we have not (yet) declared the geometric shapes we want to use to plot our information.</p>
<div class="cell" data-hash="index_cache/html/data-1_7d8785ed8d3780b1cfee9edf0d9a26fd">
<div class="cell-output-display">
<p><img src="index_files/figure-html/data-1-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section></section><section id="mapping" class="level2" data-number="10"><h2 data-number="10" class="anchored" data-anchor-id="mapping">
<span class="header-section-number">10</span> Mapping</h2>
<p>Now that we have told R what data to use, we need to state what variables to plot and how.</p>
<p><strong>Aesthetic Mapping</strong> defines how the variables are applied to the plot, i.e.&nbsp;we take a variable from the data and “metaphorize” it into a geometric feature. We can map variables metaphorically to a variety of geometric things: coordinate, length, height, size, shape, colour, alpha(how dark?)….</p>
<p>The syntax uses: <code>aes(some_geometric_thing = some_variable)</code></p>
<p>Remember <strong>variable</strong> = <strong>column</strong>.</p>
<p>So if we were graphing information from <code>penguins</code>, we might map a penguin’s <code>flipper_length_mm</code> <strong>column</strong> to the <span class="math inline">\(x\)</span> position, and the <code>body_mass_g</code> <strong>column</strong> to the <span class="math inline">\(y\)</span> position.</p>
<section id="mapping-example-1" class="level3 tabset tabset-pills" data-number="10.1"><h3 class="tabset tabset-pills anchored" data-number="10.1" data-anchor-id="mapping-example-1">
<span class="header-section-number">10.1</span> Mapping Example-1</h3>
<p>We can try another example of aesthetic mapping with the same dataset:</p>
<section id="plot-1a" class="level4" data-number="10.1.1"><h4 data-number="10.1.1" class="anchored" data-anchor-id="plot-1a">
<span class="header-section-number">10.1.1</span> Plot-1a</h4>
<div class="cell" data-hash="index_cache/html/mapping-1a_24088b950e979efe754eb18ae38fb112">
<div class="cell-output-display">
<p><img src="index_files/figure-html/mapping-1a-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="plot-1b" class="level4" data-number="10.1.2"><h4 data-number="10.1.2" class="anchored" data-anchor-id="plot-1b">
<span class="header-section-number">10.1.2</span> Plot-1b</h4>
</section><section id="plot-1c" class="level4" data-number="10.1.3"><h4 data-number="10.1.3" class="anchored" data-anchor-id="plot-1c">
<span class="header-section-number">10.1.3</span> Plot-1c</h4>
</section></section><section id="mapping-example-2" class="level3 tabset tabset-pills" data-number="10.2"><h3 class="tabset tabset-pills anchored" data-number="10.2" data-anchor-id="mapping-example-2">
<span class="header-section-number">10.2</span> Mapping Example-2</h3>
<p>We can try another example of aesthetic mapping with the same dataset:</p>
<section id="plot-2a" class="level4" data-number="10.2.1"><h4 data-number="10.2.1" class="anchored" data-anchor-id="plot-2a">
<span class="header-section-number">10.2.1</span> Plot-2a</h4>
<div class="cell" data-hash="index_cache/html/mapping-2a_89c327d75eed3728768d5fe68ab3c0e4">
<div class="cell-output-display">
<p><img src="index_files/figure-html/mapping-2a-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="plot-2b" class="level4" data-number="10.2.2"><h4 data-number="10.2.2" class="anchored" data-anchor-id="plot-2b">
<span class="header-section-number">10.2.2</span> Plot-2b</h4>
</section><section id="plot-2c" class="level4" data-number="10.2.3"><h4 data-number="10.2.3" class="anchored" data-anchor-id="plot-2c">
<span class="header-section-number">10.2.3</span> Plot-2c</h4>
</section></section><section id="mapping-example-3" class="level3 tabset tabset-pills" data-number="10.3"><h3 class="tabset tabset-pills anchored" data-number="10.3" data-anchor-id="mapping-example-3">
<span class="header-section-number">10.3</span> Mapping Example-3</h3>
<p>We can try another example of aesthetic mapping with the same dataset:</p>
<section id="plot-3a" class="level4" data-number="10.3.1"><h4 data-number="10.3.1" class="anchored" data-anchor-id="plot-3a">
<span class="header-section-number">10.3.1</span> Plot-3a</h4>
<div class="cell" data-hash="index_cache/html/mapping-3a_4efd4f22c8e427410b7c9ee1334de8b2">
<div class="cell-output-display">
<p><img src="index_files/figure-html/mapping-3a-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="plot-3b" class="level4" data-number="10.3.2"><h4 data-number="10.3.2" class="anchored" data-anchor-id="plot-3b">
<span class="header-section-number">10.3.2</span> Plot-3b</h4>
</section><section id="plot-3c" class="level4" data-number="10.3.3"><h4 data-number="10.3.3" class="anchored" data-anchor-id="plot-3c">
<span class="header-section-number">10.3.3</span> Plot-3c</h4>
</section></section><section id="mapping-example-4" class="level3 tabset tabset-pills" data-number="10.4"><h3 class="tabset tabset-pills anchored" data-number="10.4" data-anchor-id="mapping-example-4">
<span class="header-section-number">10.4</span> Mapping Example-4</h3>
<p>We can try another example of aesthetic mapping with the same dataset:</p>
<section id="plot-4a" class="level4" data-number="10.4.1"><h4 data-number="10.4.1" class="anchored" data-anchor-id="plot-4a">
<span class="header-section-number">10.4.1</span> Plot-4a</h4>
<div class="cell" data-hash="index_cache/html/mapping-4a_8491878c21c3dd3bf2ae6b2e99397712">
<div class="cell-output-display">
<p><img src="index_files/figure-html/mapping-4a-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="plot-4b" class="level4" data-number="10.4.2"><h4 data-number="10.4.2" class="anchored" data-anchor-id="plot-4b">
<span class="header-section-number">10.4.2</span> Plot-4b</h4>
</section><section id="plot-4c" class="level4" data-number="10.4.3"><h4 data-number="10.4.3" class="anchored" data-anchor-id="plot-4c">
<span class="header-section-number">10.4.3</span> Plot-4c</h4>
</section></section></section><section id="geometric-objects" class="level2 tabset tabset-pills" data-number="11"><h2 class="tabset tabset-pills anchored" data-number="11" data-anchor-id="geometric-objects">
<span class="header-section-number">11</span> Geometric objects</h2>
<p><strong>Geometric objects</strong> (<em>geoms</em>) control the type of plot you create. Geoms are classified by their dimensionality:</p>
<ul>
<li>0 dimensions - point, text</li>
<li>1 dimension - path, line</li>
<li>2 dimensions - polygon, interval</li>
</ul>
<p>Each geom can only display certain <strong>aesthetics</strong> or visual attributes of the geom. For example, a point geom has position, color, shape, and size aesthetics.</p>
<p>We can also stack up geoms on top of one another to add layers to the graph.</p>
<section id="plot1" class="level3" data-number="11.1"><h3 data-number="11.1" class="anchored" data-anchor-id="plot1">
<span class="header-section-number">11.1</span> Plot1</h3>
<div class="cell" data-hash="index_cache/html/other_geoms-1_e08b2c6f73926d239e966df47312c6ea">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/other_geoms-1-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="plot2" class="level3" data-number="11.2"><h3 data-number="11.2" class="anchored" data-anchor-id="plot2">
<span class="header-section-number">11.2</span> Plot2</h3>
<div class="cell" data-hash="index_cache/html/other-geoms-2_d21d26e8a50c88bbec541016019b3a83">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/other-geoms-2-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="plot3" class="level3" data-number="11.3"><h3 data-number="11.3" class="anchored" data-anchor-id="plot3">
<span class="header-section-number">11.3</span> Plot3</h3>
<div class="cell" data-hash="index_cache/html/other-geoms-3_e0ae595aae9050f1e1bdf35454ae6823">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/other-geoms-3-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/geom_bar-1_1b79a6d20a771809c55478b3689ac37a">
<div class="cell-output-display">
<p><img src="index_files/figure-html/geom_bar-1-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/geom_bar-2_2e3df77701ebc4604aa3eaaa8d9ff5d5">
<div class="cell-output-display">
<p><img src="index_files/figure-html/geom_bar-2-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<ul>
<li>Position determines the starting location (origin) of each bar</li>
<li>Height determines how tall to draw the bar. Here the height is based on the number of observations in the dataset for each possible number of cylinders.</li>
</ul></section></section><section id="position-adjustment" class="level2 tabset tabset-pills" data-number="12"><h2 class="tabset tabset-pills anchored" data-number="12" data-anchor-id="position-adjustment">
<span class="header-section-number">12</span> Position adjustment</h2>
<p>Sometimes with dense data we need to adjust the position of elements on the plot, otherwise data points might obscure one another. Bar plots frequently <strong>stack</strong> or <strong>dodge</strong> the bars to avoid overlap:</p>
<div class="cell" data-hash="index_cache/html/geom_bar_position_stack_and_dodge_481b579897148df981dcd4d13a4a8673">
<div class="cell-output-display">
<p><img src="index_files/figure-html/geom_bar_position_stack_and_dodge-1.png" class="img-fluid" width="4200"></p>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/geom_bar_position_stack_and_dodge-2.png" class="img-fluid" width="4200"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-1_cf1a64f5baa594c0620501f79729c354">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="4200"></p>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-1-2.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>Sometimes scatterplots with few unique <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> values are <strong>jittered</strong> (random noise is added) to reduce overplotting.</p>
<div class="cell" data-hash="index_cache/html/position_8802569f7342b121e4982458bbdcccf2">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/position-1.png" class="img-fluid" width="4200"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/position-2.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="statistical-transformation" class="level2 tabset tabset-pills" data-number="13"><h2 class="tabset tabset-pills anchored" data-number="13" data-anchor-id="statistical-transformation">
<span class="header-section-number">13</span> Statistical transformation</h2>
<p>A <strong>statistical transformation</strong> (<em>stat</em>) pre-transforms the data, before plotting. For instance, in a bar graph you might summarize the data by <code>count</code>ing the total number of observations within a set of categories, and then plotting the count.</p>
<section id="count" class="level3" data-number="13.1"><h3 data-number="13.1" class="anchored" data-anchor-id="count">
<span class="header-section-number">13.1</span> Count</h3>
<div class="cell" data-hash="index_cache/html/stat-transform-1_bfde44cb4cafebf59a2346f8b5c999f2">
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["island"],"name":[1],"type":["fct"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Biscoe","2":"168"},{"1":"Dream","2":"124"},{"1":"Torgersen","2":"52"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="count-and-bar-graph" class="level3" data-number="13.2"><h3 data-number="13.2" class="anchored" data-anchor-id="count-and-bar-graph">
<span class="header-section-number">13.2</span> Count and Bar Graph</h3>
<div class="cell" data-hash="index_cache/html/stat-transform-2_2f935d78f59fa0ea93f67f5e126bcc59">
<div class="cell-output-display">
<p><img src="index_files/figure-html/stat-transform-2-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="tidy-count-and-bar-graph" class="level3" data-number="13.3"><h3 data-number="13.3" class="anchored" data-anchor-id="tidy-count-and-bar-graph">
<span class="header-section-number">13.3</span> Tidy Count and Bar Graph</h3>
<div class="cell" data-hash="index_cache/html/stat-transform-3_5ada36097ca815c140476075b187e97b">
<div class="cell-output-display">
<p><img src="index_files/figure-html/stat-transform-3-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="count-inside-the-plot" class="level3" data-number="13.4"><h3 data-number="13.4" class="anchored" data-anchor-id="count-inside-the-plot">
<span class="header-section-number">13.4</span> Count inside the Plot</h3>
<div class="cell" data-hash="index_cache/html/stat-transform-4_44dc9e9a5746782f4de6c6a10fe0a42e">
<div class="cell-output-display">
<p><img src="index_files/figure-html/stat-transform-4-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>Sometimes you don’t need to make a statistical transformation. For example, in a scatterplot you use the raw values for the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> variables to map onto the graph. In these situations, the statistical transformation is an <em>identity</em> transformation - the stat simply passes in the original dataset and exports the exact same dataset.</p>
</section></section><section id="scale" class="level2 tabset tabset-pills" data-number="14"><h2 class="tabset tabset-pills anchored" data-number="14" data-anchor-id="scale">
<span class="header-section-number">14</span> Scale</h2>
<p>A <strong>scale</strong> controls how data is mapped to aesthetic attributes, so we need one scale for every aesthetic property employed in a layer. For example, this graph defines a scale for color:</p>
<div class="cell" data-hash="index_cache/html/scale-color_78ae739ff2ef1529504a60db87b9ed6f">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/scale-color-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>The scale can be changed to use a different color palette:</p>
<div class="cell" data-hash="index_cache/html/scale-color-palette_a734884746cc3eec22612f8eda8d1f9e">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/scale-color-palette-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>Now we are using a different palette, but the scale is still consistent: all Adelie penguins utilize the same color, whereas Chinstrap use a new color <strong>but each Adelie still uses the same, consistent color</strong>.</p>
</section><section id="coordinate-system" class="level2 tabset tabset-pills" data-number="15"><h2 class="tabset tabset-pills anchored" data-number="15" data-anchor-id="coordinate-system">
<span class="header-section-number">15</span> Coordinate system</h2>
<p>A <strong>coordinate system</strong> (<em>coord</em>) maps the position of objects onto the plane of the plot, and controls how the axes and grid lines are drawn. Plots typically use two coordinates (<span class="math inline">\(x, y\)</span>), but could use any number of coordinates. Most plots are drawn using the <a href="https://en.wikipedia.org/wiki/Cartesian_coordinate_system"><strong>Cartesian coordinate system</strong></a>:</p>
<div class="cell" data-hash="index_cache/html/coord-cart_ee02d054ea67327a77570b149ae7fa51">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `qplot()` was deprecated in ggplot2 3.4.0.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/coord-cart-1.png" class="img-fluid" width="4200"></p>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/coord-cart-2.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>This system requires a fixed and equal spacing between values on the axes. That is, the graph draws the same distance between 1 and 2 as it does between 5 and 6. The graph could be drawn using a <a href="https://en.wikipedia.org/wiki/Semi-log_plot"><strong>semi-log coordinate system</strong></a> which logarithmically compresses the distance on an axis:</p>
<div class="cell" data-hash="index_cache/html/coord_semi_log_0959ff4304b6c5b7977f0c25e4de7927">
<div class="cell-output-display">
<p><img src="index_files/figure-html/coord_semi_log-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>Or could even be drawn using <a href="https://en.wikipedia.org/wiki/Polar_coordinate_system"><strong>polar coordinates</strong></a>:</p>
<div class="cell" data-hash="index_cache/html/coord_polar_00e245171e1fe8658eb5989f09a19aa3">
<div class="cell-output-display">
<p><img src="index_files/figure-html/coord_polar-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="faceting" class="level2 tabset tabset-pills" data-number="16"><h2 class="tabset tabset-pills anchored" data-number="16" data-anchor-id="faceting">
<span class="header-section-number">16</span> Faceting</h2>
<p><strong>Faceting</strong> can be used to split the data up into subsets of the entire dataset. This is a powerful tool when investigating whether patterns are the same or different across conditions, and allows the subsets to be visualized on the same plot (known as <strong>conditioned</strong> or <strong>trellis</strong> plots). The faceting specification describes which variables should be used to split up the data, and how they should be arranged.</p>
<div class="cell" data-hash="index_cache/html/facet-1_734230f844bd5d25f80fce33b5ab22e0">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/facet-1-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/facet-2_db1626e9cb3d5e3481712ec3f372860b">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/facet-2-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
</section><section id="defaults" class="level2" data-number="17"><h2 data-number="17" class="anchored" data-anchor-id="defaults">
<span class="header-section-number">17</span> Defaults</h2>
<p>Rather than explicitly declaring each component of a layered graphic (which will use more code and introduces opportunities for errors), we can establish intelligent defaults for specific geoms and scales. For instance, whenever we want to use a bar geom, we can default to using a stat that counts the number of observations in each group of our variable in the <span class="math inline">\(x\)</span> position.</p>
<p>Consider the following scenario: you wish to generate a scatterplot visualizing the relationship between penguins’ bill_length and their body_mass. With no defaults, the code to generate this graph is:</p>
<div class="cell" data-hash="index_cache/html/default_983562fad6cbcd0f4cc775edd8c9979c">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/default-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>The above code:</p>
<ul>
<li><p>Creates a new plot object (<code>ggplot</code>)</p></li>
<li>
<p>Adds a layer (<code>layer</code>)</p>
<ul>
<li>Specifies the data (<code>penguins</code>)</li>
<li>Maps engine bill length to the <span class="math inline">\(x\)</span> position and body mass to the <span class="math inline">\(y\)</span> position (<code>mapping</code>)</li>
<li>Uses the point geometric transformation (<code>geom = "point"</code>)</li>
<li>Implements an identity transformation and position (<code>stat = "identity"</code> and <code>position = "identity"</code>)</li>
</ul>
</li>
<li><p>Establishes two continuous position scales (<code>scale_x_continuous</code> and <code>scale_y_continuous</code>)</p></li>
<li><p>Declares a cartesian coordinate system (<code>coord_cartesian</code>)</p></li>
</ul>
<p>How can we simplify this using intelligent defaults?</p>
<ol type="1">
<li><p>We only need to specify one geom and stat, since each geom has a default stat.</p></li>
<li><p>Cartesian coordinate systems are most commonly used, so it should be the default.</p></li>
<li>
<p>Default scales can be added based on the aesthetic and type of variables.</p>
<ul>
<li>Continuous values are transformed with a linear scaling.</li>
<li>Discrete values are mapped to integers.</li>
<li>Scales for aesthetics such as color, fill, and size can also be intelligently defaulted.</li>
</ul>
</li>
</ol>
<p>Using these defaults, we can rewrite the above code as:</p>
<div class="cell" data-hash="index_cache/html/default2_3e037f0115b76943733887b24e7396c9">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/default2-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>This generates the exact same plot, but uses fewer lines of code. Because multiple layers can use the same components (data, mapping, etc.), we can also specify that information in the <code>ggplot()</code> function rather than in the <code>layer()</code> function:</p>
<div class="cell" data-hash="index_cache/html/default3_fd1c770cd3ee4f5aca97577772716177">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/default3-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<p>And as we will learn, function arguments in R use specific ordering, so we can omit the explicit call to <code>data</code> and <code>mapping</code>:</p>
<div class="cell" data-hash="index_cache/html/default4_2f35f6415995db70833ef4ad6486aaeb">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/default4-1.png" class="img-fluid" width="4200"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-2_cbc61032a4793ebaf0ae7a3a4a391783">
<div class="cell-output-display">
<p><img src="https://isabella-b.com/blog/ggplot2-theme-elements-reference/ggplot2-theme-elements-reference-v2_hu8994090e1960a0a71878a3756da20076_580819_2000x2000_fit_lanczos_2.png" class="img-fluid"></p>
</div>
</div>


<!-- -->

</section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/av-quarto\.netlify\.app");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb17" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1"></a><span class="co">---</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="an">title:</span><span class="co"> 'Lab 06 - The Grammar of Graphics'</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="an">subtitle:</span><span class="co"> Creating Graphs and Charts using `ggplot`</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="an">author:</span><span class="co"> "Arvind Venkatadri"</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="an">date:</span><span class="co"> 06/July/2021</span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="an">date-modified:</span><span class="co"> "`r Sys.Date()`"</span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="an">abstract-title:</span><span class="co"> "Abstract"</span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="an">abstract:</span><span class="co"> Part of my `R for Artists and Designers` course using the idea of metaphors in written language.</span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">---</span></span>
<span id="cb17-10"><a href="#cb17-10"></a></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="fu">## Introduction</span></span>
<span id="cb17-12"><a href="#cb17-12"></a></span>
<span id="cb17-13"><a href="#cb17-13"></a>This RMarkdown document is part of my course on R for Artists and</span>
<span id="cb17-14"><a href="#cb17-14"></a>Designers. The material is based on A Layered Grammar of Graphics by</span>
<span id="cb17-15"><a href="#cb17-15"></a>Hadley Wickham. The intent of this Course is to build Skill in coding in</span>
<span id="cb17-16"><a href="#cb17-16"></a>R, and also appreciate R as a way to metaphorically visualize</span>
<span id="cb17-17"><a href="#cb17-17"></a>information of various kinds, using predominantly geometric figures and</span>
<span id="cb17-18"><a href="#cb17-18"></a>structures.</span>
<span id="cb17-19"><a href="#cb17-19"></a></span>
<span id="cb17-20"><a href="#cb17-20"></a>All RMarkdown files combine code, text, web-images, and figures</span>
<span id="cb17-21"><a href="#cb17-21"></a>developed using code. Everything is text; code chunks are enclosed in</span>
<span id="cb17-22"><a href="#cb17-22"></a>fences (<span class="sc">\`\`\`</span>)</span>
<span id="cb17-23"><a href="#cb17-23"></a></span>
<span id="cb17-24"><a href="#cb17-24"></a><span class="fu">## Goals</span></span>
<span id="cb17-25"><a href="#cb17-25"></a></span>
<span id="cb17-26"><a href="#cb17-26"></a>At the end of this Lab session, we should: - know the types and</span>
<span id="cb17-27"><a href="#cb17-27"></a>structures of tidy data and be able to work with them - be able to</span>
<span id="cb17-28"><a href="#cb17-28"></a>create data visualizations using <span class="in">`ggplot`</span> - Understand *aesthetics* and</span>
<span id="cb17-29"><a href="#cb17-29"></a>*scales* in <span class="sc">\`</span>ggplot</span>
<span id="cb17-30"><a href="#cb17-30"></a></span>
<span id="cb17-31"><a href="#cb17-31"></a><span class="fu">## Pedagogical Note</span></span>
<span id="cb17-32"><a href="#cb17-32"></a></span>
<span id="cb17-33"><a href="#cb17-33"></a>The method followed will be based on</span>
<span id="cb17-34"><a href="#cb17-34"></a><span class="co">[</span><span class="ot">PRIMM</span><span class="co">](https://blogs.kcl.ac.uk/cser/2017/09/01/primm-a-structured-approach-to-teaching-programming/)</span>:</span>
<span id="cb17-35"><a href="#cb17-35"></a></span>
<span id="cb17-36"><a href="#cb17-36"></a><span class="ss">-   </span>**PREDICT** Inspect the code and guess at what the code might do,</span>
<span id="cb17-37"><a href="#cb17-37"></a>    **write predictions**</span>
<span id="cb17-38"><a href="#cb17-38"></a><span class="ss">-   </span>**RUN** the code provided and check what happens</span>
<span id="cb17-39"><a href="#cb17-39"></a><span class="ss">-   </span>**INFER** what the <span class="in">`parameters`</span> of the code do and **write comments</span>
<span id="cb17-40"><a href="#cb17-40"></a>    to explain**. What bells and whistles can you see?</span>
<span id="cb17-41"><a href="#cb17-41"></a><span class="ss">-   </span>**MODIFY** the <span class="in">`parameters`</span> code provided to understand the</span>
<span id="cb17-42"><a href="#cb17-42"></a>    <span class="in">`options`</span> available. **Write comments** to show what you have aimed</span>
<span id="cb17-43"><a href="#cb17-43"></a>    for and achieved.</span>
<span id="cb17-44"><a href="#cb17-44"></a><span class="ss">-   </span>**MAKE** : take an idea/concept of your own, and graph it.</span>
<span id="cb17-45"><a href="#cb17-45"></a></span>
<span id="cb17-46"><a href="#cb17-46"></a><span class="fu">## Set Up</span></span>
<span id="cb17-47"><a href="#cb17-47"></a></span>
<span id="cb17-48"><a href="#cb17-48"></a>The <span class="in">`setup`</span> code **chunk** below brings into our coding session **R</span>
<span id="cb17-49"><a href="#cb17-49"></a>packages** that provide specific computational abilities and also</span>
<span id="cb17-50"><a href="#cb17-50"></a>**datasets** which we can use.</span>
<span id="cb17-51"><a href="#cb17-51"></a></span>
<span id="cb17-52"><a href="#cb17-52"></a>To reiterate: Packages and datasets are **not** the same thing !!</span>
<span id="cb17-53"><a href="#cb17-53"></a>Packages are (small) collections of programs. Datasets are</span>
<span id="cb17-54"><a href="#cb17-54"></a>just....information.</span>
<span id="cb17-55"><a href="#cb17-55"></a></span>
<span id="cb17-56"><a href="#cb17-56"></a><span class="in">```{r setup, include = FALSE}</span></span>
<span id="cb17-57"><a href="#cb17-57"></a></span>
<span id="cb17-58"><a href="#cb17-58"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">cache =</span> <span class="cn">TRUE</span>, <span class="at">echo =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span>
<span id="cb17-59"><a href="#cb17-59"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb17-60"><a href="#cb17-60"></a></span>
<span id="cb17-61"><a href="#cb17-61"></a><span class="co"># Here we will include **packages** that allow us to code in specific way. </span></span>
<span id="cb17-62"><a href="#cb17-62"></a><span class="co"># Using the library() command.</span></span>
<span id="cb17-63"><a href="#cb17-63"></a><span class="co"># Some packages also contain datasets that we can use</span></span>
<span id="cb17-64"><a href="#cb17-64"></a></span>
<span id="cb17-65"><a href="#cb17-65"></a></span>
<span id="cb17-66"><a href="#cb17-66"></a><span class="co"># Programs to mess with data, and to plot it.</span></span>
<span id="cb17-67"><a href="#cb17-67"></a><span class="co"># Also has some demo datasets</span></span>
<span id="cb17-68"><a href="#cb17-68"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb17-69"><a href="#cb17-69"></a></span>
<span id="cb17-70"><a href="#cb17-70"></a><span class="co"># Data from Ecology</span></span>
<span id="cb17-71"><a href="#cb17-71"></a><span class="co"># Becoming the `lorem ipsum` dataset in R!!</span></span>
<span id="cb17-72"><a href="#cb17-72"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb17-73"><a href="#cb17-73"></a></span>
<span id="cb17-74"><a href="#cb17-74"></a><span class="co"># A collection of historical datasets</span></span>
<span id="cb17-75"><a href="#cb17-75"></a><span class="fu">library</span>(HistData)</span>
<span id="cb17-76"><a href="#cb17-76"></a></span>
<span id="cb17-77"><a href="#cb17-77"></a><span class="co"># For pedagogical reasons</span></span>
<span id="cb17-78"><a href="#cb17-78"></a><span class="fu">library</span>(flair)</span>
<span id="cb17-79"><a href="#cb17-79"></a></span>
<span id="cb17-80"><a href="#cb17-80"></a><span class="in">```</span></span>
<span id="cb17-81"><a href="#cb17-81"></a></span>
<span id="cb17-82"><a href="#cb17-82"></a><span class="fu">## A Teaser from John Snow</span></span>
<span id="cb17-83"><a href="#cb17-83"></a></span>
<span id="cb17-84"><a href="#cb17-84"></a><span class="in">```{r teaser,echo=FALSE}</span></span>
<span id="cb17-85"><a href="#cb17-85"></a></span>
<span id="cb17-86"><a href="#cb17-86"></a><span class="co"># SnowMap(polygons = TRUE)</span></span>
<span id="cb17-87"><a href="#cb17-87"></a><span class="co"># Write some comments on this code and what it seems to be creating</span></span>
<span id="cb17-88"><a href="#cb17-88"></a><span class="co"># Are there "layers" in this visualization?</span></span>
<span id="cb17-89"><a href="#cb17-89"></a><span class="fu">library</span>(sf)</span>
<span id="cb17-90"><a href="#cb17-90"></a><span class="fu">library</span>(sfheaders)</span>
<span id="cb17-91"><a href="#cb17-91"></a><span class="fu">library</span>(ggformula)</span>
<span id="cb17-92"><a href="#cb17-92"></a></span>
<span id="cb17-93"><a href="#cb17-93"></a><span class="fu">data</span>(Snow.deaths)</span>
<span id="cb17-94"><a href="#cb17-94"></a><span class="fu">data</span>(Snow.pumps)</span>
<span id="cb17-95"><a href="#cb17-95"></a><span class="fu">data</span>(Snow.streets)</span>
<span id="cb17-96"><a href="#cb17-96"></a><span class="fu">data</span>(Snow.polygons)</span>
<span id="cb17-97"><a href="#cb17-97"></a><span class="fu">data</span>(Snow.dates)</span>
<span id="cb17-98"><a href="#cb17-98"></a></span>
<span id="cb17-99"><a href="#cb17-99"></a><span class="do">## Convert to spatial format using sfheaders</span></span>
<span id="cb17-100"><a href="#cb17-100"></a>snow_streets_sf <span class="ot">&lt;-</span> Snow.streets <span class="sc">%&gt;%</span> </span>
<span id="cb17-101"><a href="#cb17-101"></a>  sfheaders<span class="sc">::</span><span class="fu">sf_linestring</span>(., <span class="at">linestring_id =</span> <span class="st">"street"</span>,<span class="at">x =</span> <span class="st">"x"</span>, <span class="at">y =</span> <span class="st">"y"</span>)</span>
<span id="cb17-102"><a href="#cb17-102"></a></span>
<span id="cb17-103"><a href="#cb17-103"></a><span class="do">#####</span></span>
<span id="cb17-104"><a href="#cb17-104"></a>snow_polygons_sf <span class="ot">&lt;-</span> Snow.polygons <span class="sc">%&gt;%</span> </span>
<span id="cb17-105"><a href="#cb17-105"></a>  <span class="fu">map_df</span>(<span class="at">.f =</span> <span class="sc">~</span> sfheaders<span class="sc">::</span><span class="fu">sf_linestring</span>(.x), <span class="fu">c</span>(<span class="at">x =</span> .x<span class="sc">$</span><span class="st">"x"</span>, <span class="at">y =</span> .x<span class="sc">$</span><span class="st">"y"</span>, <span class="at">keep =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-106"><a href="#cb17-106"></a></span>
<span id="cb17-107"><a href="#cb17-107"></a><span class="do">#####</span></span>
<span id="cb17-108"><a href="#cb17-108"></a>snow_pumps_sf <span class="ot">&lt;-</span> Snow.pumps <span class="sc">%&gt;%</span> sfheaders<span class="sc">::</span><span class="fu">sf_point</span>(<span class="at">x =</span> <span class="st">"x"</span>, <span class="at">y =</span> <span class="st">"y"</span>, <span class="at">keep =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-109"><a href="#cb17-109"></a></span>
<span id="cb17-110"><a href="#cb17-110"></a><span class="do">####</span></span>
<span id="cb17-111"><a href="#cb17-111"></a>snow_deaths_sf <span class="ot">&lt;-</span> Snow.deaths2 <span class="sc">%&gt;%</span> sfheaders<span class="sc">::</span><span class="fu">sf_point</span>(<span class="at">x =</span> <span class="st">"x"</span>, <span class="at">y =</span> <span class="st">"y"</span>, <span class="at">keep =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-112"><a href="#cb17-112"></a></span>
<span id="cb17-113"><a href="#cb17-113"></a><span class="do">### Now to plot it</span></span>
<span id="cb17-114"><a href="#cb17-114"></a></span>
<span id="cb17-115"><a href="#cb17-115"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb17-116"><a href="#cb17-116"></a>  </span>
<span id="cb17-117"><a href="#cb17-117"></a>    </span>
<span id="cb17-118"><a href="#cb17-118"></a>  <span class="fu">geom_density_2d_filled</span>(<span class="at">data =</span> Snow.deaths2, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y), </span>
<span id="cb17-119"><a href="#cb17-119"></a>                         <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">bins =</span> <span class="dv">9</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb17-120"><a href="#cb17-120"></a>  </span>
<span id="cb17-121"><a href="#cb17-121"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> snow_polygons_sf, <span class="at">color =</span> <span class="st">"brown"</span>,<span class="at">fill =</span> <span class="st">"white"</span>,</span>
<span id="cb17-122"><a href="#cb17-122"></a>          <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb17-123"><a href="#cb17-123"></a>  </span>
<span id="cb17-124"><a href="#cb17-124"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> snow_streets_sf, <span class="at">color =</span> <span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb17-125"><a href="#cb17-125"></a>  </span>
<span id="cb17-126"><a href="#cb17-126"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> snow_pumps_sf, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"blue"</span>,</span>
<span id="cb17-127"><a href="#cb17-127"></a>          <span class="at">shape =</span> <span class="dv">17</span>, <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb17-128"><a href="#cb17-128"></a>  </span>
<span id="cb17-129"><a href="#cb17-129"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> snow_deaths_sf, <span class="at">shape =</span> <span class="dv">22</span>, <span class="at">fill =</span> <span class="st">"red"</span>, </span>
<span id="cb17-130"><a href="#cb17-130"></a>            <span class="at">colour =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb17-131"><a href="#cb17-131"></a>  </span>
<span id="cb17-132"><a href="#cb17-132"></a>  <span class="fu">geom_sf_text</span>(<span class="at">data =</span> snow_pumps_sf,<span class="fu">aes</span>(<span class="at">label =</span> label),</span>
<span id="cb17-133"><a href="#cb17-133"></a>               <span class="at">nudge_x =</span> <span class="fl">0.5</span>, <span class="at">nudge_y =</span> <span class="sc">-</span><span class="fl">0.75</span>) <span class="sc">+</span> </span>
<span id="cb17-134"><a href="#cb17-134"></a>  </span>
<span id="cb17-135"><a href="#cb17-135"></a></span>
<span id="cb17-136"><a href="#cb17-136"></a>  </span>
<span id="cb17-137"><a href="#cb17-137"></a>  <span class="co"># stat_density_2d_filled(data = Snow.deaths2, aes(x = x, y = y), bins = 8, contour_var = "ndensity") +</span></span>
<span id="cb17-138"><a href="#cb17-138"></a>  </span>
<span id="cb17-139"><a href="#cb17-139"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Greens"</span>, <span class="at">direction =</span> <span class="dv">1</span>,<span class="at">type =</span> <span class="st">"qual"</span>) <span class="sc">+</span> </span>
<span id="cb17-140"><a href="#cb17-140"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb17-141"><a href="#cb17-141"></a></span>
<span id="cb17-142"><a href="#cb17-142"></a></span>
<span id="cb17-143"><a href="#cb17-143"></a><span class="in">```</span></span>
<span id="cb17-144"><a href="#cb17-144"></a></span>
<span id="cb17-145"><a href="#cb17-145"></a><span class="fu">## Review of Tidy Data</span></span>
<span id="cb17-146"><a href="#cb17-146"></a></span>
<span id="cb17-147"><a href="#cb17-147"></a>"Tidy Data" is an important way of thinking about what data typically</span>
<span id="cb17-148"><a href="#cb17-148"></a>look like in R. Let's fetch a figure from the web to show the</span>
<span id="cb17-149"><a href="#cb17-149"></a>(preferred) structure of data in R. (The syntax to bring in a web-figure</span>
<span id="cb17-150"><a href="#cb17-150"></a>is <span class="in">`![caption](url)`</span>)</span>
<span id="cb17-151"><a href="#cb17-151"></a></span>
<span id="cb17-152"><a href="#cb17-152"></a>![Tidy</span>
<span id="cb17-153"><a href="#cb17-153"></a>Data](https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/tidydata_1.jpg)</span>
<span id="cb17-154"><a href="#cb17-154"></a>The three features described in the figure above define the nature of</span>
<span id="cb17-155"><a href="#cb17-155"></a>tidy data:</span>
<span id="cb17-156"><a href="#cb17-156"></a></span>
<span id="cb17-157"><a href="#cb17-157"></a><span class="ss">-   </span>*Variables in Columns*\</span>
<span id="cb17-158"><a href="#cb17-158"></a><span class="ss">-   </span>*Observations in Rows* and\</span>
<span id="cb17-159"><a href="#cb17-159"></a><span class="ss">-   </span>*Measurements in Cells*.</span>
<span id="cb17-160"><a href="#cb17-160"></a></span>
<span id="cb17-161"><a href="#cb17-161"></a>Data are imagined to be resulting from an **experiment**. Each</span>
<span id="cb17-162"><a href="#cb17-162"></a>*variable* represents a parameter/aspect in the experiment. Each *row*</span>
<span id="cb17-163"><a href="#cb17-163"></a>represents an additional datum of measurement. A *cell* is a single</span>
<span id="cb17-164"><a href="#cb17-164"></a>measurement on a single parameter(column) in a single observation(row).</span>
<span id="cb17-165"><a href="#cb17-165"></a></span>
<span id="cb17-166"><a href="#cb17-166"></a><span class="fu">## Kinds of Variables</span></span>
<span id="cb17-167"><a href="#cb17-167"></a></span>
<span id="cb17-168"><a href="#cb17-168"></a>**Kinds of Variable** are defined by the kind of *questions* they answer</span>
<span id="cb17-169"><a href="#cb17-169"></a>to:</span>
<span id="cb17-170"><a href="#cb17-170"></a></span>
<span id="cb17-171"><a href="#cb17-171"></a><span class="ss">1.  </span>What/Who/Where? -<span class="sc">\&gt;</span> Some kind of Name. **Categorical** variable</span>
<span id="cb17-172"><a href="#cb17-172"></a><span class="ss">2.  </span>What Kind? How? -<span class="sc">\&gt;</span> Some kind of "Type". **Factor** variable</span>
<span id="cb17-173"><a href="#cb17-173"></a><span class="ss">3.  </span>How Many? How large? -<span class="sc">\&gt;</span> Some kind of Quantity. **Numerical**</span>
<span id="cb17-174"><a href="#cb17-174"></a>    variable. Most Figures in R are computed with variables, and</span>
<span id="cb17-175"><a href="#cb17-175"></a>    therefore, with **columns**.</span>
<span id="cb17-176"><a href="#cb17-176"></a></span>
<span id="cb17-177"><a href="#cb17-177"></a><span class="fu">## Interrogations and Graphs</span></span>
<span id="cb17-178"><a href="#cb17-178"></a></span>
<span id="cb17-179"><a href="#cb17-179"></a>Creating graphs from data is an act of asking questions and viewing</span>
<span id="cb17-180"><a href="#cb17-180"></a>answers in a geometric way. Let us write some simple English</span>
<span id="cb17-181"><a href="#cb17-181"></a>descriptions of measures and visuals and see what commands they use in</span>
<span id="cb17-182"><a href="#cb17-182"></a>R.</span>
<span id="cb17-183"><a href="#cb17-183"></a></span>
<span id="cb17-184"><a href="#cb17-184"></a><span class="fu">### Components of the layered grammar of graphics</span></span>
<span id="cb17-185"><a href="#cb17-185"></a></span>
<span id="cb17-186"><a href="#cb17-186"></a>**Layers** are used to create the objects on a plot. They are defined by</span>
<span id="cb17-187"><a href="#cb17-187"></a>five basic parts:</span>
<span id="cb17-188"><a href="#cb17-188"></a></span>
<span id="cb17-189"><a href="#cb17-189"></a><span class="ss">1.  </span>Data (What dataset/spreadsheet am I using?)</span>
<span id="cb17-190"><a href="#cb17-190"></a><span class="ss">2.  </span>Mapping (What does each column do in my graph?)</span>
<span id="cb17-191"><a href="#cb17-191"></a><span class="ss">3.  </span>Statistical transformation (stat) (Do I have count something first?)</span>
<span id="cb17-192"><a href="#cb17-192"></a><span class="ss">4.  </span>Geometric object (geom) (What shape, colour, size...do I want?)</span>
<span id="cb17-193"><a href="#cb17-193"></a><span class="ss">5.  </span>Position adjustment (position) (Where do I want it on the graph?)</span>
<span id="cb17-194"><a href="#cb17-194"></a></span>
<span id="cb17-195"><a href="#cb17-195"></a><span class="fu">## Data {.tabset .tabset-pills}</span></span>
<span id="cb17-196"><a href="#cb17-196"></a></span>
<span id="cb17-197"><a href="#cb17-197"></a>We will use "real world" data. Let's use the <span class="in">`penguins`</span> dataset in the</span>
<span id="cb17-198"><a href="#cb17-198"></a><span class="in">`palmerpenguins`</span> package. Run <span class="in">`?penguins`</span> in the console to get more</span>
<span id="cb17-199"><a href="#cb17-199"></a>information about this dataset.</span>
<span id="cb17-200"><a href="#cb17-200"></a></span>
<span id="cb17-201"><a href="#cb17-201"></a><span class="fu">### Head</span></span>
<span id="cb17-202"><a href="#cb17-202"></a></span>
<span id="cb17-203"><a href="#cb17-203"></a><span class="in">```{r penguins-1}</span></span>
<span id="cb17-204"><a href="#cb17-204"></a><span class="fu">head</span>(penguins)</span>
<span id="cb17-205"><a href="#cb17-205"></a><span class="in">```</span></span>
<span id="cb17-206"><a href="#cb17-206"></a></span>
<span id="cb17-207"><a href="#cb17-207"></a><span class="fu">### Tail</span></span>
<span id="cb17-208"><a href="#cb17-208"></a></span>
<span id="cb17-209"><a href="#cb17-209"></a><span class="in">```{r penguins-2}</span></span>
<span id="cb17-210"><a href="#cb17-210"></a><span class="fu">tail</span>(penguins)</span>
<span id="cb17-211"><a href="#cb17-211"></a><span class="in">```</span></span>
<span id="cb17-212"><a href="#cb17-212"></a></span>
<span id="cb17-213"><a href="#cb17-213"></a><span class="fu">### Dim</span></span>
<span id="cb17-214"><a href="#cb17-214"></a></span>
<span id="cb17-215"><a href="#cb17-215"></a><span class="in">```{r penguins-3}</span></span>
<span id="cb17-216"><a href="#cb17-216"></a><span class="fu">dim</span>(penguins)</span>
<span id="cb17-217"><a href="#cb17-217"></a><span class="in">```</span></span>
<span id="cb17-218"><a href="#cb17-218"></a></span>
<span id="cb17-219"><a href="#cb17-219"></a>So we know what our data looks like. We pass this data to <span class="in">`ggplot`</span> use</span>
<span id="cb17-220"><a href="#cb17-220"></a>to plot as follows: in R this creates an empty graph sheet!! Because we</span>
<span id="cb17-221"><a href="#cb17-221"></a>have not (yet) declared the geometric shapes we want to use to plot our</span>
<span id="cb17-222"><a href="#cb17-222"></a>information.</span>
<span id="cb17-223"><a href="#cb17-223"></a></span>
<span id="cb17-224"><a href="#cb17-224"></a><span class="in">```{r data-1}</span></span>
<span id="cb17-225"><a href="#cb17-225"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="co"># Creates an empty graphsheet, ready for plotting!!</span></span>
<span id="cb17-226"><a href="#cb17-226"></a></span>
<span id="cb17-227"><a href="#cb17-227"></a><span class="in">```</span></span>
<span id="cb17-228"><a href="#cb17-228"></a></span>
<span id="cb17-229"><a href="#cb17-229"></a><span class="fu">## Mapping</span></span>
<span id="cb17-230"><a href="#cb17-230"></a></span>
<span id="cb17-231"><a href="#cb17-231"></a>Now that we have told R what data to use, we need to state what</span>
<span id="cb17-232"><a href="#cb17-232"></a>variables to plot and how.</span>
<span id="cb17-233"><a href="#cb17-233"></a></span>
<span id="cb17-234"><a href="#cb17-234"></a>**Aesthetic Mapping** defines how the variables are applied to the plot,</span>
<span id="cb17-235"><a href="#cb17-235"></a>i.e. we take a variable from the data and "metaphorize" it into a</span>
<span id="cb17-236"><a href="#cb17-236"></a>geometric feature. We can map variables metaphorically to a variety of</span>
<span id="cb17-237"><a href="#cb17-237"></a>geometric things: coordinate, length, height, size, shape, colour,</span>
<span id="cb17-238"><a href="#cb17-238"></a>alpha(how dark?)....</span>
<span id="cb17-239"><a href="#cb17-239"></a></span>
<span id="cb17-240"><a href="#cb17-240"></a>The syntax uses: <span class="in">`aes(some_geometric_thing = some_variable)`</span></span>
<span id="cb17-241"><a href="#cb17-241"></a></span>
<span id="cb17-242"><a href="#cb17-242"></a>Remember **variable** = **column**.</span>
<span id="cb17-243"><a href="#cb17-243"></a></span>
<span id="cb17-244"><a href="#cb17-244"></a>So if we were graphing information from <span class="in">`penguins`</span>, we might map a</span>
<span id="cb17-245"><a href="#cb17-245"></a>penguin's <span class="in">`flipper_length_mm`</span> **column** to the $x$ position, and the</span>
<span id="cb17-246"><a href="#cb17-246"></a><span class="in">`body_mass_g`</span> **column** to the $y$ position.</span>
<span id="cb17-247"><a href="#cb17-247"></a></span>
<span id="cb17-248"><a href="#cb17-248"></a><span class="fu">### Mapping Example-1 {.tabset .tabset-pills}</span></span>
<span id="cb17-249"><a href="#cb17-249"></a></span>
<span id="cb17-250"><a href="#cb17-250"></a>We can try another example of aesthetic mapping with the same dataset:</span>
<span id="cb17-251"><a href="#cb17-251"></a></span>
<span id="cb17-252"><a href="#cb17-252"></a><span class="fu">#### Plot-1a</span></span>
<span id="cb17-253"><a href="#cb17-253"></a></span>
<span id="cb17-254"><a href="#cb17-254"></a><span class="in">```{r mapping-1a}</span></span>
<span id="cb17-255"><a href="#cb17-255"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins)</span>
<span id="cb17-256"><a href="#cb17-256"></a><span class="in">```</span></span>
<span id="cb17-257"><a href="#cb17-257"></a></span>
<span id="cb17-258"><a href="#cb17-258"></a><span class="fu">#### Plot-1b</span></span>
<span id="cb17-259"><a href="#cb17-259"></a></span>
<span id="cb17-260"><a href="#cb17-260"></a><span class="in">```{r mapping-1b,include=FALSE}</span></span>
<span id="cb17-261"><a href="#cb17-261"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span> </span>
<span id="cb17-262"><a href="#cb17-262"></a></span>
<span id="cb17-263"><a href="#cb17-263"></a><span class="co"># Plot geom = histogram. So we need a quantity on the x</span></span>
<span id="cb17-264"><a href="#cb17-264"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb17-265"><a href="#cb17-265"></a>    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g))</span>
<span id="cb17-266"><a href="#cb17-266"></a><span class="in">```</span></span>
<span id="cb17-267"><a href="#cb17-267"></a></span>
<span id="cb17-268"><a href="#cb17-268"></a><span class="fu">#### Plot-1c</span></span>
<span id="cb17-269"><a href="#cb17-269"></a></span>
<span id="cb17-270"><a href="#cb17-270"></a><span class="in">```{r mapping-1c,include = FALSE}</span></span>
<span id="cb17-271"><a href="#cb17-271"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span></span>
<span id="cb17-272"><a href="#cb17-272"></a></span>
<span id="cb17-273"><a href="#cb17-273"></a><span class="co"># Plot geom = histogram. So we need a quantity on the x</span></span>
<span id="cb17-274"><a href="#cb17-274"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb17-275"><a href="#cb17-275"></a>    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g,</span>
<span id="cb17-276"><a href="#cb17-276"></a>        <span class="at">fill =</span> island)    <span class="co"># color aesthetic = another variable</span></span>
<span id="cb17-277"><a href="#cb17-277"></a>    )</span>
<span id="cb17-278"><a href="#cb17-278"></a></span>
<span id="cb17-279"><a href="#cb17-279"></a><span class="in">```</span></span>
<span id="cb17-280"><a href="#cb17-280"></a></span>
<span id="cb17-281"><a href="#cb17-281"></a><span class="fu">### Mapping Example-2 {.tabset .tabset-pills}</span></span>
<span id="cb17-282"><a href="#cb17-282"></a></span>
<span id="cb17-283"><a href="#cb17-283"></a>We can try another example of aesthetic mapping with the same dataset:</span>
<span id="cb17-284"><a href="#cb17-284"></a></span>
<span id="cb17-285"><a href="#cb17-285"></a><span class="fu">#### Plot-2a</span></span>
<span id="cb17-286"><a href="#cb17-286"></a></span>
<span id="cb17-287"><a href="#cb17-287"></a><span class="in">```{r mapping-2a}</span></span>
<span id="cb17-288"><a href="#cb17-288"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins)</span>
<span id="cb17-289"><a href="#cb17-289"></a><span class="in">```</span></span>
<span id="cb17-290"><a href="#cb17-290"></a></span>
<span id="cb17-291"><a href="#cb17-291"></a><span class="fu">#### Plot-2b</span></span>
<span id="cb17-292"><a href="#cb17-292"></a></span>
<span id="cb17-293"><a href="#cb17-293"></a><span class="in">```{r mapping-2b,include=FALSE}</span></span>
<span id="cb17-294"><a href="#cb17-294"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span> </span>
<span id="cb17-295"><a href="#cb17-295"></a></span>
<span id="cb17-296"><a href="#cb17-296"></a><span class="co"># Plot geom = histogram. So we need a quantity on the x</span></span>
<span id="cb17-297"><a href="#cb17-297"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb17-298"><a href="#cb17-298"></a>    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="co">#&lt;&lt;</span></span>
<span id="cb17-299"><a href="#cb17-299"></a><span class="in">```</span></span>
<span id="cb17-300"><a href="#cb17-300"></a></span>
<span id="cb17-301"><a href="#cb17-301"></a><span class="fu">#### Plot-2c</span></span>
<span id="cb17-302"><a href="#cb17-302"></a></span>
<span id="cb17-303"><a href="#cb17-303"></a><span class="in">```{r mapping-2c,include = FALSE}</span></span>
<span id="cb17-304"><a href="#cb17-304"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span></span>
<span id="cb17-305"><a href="#cb17-305"></a></span>
<span id="cb17-306"><a href="#cb17-306"></a><span class="co"># Plot geom = histogram. So we need a quantity on the x</span></span>
<span id="cb17-307"><a href="#cb17-307"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb17-308"><a href="#cb17-308"></a>    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g,</span>
<span id="cb17-309"><a href="#cb17-309"></a>        <span class="at">fill =</span> island)   <span class="co">#&lt;&lt; # color aesthetic = another variable</span></span>
<span id="cb17-310"><a href="#cb17-310"></a>    )</span>
<span id="cb17-311"><a href="#cb17-311"></a></span>
<span id="cb17-312"><a href="#cb17-312"></a><span class="in">```</span></span>
<span id="cb17-313"><a href="#cb17-313"></a></span>
<span id="cb17-314"><a href="#cb17-314"></a><span class="fu">### Mapping Example-3 {.tabset .tabset-pills}</span></span>
<span id="cb17-315"><a href="#cb17-315"></a></span>
<span id="cb17-316"><a href="#cb17-316"></a>We can try another example of aesthetic mapping with the same dataset:</span>
<span id="cb17-317"><a href="#cb17-317"></a></span>
<span id="cb17-318"><a href="#cb17-318"></a><span class="fu">#### Plot-3a</span></span>
<span id="cb17-319"><a href="#cb17-319"></a></span>
<span id="cb17-320"><a href="#cb17-320"></a><span class="in">```{r mapping-3a}</span></span>
<span id="cb17-321"><a href="#cb17-321"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins)</span>
<span id="cb17-322"><a href="#cb17-322"></a><span class="in">```</span></span>
<span id="cb17-323"><a href="#cb17-323"></a></span>
<span id="cb17-324"><a href="#cb17-324"></a><span class="fu">#### Plot-3b</span></span>
<span id="cb17-325"><a href="#cb17-325"></a></span>
<span id="cb17-326"><a href="#cb17-326"></a><span class="in">```{r mapping-3b,include=FALSE}</span></span>
<span id="cb17-327"><a href="#cb17-327"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span> </span>
<span id="cb17-328"><a href="#cb17-328"></a></span>
<span id="cb17-329"><a href="#cb17-329"></a><span class="co"># Plot geom = histogram. So we need a quantity on the x</span></span>
<span id="cb17-330"><a href="#cb17-330"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb17-331"><a href="#cb17-331"></a>    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g))</span>
<span id="cb17-332"><a href="#cb17-332"></a><span class="in">```</span></span>
<span id="cb17-333"><a href="#cb17-333"></a></span>
<span id="cb17-334"><a href="#cb17-334"></a><span class="fu">#### Plot-3c</span></span>
<span id="cb17-335"><a href="#cb17-335"></a></span>
<span id="cb17-336"><a href="#cb17-336"></a><span class="in">```{r mapping-3c,include = FALSE}</span></span>
<span id="cb17-337"><a href="#cb17-337"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span></span>
<span id="cb17-338"><a href="#cb17-338"></a></span>
<span id="cb17-339"><a href="#cb17-339"></a><span class="co"># Plot geom = histogram. So we need a quantity on the x</span></span>
<span id="cb17-340"><a href="#cb17-340"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb17-341"><a href="#cb17-341"></a>    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g,</span>
<span id="cb17-342"><a href="#cb17-342"></a>        <span class="at">fill =</span> island)    <span class="co"># color aesthetic = another variable</span></span>
<span id="cb17-343"><a href="#cb17-343"></a>    )</span>
<span id="cb17-344"><a href="#cb17-344"></a></span>
<span id="cb17-345"><a href="#cb17-345"></a><span class="in">```</span></span>
<span id="cb17-346"><a href="#cb17-346"></a></span>
<span id="cb17-347"><a href="#cb17-347"></a><span class="fu">### Mapping Example-4 {.tabset .tabset-pills}</span></span>
<span id="cb17-348"><a href="#cb17-348"></a></span>
<span id="cb17-349"><a href="#cb17-349"></a>We can try another example of aesthetic mapping with the same dataset:</span>
<span id="cb17-350"><a href="#cb17-350"></a></span>
<span id="cb17-351"><a href="#cb17-351"></a><span class="fu">#### Plot-4a</span></span>
<span id="cb17-352"><a href="#cb17-352"></a></span>
<span id="cb17-353"><a href="#cb17-353"></a><span class="in">```{r mapping-4a}</span></span>
<span id="cb17-354"><a href="#cb17-354"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins)</span>
<span id="cb17-355"><a href="#cb17-355"></a><span class="in">```</span></span>
<span id="cb17-356"><a href="#cb17-356"></a></span>
<span id="cb17-357"><a href="#cb17-357"></a><span class="fu">#### Plot-4b</span></span>
<span id="cb17-358"><a href="#cb17-358"></a></span>
<span id="cb17-359"><a href="#cb17-359"></a><span class="in">```{r mapping-4b,include=FALSE}</span></span>
<span id="cb17-360"><a href="#cb17-360"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span> </span>
<span id="cb17-361"><a href="#cb17-361"></a></span>
<span id="cb17-362"><a href="#cb17-362"></a><span class="co"># Plot geom = histogram. So we need a quantity on the x</span></span>
<span id="cb17-363"><a href="#cb17-363"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb17-364"><a href="#cb17-364"></a>    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g))</span>
<span id="cb17-365"><a href="#cb17-365"></a><span class="in">```</span></span>
<span id="cb17-366"><a href="#cb17-366"></a></span>
<span id="cb17-367"><a href="#cb17-367"></a><span class="fu">#### Plot-4c</span></span>
<span id="cb17-368"><a href="#cb17-368"></a></span>
<span id="cb17-369"><a href="#cb17-369"></a><span class="in">```{r mapping-4c,include = FALSE}</span></span>
<span id="cb17-370"><a href="#cb17-370"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span></span>
<span id="cb17-371"><a href="#cb17-371"></a></span>
<span id="cb17-372"><a href="#cb17-372"></a><span class="co"># Plot geom = histogram. So we need a quantity on the x</span></span>
<span id="cb17-373"><a href="#cb17-373"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb17-374"><a href="#cb17-374"></a>    <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g,</span>
<span id="cb17-375"><a href="#cb17-375"></a>        <span class="at">fill =</span> island)    <span class="co"># color aesthetic = another variable</span></span>
<span id="cb17-376"><a href="#cb17-376"></a>    )</span>
<span id="cb17-377"><a href="#cb17-377"></a></span>
<span id="cb17-378"><a href="#cb17-378"></a><span class="in">```</span></span>
<span id="cb17-379"><a href="#cb17-379"></a></span>
<span id="cb17-380"><a href="#cb17-380"></a><span class="fu">## Geometric objects {.tabset .tabset-pills}</span></span>
<span id="cb17-381"><a href="#cb17-381"></a></span>
<span id="cb17-382"><a href="#cb17-382"></a>**Geometric objects** (*geoms*) control the type of plot you create.</span>
<span id="cb17-383"><a href="#cb17-383"></a>Geoms are classified by their dimensionality:</span>
<span id="cb17-384"><a href="#cb17-384"></a></span>
<span id="cb17-385"><a href="#cb17-385"></a><span class="ss">-   </span>0 dimensions - point, text</span>
<span id="cb17-386"><a href="#cb17-386"></a><span class="ss">-   </span>1 dimension - path, line</span>
<span id="cb17-387"><a href="#cb17-387"></a><span class="ss">-   </span>2 dimensions - polygon, interval</span>
<span id="cb17-388"><a href="#cb17-388"></a></span>
<span id="cb17-389"><a href="#cb17-389"></a>Each geom can only display certain **aesthetics** or visual attributes</span>
<span id="cb17-390"><a href="#cb17-390"></a>of the geom. For example, a point geom has position, color, shape, and</span>
<span id="cb17-391"><a href="#cb17-391"></a>size aesthetics.</span>
<span id="cb17-392"><a href="#cb17-392"></a></span>
<span id="cb17-393"><a href="#cb17-393"></a>We can also stack up geoms on top of one another to add layers to the</span>
<span id="cb17-394"><a href="#cb17-394"></a>graph.</span>
<span id="cb17-395"><a href="#cb17-395"></a></span>
<span id="cb17-396"><a href="#cb17-396"></a><span class="fu">### Plot1</span></span>
<span id="cb17-397"><a href="#cb17-397"></a></span>
<span id="cb17-398"><a href="#cb17-398"></a><span class="in">```{r other_geoms-1}</span></span>
<span id="cb17-399"><a href="#cb17-399"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb17-400"><a href="#cb17-400"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb17-401"><a href="#cb17-401"></a><span class="in">```</span></span>
<span id="cb17-402"><a href="#cb17-402"></a></span>
<span id="cb17-403"><a href="#cb17-403"></a><span class="fu">### Plot2</span></span>
<span id="cb17-404"><a href="#cb17-404"></a></span>
<span id="cb17-405"><a href="#cb17-405"></a><span class="in">```{r other-geoms-2}</span></span>
<span id="cb17-406"><a href="#cb17-406"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb17-407"><a href="#cb17-407"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, </span>
<span id="cb17-408"><a href="#cb17-408"></a>                     <span class="at">y =</span> body_mass_g))</span>
<span id="cb17-409"><a href="#cb17-409"></a><span class="in">```</span></span>
<span id="cb17-410"><a href="#cb17-410"></a></span>
<span id="cb17-411"><a href="#cb17-411"></a><span class="fu">### Plot3</span></span>
<span id="cb17-412"><a href="#cb17-412"></a></span>
<span id="cb17-413"><a href="#cb17-413"></a><span class="in">```{r other-geoms-3}</span></span>
<span id="cb17-414"><a href="#cb17-414"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins) <span class="sc">+</span> </span>
<span id="cb17-415"><a href="#cb17-415"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, </span>
<span id="cb17-416"><a href="#cb17-416"></a>                     <span class="at">y =</span> body_mass_g,</span>
<span id="cb17-417"><a href="#cb17-417"></a>                 <span class="at">color =</span> island, </span>
<span id="cb17-418"><a href="#cb17-418"></a>                 <span class="at">shape =</span> species)) <span class="sc">+</span> </span>
<span id="cb17-419"><a href="#cb17-419"></a>  </span>
<span id="cb17-420"><a href="#cb17-420"></a>  <span class="fu">ggtitle</span>(<span class="st">"A point geom with position and color and shape aesthetics"</span>)</span>
<span id="cb17-421"><a href="#cb17-421"></a><span class="in">```</span></span>
<span id="cb17-422"><a href="#cb17-422"></a></span>
<span id="cb17-423"><a href="#cb17-423"></a><span class="in">```{r geom_bar-1}</span></span>
<span id="cb17-424"><a href="#cb17-424"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb17-425"><a href="#cb17-425"></a>       <span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span> <span class="co"># x position =&gt; ?</span></span>
<span id="cb17-426"><a href="#cb17-426"></a>  <span class="co"># No need to type "mapping"...</span></span>
<span id="cb17-427"><a href="#cb17-427"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span> <span class="co"># Where does the height come from?</span></span>
<span id="cb17-428"><a href="#cb17-428"></a>  <span class="fu">ggtitle</span>(<span class="st">"A bar geom with position and height aesthetics"</span>)</span>
<span id="cb17-429"><a href="#cb17-429"></a><span class="in">```</span></span>
<span id="cb17-430"><a href="#cb17-430"></a></span>
<span id="cb17-431"><a href="#cb17-431"></a><span class="in">```{r geom_bar-2}</span></span>
<span id="cb17-432"><a href="#cb17-432"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb17-433"><a href="#cb17-433"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb17-434"><a href="#cb17-434"></a>  <span class="fu">ggtitle</span>(<span class="st">"A bar geom with position and height aesthetics"</span>)</span>
<span id="cb17-435"><a href="#cb17-435"></a><span class="in">```</span></span>
<span id="cb17-436"><a href="#cb17-436"></a></span>
<span id="cb17-437"><a href="#cb17-437"></a><span class="ss">-   </span>Position determines the starting location (origin) of each bar</span>
<span id="cb17-438"><a href="#cb17-438"></a><span class="ss">-   </span>Height determines how tall to draw the bar. Here the height is based</span>
<span id="cb17-439"><a href="#cb17-439"></a>    on the number of observations in the dataset for each possible</span>
<span id="cb17-440"><a href="#cb17-440"></a>    number of cylinders.</span>
<span id="cb17-441"><a href="#cb17-441"></a></span>
<span id="cb17-442"><a href="#cb17-442"></a><span class="fu">## Position adjustment {.tabset .tabset-pills}</span></span>
<span id="cb17-443"><a href="#cb17-443"></a></span>
<span id="cb17-444"><a href="#cb17-444"></a>Sometimes with dense data we need to adjust the position of elements on</span>
<span id="cb17-445"><a href="#cb17-445"></a>the plot, otherwise data points might obscure one another. Bar plots</span>
<span id="cb17-446"><a href="#cb17-446"></a>frequently **stack** or **dodge** the bars to avoid overlap:</span>
<span id="cb17-447"><a href="#cb17-447"></a></span>
<span id="cb17-448"><a href="#cb17-448"></a><span class="in">```{r geom_bar_position_stack_and_dodge}</span></span>
<span id="cb17-449"><a href="#cb17-449"></a><span class="fu">count</span>(<span class="at">x =</span> penguins, species, island) <span class="sc">%&gt;%</span></span>
<span id="cb17-450"><a href="#cb17-450"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> n, <span class="at">fill =</span> island)) <span class="sc">+</span></span>
<span id="cb17-451"><a href="#cb17-451"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb17-452"><a href="#cb17-452"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"A stacked bar chart"</span>)</span>
<span id="cb17-453"><a href="#cb17-453"></a></span>
<span id="cb17-454"><a href="#cb17-454"></a><span class="fu">count</span>(<span class="at">x =</span> penguins, species, island) <span class="sc">%&gt;%</span></span>
<span id="cb17-455"><a href="#cb17-455"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> n, <span class="at">fill =</span> island)) <span class="sc">+</span></span>
<span id="cb17-456"><a href="#cb17-456"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb17-457"><a href="#cb17-457"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"A dodged bar chart"</span>)</span>
<span id="cb17-458"><a href="#cb17-458"></a><span class="in">```</span></span>
<span id="cb17-459"><a href="#cb17-459"></a></span>
<span id="cb17-462"><a href="#cb17-462"></a><span class="in">```{r}</span></span>
<span id="cb17-463"><a href="#cb17-463"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb17-464"><a href="#cb17-464"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> island)) <span class="sc">+</span></span>
<span id="cb17-465"><a href="#cb17-465"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb17-466"><a href="#cb17-466"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"A stacked bar chart"</span>)</span>
<span id="cb17-467"><a href="#cb17-467"></a></span>
<span id="cb17-468"><a href="#cb17-468"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb17-469"><a href="#cb17-469"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">fill =</span> island)) <span class="sc">+</span></span>
<span id="cb17-470"><a href="#cb17-470"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb17-471"><a href="#cb17-471"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"A dodged bar chart"</span>)</span>
<span id="cb17-472"><a href="#cb17-472"></a><span class="in">```</span></span>
<span id="cb17-473"><a href="#cb17-473"></a></span>
<span id="cb17-474"><a href="#cb17-474"></a>Sometimes scatterplots with few unique $x$ and $y$ values are</span>
<span id="cb17-475"><a href="#cb17-475"></a>**jittered** (random noise is added) to reduce overplotting.</span>
<span id="cb17-476"><a href="#cb17-476"></a></span>
<span id="cb17-477"><a href="#cb17-477"></a><span class="in">```{r position}</span></span>
<span id="cb17-478"><a href="#cb17-478"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb17-479"><a href="#cb17-479"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species, </span>
<span id="cb17-480"><a href="#cb17-480"></a>                     <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb17-481"><a href="#cb17-481"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb17-482"><a href="#cb17-482"></a>  <span class="fu">ggtitle</span>(<span class="st">"A point geom with obscured data points"</span>)</span>
<span id="cb17-483"><a href="#cb17-483"></a></span>
<span id="cb17-484"><a href="#cb17-484"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb17-485"><a href="#cb17-485"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species, </span>
<span id="cb17-486"><a href="#cb17-486"></a>                     <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb17-487"><a href="#cb17-487"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb17-488"><a href="#cb17-488"></a>  <span class="fu">ggtitle</span>(<span class="st">"A point geom with jittered data points"</span>)</span>
<span id="cb17-489"><a href="#cb17-489"></a><span class="in">```</span></span>
<span id="cb17-490"><a href="#cb17-490"></a></span>
<span id="cb17-491"><a href="#cb17-491"></a><span class="fu">## Statistical transformation {.tabset .tabset-pills}</span></span>
<span id="cb17-492"><a href="#cb17-492"></a></span>
<span id="cb17-493"><a href="#cb17-493"></a>A **statistical transformation** (*stat*) pre-transforms the data,</span>
<span id="cb17-494"><a href="#cb17-494"></a>before plotting. For instance, in a bar graph you might summarize the</span>
<span id="cb17-495"><a href="#cb17-495"></a>data by <span class="in">`count`</span>ing the total number of observations within a set of</span>
<span id="cb17-496"><a href="#cb17-496"></a>categories, and then plotting the count.</span>
<span id="cb17-497"><a href="#cb17-497"></a></span>
<span id="cb17-498"><a href="#cb17-498"></a><span class="fu">### Count</span></span>
<span id="cb17-499"><a href="#cb17-499"></a></span>
<span id="cb17-500"><a href="#cb17-500"></a><span class="in">```{r stat-transform-1}</span></span>
<span id="cb17-501"><a href="#cb17-501"></a><span class="fu">count</span>(<span class="at">x =</span> penguins, island)</span>
<span id="cb17-502"><a href="#cb17-502"></a><span class="in">```</span></span>
<span id="cb17-503"><a href="#cb17-503"></a></span>
<span id="cb17-504"><a href="#cb17-504"></a><span class="fu">### Count and Bar Graph</span></span>
<span id="cb17-505"><a href="#cb17-505"></a></span>
<span id="cb17-506"><a href="#cb17-506"></a><span class="in">```{r stat-transform-2}</span></span>
<span id="cb17-507"><a href="#cb17-507"></a>mydat <span class="ot">&lt;-</span> <span class="fu">count</span>(penguins,island)</span>
<span id="cb17-508"><a href="#cb17-508"></a></span>
<span id="cb17-509"><a href="#cb17-509"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mydat) <span class="sc">+</span></span>
<span id="cb17-510"><a href="#cb17-510"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> island, <span class="at">y =</span> n))</span>
<span id="cb17-511"><a href="#cb17-511"></a><span class="in">```</span></span>
<span id="cb17-512"><a href="#cb17-512"></a></span>
<span id="cb17-513"><a href="#cb17-513"></a><span class="fu">### Tidy Count and Bar Graph</span></span>
<span id="cb17-514"><a href="#cb17-514"></a></span>
<span id="cb17-515"><a href="#cb17-515"></a><span class="in">```{r stat-transform-3,echo=FALSE}</span></span>
<span id="cb17-516"><a href="#cb17-516"></a>penguins <span class="sc">%&gt;%</span>           <span class="co"># This IS a pipe Operator!!</span></span>
<span id="cb17-517"><a href="#cb17-517"></a>  </span>
<span id="cb17-518"><a href="#cb17-518"></a>  <span class="fu">count</span>(., island) <span class="sc">%&gt;%</span> <span class="co"># "." represents what is passed from the preceding command</span></span>
<span id="cb17-519"><a href="#cb17-519"></a>  </span>
<span id="cb17-520"><a href="#cb17-520"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span>    </span>
<span id="cb17-521"><a href="#cb17-521"></a>  </span>
<span id="cb17-522"><a href="#cb17-522"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> island, <span class="at">y =</span> n))</span>
<span id="cb17-523"><a href="#cb17-523"></a></span>
<span id="cb17-524"><a href="#cb17-524"></a><span class="in">```</span></span>
<span id="cb17-525"><a href="#cb17-525"></a></span>
<span id="cb17-526"><a href="#cb17-526"></a><span class="fu">### Count inside the Plot</span></span>
<span id="cb17-527"><a href="#cb17-527"></a></span>
<span id="cb17-528"><a href="#cb17-528"></a><span class="in">```{r stat-transform-4}</span></span>
<span id="cb17-529"><a href="#cb17-529"></a>penguins <span class="sc">%&gt;%</span>           <span class="co"># Our pipe Operator</span></span>
<span id="cb17-530"><a href="#cb17-530"></a>  </span>
<span id="cb17-531"><a href="#cb17-531"></a>  <span class="fu">ggplot</span>(.) <span class="sc">+</span>          <span class="co"># "." becomes the penguins dataset</span></span>
<span id="cb17-532"><a href="#cb17-532"></a>  </span>
<span id="cb17-533"><a href="#cb17-533"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> island)) <span class="co"># Note: y = count, and is computed internally!!</span></span>
<span id="cb17-534"><a href="#cb17-534"></a></span>
<span id="cb17-535"><a href="#cb17-535"></a><span class="in">```</span></span>
<span id="cb17-536"><a href="#cb17-536"></a></span>
<span id="cb17-537"><a href="#cb17-537"></a>Sometimes you don't need to make a statistical transformation. For</span>
<span id="cb17-538"><a href="#cb17-538"></a>example, in a scatterplot you use the raw values for the $x$ and $y$</span>
<span id="cb17-539"><a href="#cb17-539"></a>variables to map onto the graph. In these situations, the statistical</span>
<span id="cb17-540"><a href="#cb17-540"></a>transformation is an *identity* transformation - the stat simply passes</span>
<span id="cb17-541"><a href="#cb17-541"></a>in the original dataset and exports the exact same dataset.</span>
<span id="cb17-542"><a href="#cb17-542"></a></span>
<span id="cb17-543"><a href="#cb17-543"></a><span class="fu">## Scale {.tabset .tabset-pills}</span></span>
<span id="cb17-544"><a href="#cb17-544"></a></span>
<span id="cb17-545"><a href="#cb17-545"></a>A **scale** controls how data is mapped to aesthetic attributes, so we</span>
<span id="cb17-546"><a href="#cb17-546"></a>need one scale for every aesthetic property employed in a layer. For</span>
<span id="cb17-547"><a href="#cb17-547"></a>example, this graph defines a scale for color:</span>
<span id="cb17-548"><a href="#cb17-548"></a></span>
<span id="cb17-549"><a href="#cb17-549"></a><span class="in">```{r scale-color}</span></span>
<span id="cb17-550"><a href="#cb17-550"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb17-551"><a href="#cb17-551"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bill_depth_mm, </span>
<span id="cb17-552"><a href="#cb17-552"></a>                     <span class="at">y =</span> bill_length_mm, </span>
<span id="cb17-553"><a href="#cb17-553"></a>                     <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb17-554"><a href="#cb17-554"></a>  <span class="fu">geom_point</span>() </span>
<span id="cb17-555"><a href="#cb17-555"></a></span>
<span id="cb17-556"><a href="#cb17-556"></a><span class="in">```</span></span>
<span id="cb17-557"><a href="#cb17-557"></a></span>
<span id="cb17-558"><a href="#cb17-558"></a>The scale can be changed to use a different color palette:</span>
<span id="cb17-559"><a href="#cb17-559"></a></span>
<span id="cb17-560"><a href="#cb17-560"></a><span class="in">```{r scale-color-palette}</span></span>
<span id="cb17-561"><a href="#cb17-561"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb17-562"><a href="#cb17-562"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, </span>
<span id="cb17-563"><a href="#cb17-563"></a>                     <span class="at">y =</span> body_mass_g, </span>
<span id="cb17-564"><a href="#cb17-564"></a>                     <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb17-565"><a href="#cb17-565"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb17-566"><a href="#cb17-566"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>,<span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb17-567"><a href="#cb17-567"></a><span class="in">```</span></span>
<span id="cb17-568"><a href="#cb17-568"></a></span>
<span id="cb17-569"><a href="#cb17-569"></a>Now we are using a different palette, but the scale is still consistent:</span>
<span id="cb17-570"><a href="#cb17-570"></a>all Adelie penguins utilize the same color, whereas Chinstrap use a new</span>
<span id="cb17-571"><a href="#cb17-571"></a>color **but each Adelie still uses the same, consistent color**.</span>
<span id="cb17-572"><a href="#cb17-572"></a></span>
<span id="cb17-573"><a href="#cb17-573"></a><span class="fu">## Coordinate system {.tabset .tabset-pills}</span></span>
<span id="cb17-574"><a href="#cb17-574"></a></span>
<span id="cb17-575"><a href="#cb17-575"></a>A **coordinate system** (*coord*) maps the position of objects onto the</span>
<span id="cb17-576"><a href="#cb17-576"></a>plane of the plot, and controls how the axes and grid lines are drawn.</span>
<span id="cb17-577"><a href="#cb17-577"></a>Plots typically use two coordinates ($x, y$), but could use any number</span>
<span id="cb17-578"><a href="#cb17-578"></a>of coordinates. Most plots are drawn using the [**Cartesian coordinate</span>
<span id="cb17-579"><a href="#cb17-579"></a>system**](https://en.wikipedia.org/wiki/Cartesian_coordinate_system):</span>
<span id="cb17-580"><a href="#cb17-580"></a></span>
<span id="cb17-581"><a href="#cb17-581"></a><span class="in">```{r coord-cart}</span></span>
<span id="cb17-582"><a href="#cb17-582"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>)</span>
<span id="cb17-583"><a href="#cb17-583"></a>y1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb17-584"><a href="#cb17-584"></a>p <span class="ot">&lt;-</span> <span class="fu">qplot</span>(<span class="at">x =</span> x1, <span class="at">y =</span> y1, <span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">xlab =</span> <span class="cn">NULL</span>, <span class="at">ylab =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb17-585"><a href="#cb17-585"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb17-586"><a href="#cb17-586"></a>p <span class="sc">+</span></span>
<span id="cb17-587"><a href="#cb17-587"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"Cartesian coordinate system"</span>)</span>
<span id="cb17-588"><a href="#cb17-588"></a></span>
<span id="cb17-589"><a href="#cb17-589"></a></span>
<span id="cb17-590"><a href="#cb17-590"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(flipper_length_mm, body_mass_g)) <span class="sc">+</span></span>
<span id="cb17-591"><a href="#cb17-591"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb17-592"><a href="#cb17-592"></a>  <span class="fu">coord_polar</span>()</span>
<span id="cb17-593"><a href="#cb17-593"></a><span class="in">```</span></span>
<span id="cb17-594"><a href="#cb17-594"></a></span>
<span id="cb17-595"><a href="#cb17-595"></a>This system requires a fixed and equal spacing between values on the</span>
<span id="cb17-596"><a href="#cb17-596"></a>axes. That is, the graph draws the same distance between 1 and 2 as it</span>
<span id="cb17-597"><a href="#cb17-597"></a>does between 5 and 6. The graph could be drawn using a [**semi-log</span>
<span id="cb17-598"><a href="#cb17-598"></a>coordinate system**](https://en.wikipedia.org/wiki/Semi-log_plot) which</span>
<span id="cb17-599"><a href="#cb17-599"></a>logarithmically compresses the distance on an axis:</span>
<span id="cb17-600"><a href="#cb17-600"></a></span>
<span id="cb17-601"><a href="#cb17-601"></a><span class="in">```{r coord_semi_log}</span></span>
<span id="cb17-602"><a href="#cb17-602"></a>p <span class="sc">+</span></span>
<span id="cb17-603"><a href="#cb17-603"></a>  <span class="fu">coord_trans</span>(<span class="at">y =</span> <span class="st">"log10"</span>) <span class="sc">+</span></span>
<span id="cb17-604"><a href="#cb17-604"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"Semi-log coordinate system"</span>)</span>
<span id="cb17-605"><a href="#cb17-605"></a><span class="in">```</span></span>
<span id="cb17-606"><a href="#cb17-606"></a></span>
<span id="cb17-607"><a href="#cb17-607"></a>Or could even be drawn using [**polar</span>
<span id="cb17-608"><a href="#cb17-608"></a>coordinates**](https://en.wikipedia.org/wiki/Polar_coordinate_system):</span>
<span id="cb17-609"><a href="#cb17-609"></a></span>
<span id="cb17-610"><a href="#cb17-610"></a><span class="in">```{r coord_polar}</span></span>
<span id="cb17-611"><a href="#cb17-611"></a>p <span class="sc">+</span></span>
<span id="cb17-612"><a href="#cb17-612"></a>  <span class="fu">coord_polar</span>() <span class="sc">+</span></span>
<span id="cb17-613"><a href="#cb17-613"></a>  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">"Polar coordinate system"</span>)</span>
<span id="cb17-614"><a href="#cb17-614"></a><span class="in">```</span></span>
<span id="cb17-615"><a href="#cb17-615"></a></span>
<span id="cb17-616"><a href="#cb17-616"></a><span class="fu">## Faceting {.tabset .tabset-pills}</span></span>
<span id="cb17-617"><a href="#cb17-617"></a></span>
<span id="cb17-618"><a href="#cb17-618"></a>**Faceting** can be used to split the data up into subsets of the entire</span>
<span id="cb17-619"><a href="#cb17-619"></a>dataset. This is a powerful tool when investigating whether patterns are</span>
<span id="cb17-620"><a href="#cb17-620"></a>the same or different across conditions, and allows the subsets to be</span>
<span id="cb17-621"><a href="#cb17-621"></a>visualized on the same plot (known as **conditioned** or **trellis**</span>
<span id="cb17-622"><a href="#cb17-622"></a>plots). The faceting specification describes which variables should be</span>
<span id="cb17-623"><a href="#cb17-623"></a>used to split up the data, and how they should be arranged.</span>
<span id="cb17-624"><a href="#cb17-624"></a></span>
<span id="cb17-625"><a href="#cb17-625"></a><span class="in">```{r facet-1}</span></span>
<span id="cb17-626"><a href="#cb17-626"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb17-627"><a href="#cb17-627"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, </span>
<span id="cb17-628"><a href="#cb17-628"></a>                     <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb17-629"><a href="#cb17-629"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb17-630"><a href="#cb17-630"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> island)</span>
<span id="cb17-631"><a href="#cb17-631"></a><span class="in">```</span></span>
<span id="cb17-632"><a href="#cb17-632"></a></span>
<span id="cb17-633"><a href="#cb17-633"></a><span class="in">```{r facet-2}</span></span>
<span id="cb17-634"><a href="#cb17-634"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, <span class="at">y =</span> body_mass_g, <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb17-635"><a href="#cb17-635"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb17-636"><a href="#cb17-636"></a>  <span class="fu">facet_grid</span>(species <span class="sc">~</span> island, <span class="at">scales =</span> <span class="st">"free_y"</span>)</span>
<span id="cb17-637"><a href="#cb17-637"></a></span>
<span id="cb17-638"><a href="#cb17-638"></a><span class="co"># Ria's explanation: This code did not work becasue....</span></span>
<span id="cb17-639"><a href="#cb17-639"></a><span class="in">```</span></span>
<span id="cb17-640"><a href="#cb17-640"></a></span>
<span id="cb17-641"><a href="#cb17-641"></a><span class="fu">## Defaults</span></span>
<span id="cb17-642"><a href="#cb17-642"></a></span>
<span id="cb17-643"><a href="#cb17-643"></a>Rather than explicitly declaring each component of a layered graphic</span>
<span id="cb17-644"><a href="#cb17-644"></a>(which will use more code and introduces opportunities for errors), we</span>
<span id="cb17-645"><a href="#cb17-645"></a>can establish intelligent defaults for specific geoms and scales. For</span>
<span id="cb17-646"><a href="#cb17-646"></a>instance, whenever we want to use a bar geom, we can default to using a</span>
<span id="cb17-647"><a href="#cb17-647"></a>stat that counts the number of observations in each group of our</span>
<span id="cb17-648"><a href="#cb17-648"></a>variable in the $x$ position.</span>
<span id="cb17-649"><a href="#cb17-649"></a></span>
<span id="cb17-650"><a href="#cb17-650"></a>Consider the following scenario: you wish to generate a scatterplot</span>
<span id="cb17-651"><a href="#cb17-651"></a>visualizing the relationship between penguins' bill_length and their</span>
<span id="cb17-652"><a href="#cb17-652"></a>body_mass. With no defaults, the code to generate this graph is:</span>
<span id="cb17-653"><a href="#cb17-653"></a></span>
<span id="cb17-654"><a href="#cb17-654"></a><span class="in">```{r default}</span></span>
<span id="cb17-655"><a href="#cb17-655"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-656"><a href="#cb17-656"></a>  <span class="fu">layer</span>(</span>
<span id="cb17-657"><a href="#cb17-657"></a>    <span class="at">data =</span> penguins, </span>
<span id="cb17-658"><a href="#cb17-658"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, </span>
<span id="cb17-659"><a href="#cb17-659"></a>                  <span class="at">y =</span> body_mass_g),</span>
<span id="cb17-660"><a href="#cb17-660"></a>    <span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb17-661"><a href="#cb17-661"></a>    <span class="at">stat =</span> <span class="st">"identity"</span>, </span>
<span id="cb17-662"><a href="#cb17-662"></a>    <span class="at">position =</span> <span class="st">"identity"</span></span>
<span id="cb17-663"><a href="#cb17-663"></a>  ) <span class="sc">+</span></span>
<span id="cb17-664"><a href="#cb17-664"></a>  <span class="fu">scale_x_continuous</span>() <span class="sc">+</span></span>
<span id="cb17-665"><a href="#cb17-665"></a>  <span class="fu">scale_y_continuous</span>() <span class="sc">+</span></span>
<span id="cb17-666"><a href="#cb17-666"></a>  <span class="fu">coord_cartesian</span>()</span>
<span id="cb17-667"><a href="#cb17-667"></a><span class="in">```</span></span>
<span id="cb17-668"><a href="#cb17-668"></a></span>
<span id="cb17-669"><a href="#cb17-669"></a>The above code:</span>
<span id="cb17-670"><a href="#cb17-670"></a></span>
<span id="cb17-671"><a href="#cb17-671"></a><span class="ss">-   </span>Creates a new plot object (<span class="in">`ggplot`</span>)</span>
<span id="cb17-672"><a href="#cb17-672"></a></span>
<span id="cb17-673"><a href="#cb17-673"></a><span class="ss">-   </span>Adds a layer (<span class="in">`layer`</span>)</span>
<span id="cb17-674"><a href="#cb17-674"></a></span>
<span id="cb17-675"><a href="#cb17-675"></a><span class="ss">    -   </span>Specifies the data (<span class="in">`penguins`</span>)</span>
<span id="cb17-676"><a href="#cb17-676"></a><span class="ss">    -   </span>Maps engine bill length to the $x$ position and body mass to the</span>
<span id="cb17-677"><a href="#cb17-677"></a>        $y$ position (<span class="in">`mapping`</span>)</span>
<span id="cb17-678"><a href="#cb17-678"></a><span class="ss">    -   </span>Uses the point geometric transformation (<span class="in">`geom = "point"`</span>)</span>
<span id="cb17-679"><a href="#cb17-679"></a><span class="ss">    -   </span>Implements an identity transformation and position</span>
<span id="cb17-680"><a href="#cb17-680"></a>        (<span class="in">`stat = "identity"`</span> and <span class="in">`position = "identity"`</span>)</span>
<span id="cb17-681"><a href="#cb17-681"></a></span>
<span id="cb17-682"><a href="#cb17-682"></a><span class="ss">-   </span>Establishes two continuous position scales (<span class="in">`scale_x_continuous`</span> and</span>
<span id="cb17-683"><a href="#cb17-683"></a>    <span class="in">`scale_y_continuous`</span>)</span>
<span id="cb17-684"><a href="#cb17-684"></a></span>
<span id="cb17-685"><a href="#cb17-685"></a><span class="ss">-   </span>Declares a cartesian coordinate system (<span class="in">`coord_cartesian`</span>)</span>
<span id="cb17-686"><a href="#cb17-686"></a></span>
<span id="cb17-687"><a href="#cb17-687"></a>How can we simplify this using intelligent defaults?</span>
<span id="cb17-688"><a href="#cb17-688"></a></span>
<span id="cb17-689"><a href="#cb17-689"></a><span class="ss">1.  </span>We only need to specify one geom and stat, since each geom has a</span>
<span id="cb17-690"><a href="#cb17-690"></a>    default stat.</span>
<span id="cb17-691"><a href="#cb17-691"></a></span>
<span id="cb17-692"><a href="#cb17-692"></a><span class="ss">2.  </span>Cartesian coordinate systems are most commonly used, so it should be</span>
<span id="cb17-693"><a href="#cb17-693"></a>    the default.</span>
<span id="cb17-694"><a href="#cb17-694"></a></span>
<span id="cb17-695"><a href="#cb17-695"></a><span class="ss">3.  </span>Default scales can be added based on the aesthetic and type of</span>
<span id="cb17-696"><a href="#cb17-696"></a>    variables.</span>
<span id="cb17-697"><a href="#cb17-697"></a></span>
<span id="cb17-698"><a href="#cb17-698"></a><span class="ss">    -   </span>Continuous values are transformed with a linear scaling.</span>
<span id="cb17-699"><a href="#cb17-699"></a><span class="ss">    -   </span>Discrete values are mapped to integers.</span>
<span id="cb17-700"><a href="#cb17-700"></a><span class="ss">    -   </span>Scales for aesthetics such as color, fill, and size can also be</span>
<span id="cb17-701"><a href="#cb17-701"></a>        intelligently defaulted.</span>
<span id="cb17-702"><a href="#cb17-702"></a></span>
<span id="cb17-703"><a href="#cb17-703"></a>Using these defaults, we can rewrite the above code as:</span>
<span id="cb17-704"><a href="#cb17-704"></a></span>
<span id="cb17-705"><a href="#cb17-705"></a><span class="in">```{r default2}</span></span>
<span id="cb17-706"><a href="#cb17-706"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb17-707"><a href="#cb17-707"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> penguins, </span>
<span id="cb17-708"><a href="#cb17-708"></a>             <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, </span>
<span id="cb17-709"><a href="#cb17-709"></a>                           <span class="at">y =</span> body_mass_g))</span>
<span id="cb17-710"><a href="#cb17-710"></a><span class="in">```</span></span>
<span id="cb17-711"><a href="#cb17-711"></a></span>
<span id="cb17-712"><a href="#cb17-712"></a>This generates the exact same plot, but uses fewer lines of code.</span>
<span id="cb17-713"><a href="#cb17-713"></a>Because multiple layers can use the same components (data, mapping,</span>
<span id="cb17-714"><a href="#cb17-714"></a>etc.), we can also specify that information in the <span class="in">`ggplot()`</span> function</span>
<span id="cb17-715"><a href="#cb17-715"></a>rather than in the <span class="in">`layer()`</span> function:</span>
<span id="cb17-716"><a href="#cb17-716"></a></span>
<span id="cb17-717"><a href="#cb17-717"></a><span class="in">```{r default3}</span></span>
<span id="cb17-718"><a href="#cb17-718"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, </span>
<span id="cb17-719"><a href="#cb17-719"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> bill_length_mm, </span>
<span id="cb17-720"><a href="#cb17-720"></a>                     <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb17-721"><a href="#cb17-721"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb17-722"><a href="#cb17-722"></a><span class="in">```</span></span>
<span id="cb17-723"><a href="#cb17-723"></a></span>
<span id="cb17-724"><a href="#cb17-724"></a>And as we will learn, function arguments in R use specific ordering, so</span>
<span id="cb17-725"><a href="#cb17-725"></a>we can omit the explicit call to <span class="in">`data`</span> and <span class="in">`mapping`</span>:</span>
<span id="cb17-726"><a href="#cb17-726"></a></span>
<span id="cb17-727"><a href="#cb17-727"></a><span class="in">```{r default4}</span></span>
<span id="cb17-728"><a href="#cb17-728"></a><span class="fu">ggplot</span>(penguins, <span class="fu">aes</span>(bill_length_mm, body_mass_g)) <span class="sc">+</span></span>
<span id="cb17-729"><a href="#cb17-729"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb17-730"><a href="#cb17-730"></a><span class="in">```</span></span>
<span id="cb17-731"><a href="#cb17-731"></a></span>
<span id="cb17-732"><a href="#cb17-732"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb17-733"><a href="#cb17-733"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://isabella-b.com/blog/ggplot2-theme-elements-reference/ggplot2-theme-elements-reference-v2_hu8994090e1960a0a71878a3756da20076_580819_2000x2000_fit_lanczos_2.png"</span>)</span>
<span id="cb17-734"><a href="#cb17-734"></a></span>
<span id="cb17-735"><a href="#cb17-735"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">Website made with ❤️ and <a href="https://quarto.org/">Quarto</a>, by Arvind Venkatadri. License: <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA 2.0</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/arvindvenkatadri/">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/arvind_v">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:arvind.venkatadri@gmail.com">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


<script src="../../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>