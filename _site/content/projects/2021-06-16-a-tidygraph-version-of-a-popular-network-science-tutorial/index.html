<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Arvind Venkatadri">
<meta name="dcterms.date" content="2021-06-16">
<title>The Foundation Series - A Tidygraph version of a Popular Network Science Tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<script src="../../../site_libs/htmlwidgets-1.6.1/htmlwidgets.js"></script><link href="../../../site_libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="../../../site_libs/vis-9.1.0/vis-network.min.js"></script><script src="../../../site_libs/visNetwork-binding-2.1.2/visNetwork.js"></script><link href="../../../site_libs/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<meta property="og:title" content="The Foundation Series - A Tidygraph version of a Popular Network Science Tutorial">
<meta property="og:description" content="">
<meta property="og:image" content="https://av-quarto.netlify.app/content/projects/2021-06-16-a-tidygraph-version-of-a-popular-network-science-tutorial/index_files/figure-html/unnamed-chunk-11-1.png">
<meta property="og:site-name" content="The Foundation Series">
<meta property="og:image:height" content="3000">
<meta property="og:image:width" content="4200">
<meta name="twitter:title" content="The Foundation Series - A Tidygraph version of a Popular Network Science Tutorial">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://av-quarto.netlify.app/content/projects/2021-06-16-a-tidygraph-version-of-a-popular-network-science-tutorial/index_files/figure-html/unnamed-chunk-11-1.png">
<meta name="twitter:image-height" content="3000">
<meta name="twitter:image-width" content="4200">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">The Foundation Series</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/arvindvenkatadri/my-quarto-website" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/arvind_v" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../www.linkedin.com/in/arvindvenkatadri" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:arvind.venkatadri@gmail.com" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">A Tidygraph version of a Popular Network Science Tutorial</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Teaching</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../content/courses/Analytics/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analytics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">
<li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/Analytics/Tools/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tools and Software</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/Analytics/Descriptive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Descriptive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/Analytics/Inference/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical Inference</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/Analytics/Modelling/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inferential Modelling</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/Analytics/Predictive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Predictive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/Analytics/Prescriptive/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prescriptive Analytics</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/Analytics/Workflow/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Workflow</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/R4Artists/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R for Artists and Managers</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/TRIZ4ProbSolving/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TRIZ for Innovation</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/MathModelsDesign/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Math Models in Design</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/NoCode/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Vis with No Code</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/courses/ISTW/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">In Short, the World</span></a>
  </div>
</li>
          <li class="px-0"><hr class="sidebar-divider hi "></li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/projects/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Blogs</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/slides/listing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Slides</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#network-plots-in-igraph" id="toc-network-plots-in-igraph" class="nav-link active" data-scroll-target="#network-plots-in-igraph">3. Network plots in ‘igraph’</a></li>
  <li><a href="#highlighting-aspects-of-the-network" id="toc-highlighting-aspects-of-the-network" class="nav-link" data-scroll-target="#highlighting-aspects-of-the-network">——-~~ Highlighting aspects of the network ——–</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">A Tidygraph version of a Popular Network Science Tutorial</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R; Networks</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 16, 2021</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">Invalid Date</p>
    </div>
  </div>
    
  </div>
  

</header><section id="introduction" class="level2"><h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This is an attempt to rework , using <code>tidygraph</code> and <code>ggraph</code>, much of <a href="https://www.kateto.net/polnet2018"><strong>Network Visualization with R</strong></a> Polnet 2018 Workshop Tutorial, Washington, DC by Prof.&nbsp;Katherine (Katya) Ognyanova.</p>
<p>The aim is to get a working acquaintance with both these packages and also to appreciate some of the concepts in Networks. My code is by no means intended to be elegant; it merely works and there are surely many improvements that people may think of!</p>
<p>I have attempted to write code for the Sections 2:5.</p>
<p>I have retained Prof.&nbsp;Ognyanova’s text in all places.</p>
</section><section id="contents" class="level2"><h2 class="anchored" data-anchor-id="contents">CONTENTS</h2>
<ol type="1">
<li><del>Working with colors in R plots</del></li>
<li>Reading in the network data</li>
<li>Network plots in ‘igraph’</li>
<li>Plotting two-mode networks</li>
<li>Plotting multiplex networks</li>
<li><del>Quick example using ‘network’</del></li>
<li><del>Simple plot animations in R</del></li>
<li><del>Interactive JavaScript networks</del></li>
<li><del>Interactive and dynamic networks with ndtv-d3</del></li>
<li><del>Plotting networks on a geographic map</del></li>
</ol></section><section id="dataset-1-edgelist--" class="level2"><h2 class="anchored" data-anchor-id="dataset-1-edgelist--">——-~~ DATASET 1: edgelist ~~——-</h2>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-1_41f299c007763bfe48acb13c2a3e0799">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Read in the data:</span></span>
<span><span class="va">nodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"./Dataset1-Media-Example-NODES.csv"</span>, header <span class="op">=</span> <span class="cn">T</span>, as.is <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">links</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"./Dataset1-Media-Example-EDGES.csv"</span>, header <span class="op">=</span> <span class="cn">T</span>, as.is <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-2_4f1af665e77be1a046bdd48a50834b78">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Examine the data:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id               media media.type type.label audience.size
1 s01            NY Times          1  Newspaper            20
2 s02     Washington Post          1  Newspaper            25
3 s03 Wall Street Journal          1  Newspaper            30
4 s04           USA Today          1  Newspaper            32
5 s05            LA Times          1  Newspaper            20
6 s06       New York Post          1  Newspaper            50</code></pre>
</div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">links</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  from  to      type weight
1  s01 s02 hyperlink     22
2  s01 s03 hyperlink     22
3  s01 s04 hyperlink     21
4  s01 s15   mention     20
5  s02 s01 hyperlink     23
6  s02 s03 hyperlink     21</code></pre>
</div>
</div>
<section id="converting-the-data-to-an-igraph-object" class="level3"><h3 class="anchored" data-anchor-id="converting-the-data-to-an-igraph-object">Converting the data to an igraph object:</h3>
<p>The <code>graph_from_data_frame()</code> function takes two data frames: ‘d’ and ‘vertices’. - ‘d’ describes the edges of the network - it should start with two columns containing the source and target node IDs for each network tie. - ‘vertices’ should start with a column of node IDs. It can be omitted. - Any additional columns in either data frame are interpreted as attributes.</p>
<p>NOTE: ID columns need not be numbers or integers!!</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-3_ff3ea8ca1315fde15f8a16bd28fb8e4d">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu">graph_from_data_frame</span><span class="op">(</span>d <span class="op">=</span> <span class="va">links</span>, vertices <span class="op">=</span> <span class="va">nodes</span>, directed <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine the resulting object:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "igraph"</code></pre>
</div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">net</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 8d2aa7a DNW- 17 49 -- 
+ attr: name (v/c), media (v/c), media.type (v/n), type.label (v/c),
| audience.size (v/n), type (e/c), weight (e/n)
+ edges from 8d2aa7a (vertex names):
 [1] s01-&gt;s02 s01-&gt;s03 s01-&gt;s04 s01-&gt;s15 s02-&gt;s01 s02-&gt;s03 s02-&gt;s09 s02-&gt;s10
 [9] s03-&gt;s01 s03-&gt;s04 s03-&gt;s05 s03-&gt;s08 s03-&gt;s10 s03-&gt;s11 s03-&gt;s12 s04-&gt;s03
[17] s04-&gt;s06 s04-&gt;s11 s04-&gt;s12 s04-&gt;s17 s05-&gt;s01 s05-&gt;s02 s05-&gt;s09 s05-&gt;s15
[25] s06-&gt;s06 s06-&gt;s16 s06-&gt;s17 s07-&gt;s03 s07-&gt;s08 s07-&gt;s10 s07-&gt;s14 s08-&gt;s03
[33] s08-&gt;s07 s08-&gt;s09 s09-&gt;s10 s10-&gt;s03 s12-&gt;s06 s12-&gt;s13 s12-&gt;s14 s13-&gt;s12
[41] s13-&gt;s17 s14-&gt;s11 s14-&gt;s13 s15-&gt;s01 s15-&gt;s04 s15-&gt;s06 s16-&gt;s06 s16-&gt;s17
[49] s17-&gt;s04</code></pre>
</div>
</div>
<p>The description of an igraph object starts with four letters: -D or U, for a directed or undirected graph -N for a named graph (where nodes have a <code>name</code> attribute) -W for a weighted graph (where edges have a <code>weight</code> attribute) -B for a bipartite (two-mode) graph (where nodes have a <code>type</code> attribute) The two numbers that follow (17 49) refer to the <strong>number of nodes</strong> and <strong>edges</strong> in the graph. The description also lists node &amp; edge attributes.</p>
<p>We can access the nodes, edges, and their attributes:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-4_19b9c030cd14e6b18b91e04325b06058">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 49/49 edges from 8d2aa7a (vertex names):
 [1] s01-&gt;s02 s01-&gt;s03 s01-&gt;s04 s01-&gt;s15 s02-&gt;s01 s02-&gt;s03 s02-&gt;s09 s02-&gt;s10
 [9] s03-&gt;s01 s03-&gt;s04 s03-&gt;s05 s03-&gt;s08 s03-&gt;s10 s03-&gt;s11 s03-&gt;s12 s04-&gt;s03
[17] s04-&gt;s06 s04-&gt;s11 s04-&gt;s12 s04-&gt;s17 s05-&gt;s01 s05-&gt;s02 s05-&gt;s09 s05-&gt;s15
[25] s06-&gt;s06 s06-&gt;s16 s06-&gt;s17 s07-&gt;s03 s07-&gt;s08 s07-&gt;s10 s07-&gt;s14 s08-&gt;s03
[33] s08-&gt;s07 s08-&gt;s09 s09-&gt;s10 s10-&gt;s03 s12-&gt;s06 s12-&gt;s13 s12-&gt;s14 s13-&gt;s12
[41] s13-&gt;s17 s14-&gt;s11 s14-&gt;s13 s15-&gt;s01 s15-&gt;s04 s15-&gt;s06 s16-&gt;s06 s16-&gt;s17
[49] s17-&gt;s04</code></pre>
</div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 17/17 vertices, named, from 8d2aa7a:
 [1] s01 s02 s03 s04 s05 s06 s07 s08 s09 s10 s11 s12 s13 s14 s15 s16 s17</code></pre>
</div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">type</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "hyperlink" "hyperlink" "hyperlink" "mention"   "hyperlink" "hyperlink"
 [7] "hyperlink" "hyperlink" "hyperlink" "hyperlink" "hyperlink" "hyperlink"
[13] "mention"   "hyperlink" "hyperlink" "hyperlink" "mention"   "mention"  
[19] "hyperlink" "mention"   "mention"   "hyperlink" "hyperlink" "mention"  
[25] "hyperlink" "hyperlink" "mention"   "mention"   "mention"   "hyperlink"
[31] "mention"   "hyperlink" "mention"   "mention"   "mention"   "hyperlink"
[37] "mention"   "hyperlink" "mention"   "hyperlink" "mention"   "mention"  
[43] "mention"   "hyperlink" "hyperlink" "hyperlink" "hyperlink" "mention"  
[49] "hyperlink"</code></pre>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">media</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "NY Times"            "Washington Post"     "Wall Street Journal"
 [4] "USA Today"           "LA Times"            "New York Post"      
 [7] "CNN"                 "MSNBC"               "FOX News"           
[10] "ABC"                 "BBC"                 "Yahoo News"         
[13] "Google News"         "Reuters.com"         "NYTimes.com"        
[16] "WashingtonPost.com"  "AOL.com"            </code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-5_c3dff10d07a264b80ebc47f328505092">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">type</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 17 nodes and 49 edges
#
# A directed multigraph with 1 component
#
# Edge Data: 49 × 3 (active)
   from    to type     
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;    
1     1     2 hyperlink
2     1     3 hyperlink
3     1     4 hyperlink
4     1    15 mention  
5     2     1 hyperlink
6     2     3 hyperlink
# … with 43 more rows
#
# Node Data: 17 × 5
  id    media               media.type type.label audience.size
  &lt;chr&gt; &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;              &lt;int&gt;
1 s01   NY Times                     1 Newspaper             20
2 s02   Washington Post              1 Newspaper             25
3 s03   Wall Street Journal          1 Newspaper             30
# … with 14 more rows</code></pre>
</div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">media</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 17 nodes and 49 edges
#
# A directed multigraph with 1 component
#
# Node Data: 17 × 1 (active)
  media              
  &lt;chr&gt;              
1 NY Times           
2 Washington Post    
3 Wall Street Journal
4 USA Today          
5 LA Times           
6 New York Post      
# … with 11 more rows
#
# Edge Data: 49 × 4
   from    to type      weight
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt;
1     1     2 hyperlink     22
2     1     3 hyperlink     22
3     1     4 hyperlink     21
# … with 46 more rows</code></pre>
</div>
</div>
<p>Or find specific nodes and edges by attribute:(that returns objects of type vertex sequence / edge sequence)</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-6_97d077dd2f882f66af55aed2140e70d5">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">media</span> <span class="op">==</span> <span class="st">"BBC"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 1/17 vertex, named, from 8d2aa7a:
[1] s11</code></pre>
</div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">type</span> <span class="op">==</span> <span class="st">"mention"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 20/49 edges from 8d2aa7a (vertex names):
 [1] s01-&gt;s15 s03-&gt;s10 s04-&gt;s06 s04-&gt;s11 s04-&gt;s17 s05-&gt;s01 s05-&gt;s15 s06-&gt;s17
 [9] s07-&gt;s03 s07-&gt;s08 s07-&gt;s14 s08-&gt;s07 s08-&gt;s09 s09-&gt;s10 s12-&gt;s06 s12-&gt;s14
[17] s13-&gt;s17 s14-&gt;s11 s14-&gt;s13 s16-&gt;s17</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-7_1e7ae222c493da3f78f16e6c10134d4d">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Using tidygraph</span></span>
<span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">media</span> <span class="op">==</span> <span class="st">"BBC"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 1 nodes and 0 edges
#
# A rooted tree
#
# Node Data: 1 × 5 (active)
  id    media media.type type.label audience.size
  &lt;chr&gt; &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;              &lt;int&gt;
1 s11   BBC            2 TV                    34
#
# Edge Data: 0 × 4
# … with 4 variables: from &lt;int&gt;, to &lt;int&gt;, type &lt;chr&gt;, weight &lt;int&gt;</code></pre>
</div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"mention"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 17 nodes and 20 edges
#
# A directed simple graph with 3 components
#
# Edge Data: 20 × 4 (active)
   from    to type    weight
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;int&gt;
1     1    15 mention     20
2     3    10 mention      2
3     4     6 mention      1
4     4    11 mention     22
5     4    17 mention      2
6     5     1 mention      1
# … with 14 more rows
#
# Node Data: 17 × 5
  id    media               media.type type.label audience.size
  &lt;chr&gt; &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;              &lt;int&gt;
1 s01   NY Times                     1 Newspaper             20
2 s02   Washington Post              1 Newspaper             25
3 s03   Wall Street Journal          1 Newspaper             30
# … with 14 more rows</code></pre>
</div>
</div>
<p>If you need them, you can extract an edge list or a matrix back from the igraph networks.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-8_3ef06428f404a601d73f9b035cead9f3">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">as_edgelist</span><span class="op">(</span><span class="va">net</span>, names <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1]  [,2] 
 [1,] "s01" "s02"
 [2,] "s01" "s03"
 [3,] "s01" "s04"
 [4,] "s01" "s15"
 [5,] "s02" "s01"
 [6,] "s02" "s03"
 [7,] "s02" "s09"
 [8,] "s02" "s10"
 [9,] "s03" "s01"
[10,] "s03" "s04"
[11,] "s03" "s05"
[12,] "s03" "s08"
[13,] "s03" "s10"
[14,] "s03" "s11"
[15,] "s03" "s12"
[16,] "s04" "s03"
[17,] "s04" "s06"
[18,] "s04" "s11"
[19,] "s04" "s12"
[20,] "s04" "s17"
[21,] "s05" "s01"
[22,] "s05" "s02"
[23,] "s05" "s09"
[24,] "s05" "s15"
[25,] "s06" "s06"
[26,] "s06" "s16"
[27,] "s06" "s17"
[28,] "s07" "s03"
[29,] "s07" "s08"
[30,] "s07" "s10"
[31,] "s07" "s14"
[32,] "s08" "s03"
[33,] "s08" "s07"
[34,] "s08" "s09"
[35,] "s09" "s10"
[36,] "s10" "s03"
[37,] "s12" "s06"
[38,] "s12" "s13"
[39,] "s12" "s14"
[40,] "s13" "s12"
[41,] "s13" "s17"
[42,] "s14" "s11"
[43,] "s14" "s13"
[44,] "s15" "s01"
[45,] "s15" "s04"
[46,] "s15" "s06"
[47,] "s16" "s06"
[48,] "s16" "s17"
[49,] "s17" "s04"</code></pre>
</div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">as_adjacency_matrix</span><span class="op">(</span><span class="va">net</span>, attr <span class="op">=</span> <span class="st">"weight"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>17 x 17 sparse Matrix of class "dgCMatrix"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>  [[ suppressing 17 column names 's01', 's02', 's03' ... ]]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                     
s01  . 22 22 21 .  .  .  .  .  .  .  .  .  . 20  .  .
s02 23  . 21  . .  .  .  .  1  5  .  .  .  .  .  .  .
s03 21  .  . 22 1  .  .  4  .  2  1  1  .  .  .  .  .
s04  .  . 23  . .  1  .  .  .  . 22  3  .  .  .  .  2
s05  1 21  .  . .  .  .  .  2  .  .  .  .  . 21  .  .
s06  .  .  .  . .  1  .  .  .  .  .  .  .  .  . 21 21
s07  .  .  1  . .  .  . 22  . 21  .  .  .  4  .  .  .
s08  .  .  2  . .  . 21  . 23  .  .  .  .  .  .  .  .
s09  .  .  .  . .  .  .  .  . 21  .  .  .  .  .  .  .
s10  .  .  2  . .  .  .  .  .  .  .  .  .  .  .  .  .
s11  .  .  .  . .  .  .  .  .  .  .  .  .  .  .  .  .
s12  .  .  .  . .  2  .  .  .  .  .  . 22 22  .  .  .
s13  .  .  .  . .  .  .  .  .  .  . 21  .  .  .  .  1
s14  .  .  .  . .  .  .  .  .  .  1  . 21  .  .  .  .
s15 22  .  .  1 .  4  .  .  .  .  .  .  .  .  .  .  .
s16  .  .  .  . . 23  .  .  .  .  .  .  .  .  .  . 21
s17  .  .  .  4 .  .  .  .  .  .  .  .  .  .  .  .  .</code></pre>
</div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># No direct command seems available ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-9_a8f5d62b7095273e8da2c20e9ff4c38b">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Or data frames describing nodes and edges:</span></span>
<span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">net</span>, what <span class="op">=</span> <span class="st">"edges"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   from  to      type weight
1   s01 s02 hyperlink     22
2   s01 s03 hyperlink     22
3   s01 s04 hyperlink     21
4   s01 s15   mention     20
5   s02 s01 hyperlink     23
6   s02 s03 hyperlink     21
7   s02 s09 hyperlink      1
8   s02 s10 hyperlink      5
9   s03 s01 hyperlink     21
10  s03 s04 hyperlink     22
11  s03 s05 hyperlink      1
12  s03 s08 hyperlink      4
13  s03 s10   mention      2
14  s03 s11 hyperlink      1
15  s03 s12 hyperlink      1
16  s04 s03 hyperlink     23
17  s04 s06   mention      1
18  s04 s11   mention     22
19  s04 s12 hyperlink      3
20  s04 s17   mention      2
21  s05 s01   mention      1
22  s05 s02 hyperlink     21
23  s05 s09 hyperlink      2
24  s05 s15   mention     21
25  s06 s06 hyperlink      1
26  s06 s16 hyperlink     21
27  s06 s17   mention     21
28  s07 s03   mention      1
29  s07 s08   mention     22
30  s07 s10 hyperlink     21
31  s07 s14   mention      4
32  s08 s03 hyperlink      2
33  s08 s07   mention     21
34  s08 s09   mention     23
35  s09 s10   mention     21
36  s10 s03 hyperlink      2
37  s12 s06   mention      2
38  s12 s13 hyperlink     22
39  s12 s14   mention     22
40  s13 s12 hyperlink     21
41  s13 s17   mention      1
42  s14 s11   mention      1
43  s14 s13   mention     21
44  s15 s01 hyperlink     22
45  s15 s04 hyperlink      1
46  s15 s06 hyperlink      4
47  s16 s06 hyperlink     23
48  s16 s17   mention     21
49  s17 s04 hyperlink      4</code></pre>
</div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html">as_data_frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">net</span>, what <span class="op">=</span> <span class="st">"vertices"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    name               media media.type type.label audience.size
s01  s01            NY Times          1  Newspaper            20
s02  s02     Washington Post          1  Newspaper            25
s03  s03 Wall Street Journal          1  Newspaper            30
s04  s04           USA Today          1  Newspaper            32
s05  s05            LA Times          1  Newspaper            20
s06  s06       New York Post          1  Newspaper            50
s07  s07                 CNN          2         TV            56
s08  s08               MSNBC          2         TV            34
s09  s09            FOX News          2         TV            60
s10  s10                 ABC          2         TV            23
s11  s11                 BBC          2         TV            34
s12  s12          Yahoo News          3     Online            33
s13  s13         Google News          3     Online            23
s14  s14         Reuters.com          3     Online            12
s15  s15         NYTimes.com          3     Online            24
s16  s16  WashingtonPost.com          3     Online            28
s17  s17             AOL.com          3     Online            33</code></pre>
</div>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Using tidygraph</span></span>
<span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 5
   id    media               media.type type.label audience.size
   &lt;chr&gt; &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;              &lt;int&gt;
 1 s01   NY Times                     1 Newspaper             20
 2 s02   Washington Post              1 Newspaper             25
 3 s03   Wall Street Journal          1 Newspaper             30
 4 s04   USA Today                    1 Newspaper             32
 5 s05   LA Times                     1 Newspaper             20
 6 s06   New York Post                1 Newspaper             50
 7 s07   CNN                          2 TV                    56
 8 s08   MSNBC                        2 TV                    34
 9 s09   FOX News                     2 TV                    60
10 s10   ABC                          2 TV                    23
11 s11   BBC                          2 TV                    34
12 s12   Yahoo News                   3 Online                33
13 s13   Google News                  3 Online                23
14 s14   Reuters.com                  3 Online                12
15 s15   NYTimes.com                  3 Online                24
16 s16   WashingtonPost.com           3 Online                28
17 s17   AOL.com                      3 Online                33</code></pre>
</div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 49 × 4
    from    to type      weight
   &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt;
 1     1     2 hyperlink     22
 2     1     3 hyperlink     22
 3     1     4 hyperlink     21
 4     1    15 mention       20
 5     2     1 hyperlink     23
 6     2     3 hyperlink     21
 7     2     9 hyperlink      1
 8     2    10 hyperlink      5
 9     3     1 hyperlink     21
10     3     4 hyperlink     22
# … with 39 more rows</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-10_6e017898d03d2553839df9a769703435">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># You can also access the network matrix directly:</span></span>
<span><span class="va">net</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>s01 s02 s03 s04 s05 s06 s07 s08 s09 s10 s11 s12 s13 s14 s15 s16 s17 
  0  22  22  21   0   0   0   0   0   0   0   0   0   0  20   0   0 </code></pre>
</div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">net</span><span class="op">[</span><span class="fl">5</span>,<span class="fl">7</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># Does not seem possible, even with `as.matrix()`.</span></span>
<span><span class="co"># Returns tibbles only as in the code chunk above</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-11_34f4a9083bf95de9bc92d0a1a2e70a03">
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># First attempt to plot the graph:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span> <span class="co"># not pretty!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Removing loops from the graph:</span></span>
<span><span class="va">net</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/simplify.html">simplify</a></span><span class="op">(</span><span class="va">net</span>, remove.multiple <span class="op">=</span> <span class="cn">F</span>, remove.loops <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Let's and reduce the arrow size and remove the labels:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, edge.arrow.size <span class="op">=</span> <span class="fl">.4</span>, vertex.label <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-12_ba9b2ecefacae75780a52aff609bb2a7">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"graphopt"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span></span>
<span>    color <span class="op">=</span> <span class="st">"grey"</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">0.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    start_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">0.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    <span class="co"># clears an area near the node</span></span>
<span>    </span>
<span>    arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">3</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">6</span>, shape <span class="op">=</span> <span class="fl">21</span>, fill <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using the `size` aesthetic in this geom was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` in the `default_aes` field and elsewhere instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Removing loops from the graph:</span></span>
<span><span class="co"># From the docs:</span></span>
<span><span class="co"># convert() is a shorthand for performing both `morph` and `crystallise` along with extracting a single tbl_graph (defaults to the first). For morphs w(h)ere you know they only create a single graph, and you want to keep it, this is an easy way.</span></span>
<span><span class="co">#</span></span>
<span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span></span>
<span>  <span class="fu">convert</span><span class="op">(</span><span class="va">to_simple</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"graphopt"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span></span>
<span>    color <span class="op">=</span> <span class="st">"grey"</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">0.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    start_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">0.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span> </span>
<span>    arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">3</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">6</span>, shape <span class="op">=</span> <span class="fl">21</span>, fill <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="dataset-2-matrix" class="level2"><h2 class="anchored" data-anchor-id="dataset-2-matrix">——-~~ DATASET 2: matrix ——–</h2>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-13_306c578891828b44466c19b874ba8ca8">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Read in the data:</span></span>
<span><span class="va">nodes2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"./Dataset2-Media-User-Example-NODES.csv"</span>, header <span class="op">=</span> <span class="cn">T</span>, as.is <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">links2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"./Dataset2-Media-User-Example-EDGES.csv"</span>, header <span class="op">=</span> <span class="cn">T</span>, row.names <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine the data:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nodes2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id   media media.type media.name audience.size
1 s01     NYT          1  Newspaper            20
2 s02    WaPo          1  Newspaper            25
3 s03     WSJ          1  Newspaper            30
4 s04    USAT          1  Newspaper            32
5 s05 LATimes          1  Newspaper            20
6 s06     CNN          2         TV            56</code></pre>
</div>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">links2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    U01 U02 U03 U04 U05 U06 U07 U08 U09 U10 U11 U12 U13 U14 U15 U16 U17 U18 U19
s01   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
s02   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0
s03   0   0   0   0   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0
s04   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0   0   0
s05   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0
s06   0   0   0   0   0   0   0   0   0   0   0   0   1   1   0   0   1   0   0
    U20
s01   0
s02   1
s03   0
s04   0
s05   0
s06   0</code></pre>
</div>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># links2 is a matrix for a two-mode network:</span></span>
<span><span class="va">links2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">links2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">links2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10 20</code></pre>
</div>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">nodes2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30  5</code></pre>
</div>
</div>
<p>Note: What is a <strong>two-mode</strong> network? A network that as a <code>node$type</code> variable and can be a <code>bipartite</code> or a <code>k-partite</code> network as a result.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-14_09138298fcdbe606adc94d47950985b6">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Create an igraph network object from the two-mode matrix:</span></span>
<span><span class="va">net2</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_incidence_matrix.html">graph_from_incidence_matrix</a></span><span class="op">(</span><span class="va">links2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To transform a one-mode network matrix into an igraph object,</span></span>
<span><span class="co"># we would use graph_from_adjacency_matrix()</span></span>
<span></span>
<span><span class="co"># A built-in vertex attribute 'type' shows which mode vertices belong to.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE  TRUE 
   10    20 </code></pre>
</div>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Basic igraph plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net2</span>,vertex.label <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-15_aa5980456c0bb9cd9e8e3a43c9d59a88">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># using tidygraph</span></span>
<span><span class="co"># For all objects that are not node and edge data_frames</span></span>
<span><span class="co"># tidygraph uses `as_tbl_graph()`</span></span>
<span><span class="co"># </span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">as_tbl_graph</span><span class="op">(</span><span class="va">links2</span><span class="op">)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 2
   type  name 
   &lt;lgl&gt; &lt;chr&gt;
 1 FALSE s01  
 2 FALSE s02  
 3 FALSE s03  
 4 FALSE s04  
 5 FALSE s05  
 6 FALSE s06  
 7 FALSE s07  
 8 FALSE s08  
 9 FALSE s09  
10 FALSE s10  
# … with 20 more rows</code></pre>
</div>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31 × 3
    from    to weight
   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
 1     1    11      1
 2     1    12      1
 3     1    13      1
 4     2    14      1
 5     2    15      1
 6     2    30      1
 7     3    16      1
 8     3    17      1
 9     3    18      1
10     3    19      1
# … with 21 more rows</code></pre>
</div>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">graph</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"graphopt"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"orange"</span>, </span>
<span>                  shape <span class="op">=</span> <span class="fl">21</span>, size <span class="op">=</span> <span class="fl">6</span>, </span>
<span>                  color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-16_f850b5ce37f0bdaaa1e783068652c7d8">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Examine the resulting object:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "igraph"</code></pre>
</div>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">net2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 9008ce1 UN-B 30 31 -- 
+ attr: type (v/l), name (v/c)
+ edges from 9008ce1 (vertex names):
 [1] s01--U01 s01--U02 s01--U03 s02--U04 s02--U05 s02--U20 s03--U06 s03--U07
 [9] s03--U08 s03--U09 s04--U09 s04--U10 s04--U11 s05--U11 s05--U12 s05--U13
[17] s06--U13 s06--U14 s06--U17 s07--U14 s07--U15 s07--U16 s08--U16 s08--U17
[25] s08--U18 s08--U19 s09--U06 s09--U19 s09--U20 s10--U01 s10--U11</code></pre>
</div>
</div>
<p>Note: The remaining attributes for the nodes ( in data frame <code>nodes2</code>) are not (yet) a part of the graph, either with igraph or with tidygraph.</p>
</section><section id="network-plots-in-igraph" class="level1"><h1>3. Network plots in ‘igraph’</h1>
<section id="plot-parameters-in-igraph" class="level2"><h2 class="anchored" data-anchor-id="plot-parameters-in-igraph">——~~ Plot parameters in igraph ——–</h2>
<p>Check out the node options (starting with ‘vertex.’) and the edge options (starting with ‘edge.’).</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-17_660787acad6fa74b68923710f81674cb">
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="va">igraph.plotting</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>starting httpd help server ... done</code></pre>
</div>
</div>
<p>We can set the node &amp; edge options in two ways - one is to specify them in the <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> function, as we are doing below.</p>
<ul>
<li>Plot with curved edges (edge.curved = .1) and reduce arrow size:</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-18_7e98fe4e832a8cce67173b33a3517b0d">
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, edge.arrow.size <span class="op">=</span> <span class="fl">.4</span>, edge.curved <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">graph</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 17 nodes and 49 edges
#
# A directed multigraph with 1 component
#
# Node Data: 17 × 5 (active)
  id    media               media.type type.label audience.size
  &lt;chr&gt; &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;              &lt;int&gt;
1 s01   NY Times                     1 Newspaper             20
2 s02   Washington Post              1 Newspaper             25
3 s03   Wall Street Journal          1 Newspaper             30
4 s04   USA Today                    1 Newspaper             32
5 s05   LA Times                     1 Newspaper             20
6 s06   New York Post                1 Newspaper             50
# … with 11 more rows
#
# Edge Data: 49 × 4
   from    to type      weight
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt;
1     1     2 hyperlink     22
2     1     3 hyperlink     22
3     1     4 hyperlink     21
# … with 46 more rows</code></pre>
</div>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"graphopt"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_arc</span><span class="op">(</span></span>
<span>    color <span class="op">=</span> <span class="st">"grey"</span>,</span>
<span>    strength <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span></span>
<span>    arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"both"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">3</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">8</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"black"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">id</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Set node color to orange and the border color to hex 555555</li>
<li>Replace the vertex label with the node names stored in “media”</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-19_9868563e1bd9bd69419614b6c5a50c45">
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">net</span>,</span>
<span>  edge.arrow.size <span class="op">=</span> <span class="fl">.2</span>,</span>
<span>  edge.curved <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  vertex.color <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>  vertex.frame.color <span class="op">=</span> <span class="st">"#555555"</span>,</span>
<span>  vertex.label <span class="op">=</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">media</span>,</span>
<span>  vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  vertex.label.cex <span class="op">=</span> <span class="fl">.7</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co">#graph &lt;- tbl_graph(nodes, links, directed = TRUE)</span></span>
<span><span class="co">#graph</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"gem"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span></span>
<span>    color <span class="op">=</span> <span class="st">"grey"</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">.3</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"both"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"#555555"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">media</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The second way to set attributes is to <strong>add them</strong> to the igraph object.</p>
<ul>
<li>Generate colors based on media type:</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-20_098b0816d78a821cfd9196f42af92687">
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">colrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gray50"</span>, <span class="st">"tomato"</span>, <span class="st">"gold"</span><span class="op">)</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="va">colrs</span><span class="op">[</span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">media.type</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Compute node degrees (#links) and use that to set node size:</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-21_d3c76375f7b572e291598f902346b195">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">deg</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">net</span>, mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="va">deg</span><span class="op">*</span><span class="fl">3</span></span>
<span><span class="co"># Alternatively, we can set node size based on audience size:</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">audience.size</span><span class="op">*</span><span class="fl">0.7</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">size</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 14.0 17.5 21.0 22.4 14.0 35.0 39.2 23.8 42.0 16.1 23.8 23.1 16.1  8.4 16.8
[16] 19.6 23.1</code></pre>
</div>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># The labels are currently node IDs.</span></span>
<span><span class="co"># Setting them to NA will render no labels:</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">label.color</span> <span class="op">&lt;-</span> <span class="st">"black"</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co"># Set edge width based on weight:</span></span>
<span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">width</span> <span class="op">&lt;-</span> <span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">weight</span><span class="op">/</span><span class="fl">6</span></span>
<span></span>
<span><span class="co">#change arrow size and edge color:</span></span>
<span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">arrow.size</span> <span class="op">&lt;-</span> <span class="fl">.2</span></span>
<span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">edge.color</span> <span class="op">&lt;-</span> <span class="st">"gray80"</span></span>
<span></span>
<span><span class="co"># We can even set the network layout:</span></span>
<span><span class="fu">graph_attr</span><span class="op">(</span><span class="va">net</span>, <span class="st">"layout"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">layout_with_lgl</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-22_0f1f63315eec00486aa601617ddfe3e6">
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- tbl_graph(nodes, links, directed = TRUE)</span></span>
<span><span class="co"># graph</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"lgl"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>width <span class="op">=</span> <span class="va">weight</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"grey80"</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">type.label</span>, size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>,</span>
<span>                  shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                  color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Media Type"</span>,</span>
<span>                    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey50"</span>, <span class="st">"gold"</span>, <span class="st">"tomato"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_edge_width</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">1.5</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_size_continuous</span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">guides</span><span class="op">(</span>fill <span class="op">=</span> <span class="fu">guide_legend</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Media Type"</span>,</span>
<span>                             override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can also override the attributes explicitly in the plot:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-23_1b527141b960933298ccfe2e6e0b8db1">
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, edge.color <span class="op">=</span> <span class="st">"orange"</span>, vertex.color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can also add a legend explaining the meaning of the colors we used:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-24_9bd217c5a24b5ae85178b941b1afbba5">
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">2.1</span>, y <span class="op">=</span> <span class="op">-</span><span class="fl">1.1</span>, </span>
<span>       <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Newspaper"</span>,<span class="st">"Television"</span>, <span class="st">"Online News"</span><span class="op">)</span>, </span>
<span>       pch <span class="op">=</span> <span class="fl">21</span>,col <span class="op">=</span> <span class="st">"#777777"</span>, </span>
<span>       pt.bg <span class="op">=</span> <span class="va">colrs</span>, pt.cex <span class="op">=</span> <span class="fl">2.5</span>, bty <span class="op">=</span> <span class="st">"n"</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># legends are automatic with the tidygraph + ggraph flow</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Sometimes, especially with semantic networks, we may be interested in plotting only the labels of the nodes:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-25_0a85cf140c5741c64e53789a110371a1">
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, vertex.shape <span class="op">=</span> <span class="st">"none"</span>, vertex.label <span class="op">=</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">media</span>,</span>
<span>     vertex.label.font <span class="op">=</span> <span class="fl">2</span>, vertex.label.color <span class="op">=</span> <span class="st">"gray40"</span>,</span>
<span>     vertex.label.cex <span class="op">=</span> <span class="fl">.7</span>, edge.color <span class="op">=</span> <span class="st">"gray85"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#using tidygraph</span></span>
<span></span>
<span><span class="fu">ggraph</span><span class="op">(</span><span class="va">net</span>, layout <span class="op">=</span> <span class="st">"gem"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey80"</span>, width <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                 end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">0.5</span>,<span class="st">"cm"</span><span class="op">)</span>, </span>
<span>                 start_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">media</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s color the edges of the graph based on their source node color. We’ll get the starting node for each edge with <code>ends()</code>.</p>
<p>Note: Edge attribute is being set by start node.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-26_121222cb4d92145df64390fd70e90373">
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">edge.start</span> <span class="op">&lt;-</span> <span class="fu">ends</span><span class="op">(</span><span class="va">net</span>, es <span class="op">=</span> <span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span>, names <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">edge.col</span> <span class="op">&lt;-</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">color</span><span class="op">[</span><span class="va">edge.start</span><span class="op">]</span> <span class="co"># How simple this is !!!</span></span>
<span><span class="co"># The three colors are recycled </span></span>
<span><span class="co"># </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, edge.color <span class="op">=</span> <span class="va">edge.col</span>, edge.curved <span class="op">=</span> <span class="fl">.4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>NOTE: The source node colour has been set using the <code>media.type</code>, which is a node attribute. Node attributes are not typically accessible to edges. So we need to build a combo data frame using <code>dplyr</code>, so that edges can use this node attribute. ( There may be other ways…)</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-27_652f568c1c5d2205ce7fe693810531fd">
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># Make a "combo" data frame of nodes *and* edges with left_join()</span></span>
<span><span class="co"># Join by `from` so that type.label is based on from = edge.start</span></span>
<span></span>
<span><span class="va">links</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>, <span class="va">nodes</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"from"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">tbl_graph</span><span class="op">(</span>edges <span class="op">=</span> <span class="va">.</span>, nodes <span class="op">=</span> <span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"lgl"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_arc</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">type.label</span>,</span>
<span>                    width <span class="op">=</span> <span class="va">weight</span><span class="op">)</span>,</span>
<span>                strength <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">type.label</span>,</span>
<span>                      <span class="co"># type.label is now available as edge attribute</span></span>
<span>                      size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>,</span>
<span>                  shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                  color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Media Type"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey50"</span>, <span class="st">"gold"</span>, <span class="st">"tomato"</span><span class="op">)</span>,</span>
<span>    guide <span class="op">=</span> <span class="st">"legend"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_edge_color_manual</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Source Type"</span>,</span>
<span>                          values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey80"</span>, <span class="st">"gold"</span>, <span class="st">"tomato"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_edge_width</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">1.5</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_size_continuous</span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># not "limits"!</span></span>
<span>  <span class="fu">guides</span><span class="op">(</span>fill <span class="op">=</span> <span class="fu">guide_legend</span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                                                 size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="network-layouts-in-igraph" class="level2"><h2 class="anchored" data-anchor-id="network-layouts-in-igraph">——-~~ Network Layouts in ‘igraph’ ——–</h2>
<p>Network layouts are algorithms that return <strong>coordinates</strong> for each node in a network.</p>
<p>Let’s generate a slightly larger 100-node graph using a <code>preferential attachment</code> model (Barabasi-Albert).</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-28_34995c096cb64b1532a8922fb46b8d7e">
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">net.bg</span> <span class="op">&lt;-</span> <span class="fu">sample_pa</span><span class="op">(</span>n <span class="op">=</span>  <span class="fl">100</span>, power <span class="op">=</span>  <span class="fl">1.2</span><span class="op">)</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span><span class="op">$</span><span class="va">size</span> <span class="op">&lt;-</span> <span class="fl">8</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span><span class="op">$</span><span class="va">frame.color</span> <span class="op">&lt;-</span> <span class="st">"white"</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="st">"orange"</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="st">""</span></span>
<span><span class="fu">E</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span><span class="op">$</span><span class="va">arrow.mode</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">play_barabasi_albert</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, power <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"graphopt"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_graph</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-28-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now let’s plot this network using the layouts available in igraph. You can set the layout in the plot function:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-29_342fa87b4b7110cbafbb87f4df9e2fe2">
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">layout_randomly</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Or calculate the vertex coordinates in advance:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-30_d699b15b07bb218423dfa5c2d6aacf59">
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_in_circle</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"circle"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_graph</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-30-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><code>l</code> is simply a matrix of x,y coordinates (N x 2) for the N nodes in the graph. You can generate your own:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-31_006a7f56d57ae2d4aea49d549d44e852">
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                [,1]          [,2]
  [1,]  1.000000e+00  0.000000e+00
  [2,]  9.980267e-01  6.279052e-02
  [3,]  9.921147e-01  1.253332e-01
  [4,]  9.822873e-01  1.873813e-01
  [5,]  9.685832e-01  2.486899e-01
  [6,]  9.510565e-01  3.090170e-01
  [7,]  9.297765e-01  3.681246e-01
  [8,]  9.048271e-01  4.257793e-01
  [9,]  8.763067e-01  4.817537e-01
 [10,]  8.443279e-01  5.358268e-01
 [11,]  8.090170e-01  5.877853e-01
 [12,]  7.705132e-01  6.374240e-01
 [13,]  7.289686e-01  6.845471e-01
 [14,]  6.845471e-01  7.289686e-01
 [15,]  6.374240e-01  7.705132e-01
 [16,]  5.877853e-01  8.090170e-01
 [17,]  5.358268e-01  8.443279e-01
 [18,]  4.817537e-01  8.763067e-01
 [19,]  4.257793e-01  9.048271e-01
 [20,]  3.681246e-01  9.297765e-01
 [21,]  3.090170e-01  9.510565e-01
 [22,]  2.486899e-01  9.685832e-01
 [23,]  1.873813e-01  9.822873e-01
 [24,]  1.253332e-01  9.921147e-01
 [25,]  6.279052e-02  9.980267e-01
 [26,] -1.608143e-16  1.000000e+00
 [27,] -6.279052e-02  9.980267e-01
 [28,] -1.253332e-01  9.921147e-01
 [29,] -1.873813e-01  9.822873e-01
 [30,] -2.486899e-01  9.685832e-01
 [31,] -3.090170e-01  9.510565e-01
 [32,] -3.681246e-01  9.297765e-01
 [33,] -4.257793e-01  9.048271e-01
 [34,] -4.817537e-01  8.763067e-01
 [35,] -5.358268e-01  8.443279e-01
 [36,] -5.877853e-01  8.090170e-01
 [37,] -6.374240e-01  7.705132e-01
 [38,] -6.845471e-01  7.289686e-01
 [39,] -7.289686e-01  6.845471e-01
 [40,] -7.705132e-01  6.374240e-01
 [41,] -8.090170e-01  5.877853e-01
 [42,] -8.443279e-01  5.358268e-01
 [43,] -8.763067e-01  4.817537e-01
 [44,] -9.048271e-01  4.257793e-01
 [45,] -9.297765e-01  3.681246e-01
 [46,] -9.510565e-01  3.090170e-01
 [47,] -9.685832e-01  2.486899e-01
 [48,] -9.822873e-01  1.873813e-01
 [49,] -9.921147e-01  1.253332e-01
 [50,] -9.980267e-01  6.279052e-02
 [51,] -1.000000e+00 -3.216286e-16
 [52,] -9.980267e-01 -6.279052e-02
 [53,] -9.921147e-01 -1.253332e-01
 [54,] -9.822873e-01 -1.873813e-01
 [55,] -9.685832e-01 -2.486899e-01
 [56,] -9.510565e-01 -3.090170e-01
 [57,] -9.297765e-01 -3.681246e-01
 [58,] -9.048271e-01 -4.257793e-01
 [59,] -8.763067e-01 -4.817537e-01
 [60,] -8.443279e-01 -5.358268e-01
 [61,] -8.090170e-01 -5.877853e-01
 [62,] -7.705132e-01 -6.374240e-01
 [63,] -7.289686e-01 -6.845471e-01
 [64,] -6.845471e-01 -7.289686e-01
 [65,] -6.374240e-01 -7.705132e-01
 [66,] -5.877853e-01 -8.090170e-01
 [67,] -5.358268e-01 -8.443279e-01
 [68,] -4.817537e-01 -8.763067e-01
 [69,] -4.257793e-01 -9.048271e-01
 [70,] -3.681246e-01 -9.297765e-01
 [71,] -3.090170e-01 -9.510565e-01
 [72,] -2.486899e-01 -9.685832e-01
 [73,] -1.873813e-01 -9.822873e-01
 [74,] -1.253332e-01 -9.921147e-01
 [75,] -6.279052e-02 -9.980267e-01
 [76,] -1.836910e-16 -1.000000e+00
 [77,]  6.279052e-02 -9.980267e-01
 [78,]  1.253332e-01 -9.921147e-01
 [79,]  1.873813e-01 -9.822873e-01
 [80,]  2.486899e-01 -9.685832e-01
 [81,]  3.090170e-01 -9.510565e-01
 [82,]  3.681246e-01 -9.297765e-01
 [83,]  4.257793e-01 -9.048271e-01
 [84,]  4.817537e-01 -8.763067e-01
 [85,]  5.358268e-01 -8.443279e-01
 [86,]  5.877853e-01 -8.090170e-01
 [87,]  6.374240e-01 -7.705132e-01
 [88,]  6.845471e-01 -7.289686e-01
 [89,]  7.289686e-01 -6.845471e-01
 [90,]  7.705132e-01 -6.374240e-01
 [91,]  8.090170e-01 -5.877853e-01
 [92,]  8.443279e-01 -5.358268e-01
 [93,]  8.763067e-01 -4.817537e-01
 [94,]  9.048271e-01 -4.257793e-01
 [95,]  9.297765e-01 -3.681246e-01
 [96,]  9.510565e-01 -3.090170e-01
 [97,]  9.685832e-01 -2.486899e-01
 [98,]  9.822873e-01 -1.873813e-01
 [99,]  9.921147e-01 -1.253332e-01
[100,]  9.980267e-01 -6.279052e-02</code></pre>
</div>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu">vcount</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu">vcount</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_graph</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-31-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This layout is just an example and not very helpful - thankfully <code>igraph</code> has a number of built-in layouts, including:</p>
<ul>
<li>Randomly placed vertices</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-32_9668d03b63c0b000d1b8de909100eea3">
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_randomly</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="fu">layout_randomly</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-32-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Circle layout</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-33_093b50e05312ae10a857d9ced75fb96a">
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_in_circle</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="fu">layout_in_circle</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-33-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>3D sphere layout</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-34_35d307c044e517bef699aa9d95467230">
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_on_sphere</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="fu">layout_on_sphere</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-34-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>The Fruchterman-Reingold force-directed algorithm: Nice but slow, most often used in graphs smaller than ~1000 vertices.</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-35_136a7e67f549708fc8f2a949b2023a3c">
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_with_fr</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="fu">layout_with_fr</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-35-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You will also notice that the F-R layout is not deterministic - different runs will result in slightly different configurations. Saving the layout in l allows us to get the exact same result multiple times.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-36_caadb22049d2e1982fe4bde11bd4edee">
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">layout_with_fr</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">layout_with_fr</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>By default, the coordinates of the plots are rescaled to the [-1,1] interval for both x and y. You can change that with the parameter <code>rescale = FALSE</code> and rescale your plot manually by multiplying the coordinates by a scalar. You can use <code>norm_coords</code> to normalize the plot with the boundaries you want. This way you can create more compact or spread out layout versions.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-37_ea0089de1bb6ef9d773c251b7216f300">
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Get the layout coordinates:</span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_with_fr</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span></span>
<span><span class="co"># Normalize them so that they are in the -1, 1 interval:</span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">norm_coords</span><span class="op">(</span><span class="va">l</span>, ymin <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, ymax <span class="op">=</span> <span class="fl">1</span>, xmin <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, xmax <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, rescale <span class="op">=</span> <span class="cn">F</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">*</span><span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, rescale <span class="op">=</span> <span class="cn">F</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">*</span><span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, rescale <span class="op">=</span> <span class="cn">F</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">*</span><span class="fl">1.2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, rescale <span class="op">=</span> <span class="cn">F</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">*</span><span class="fl">1.6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># Can't do this with tidygraph ( multiplying layout * scalar ), it seems</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another popular force-directed algorithm that produces nice results for connected graphs is <strong>Kamada Kawai</strong>. Like Fruchterman Reingold, it attempts to minimize the energy in a spring system.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-38_6238d2e5d72d107d4d69ade347f23eb6">
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_with_kk</span><span class="op">(</span><span class="va">net.bg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="fu">layout_with_kk</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-38-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The <strong>MDS (multidimensional scaling)</strong> algorithm tries to place nodes based on some measure of similarity or distance between them. More similar/less distant nodes are placed closer to each other. By default, the measure used is based on the shortest paths between nodes in the network. That can be changed with the <code>dist</code> parameter.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-39_d57ee9ea909723ecdd5f35b28467a084">
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">layout_with_mds</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="fu">layout_with_mds</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-39-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The LGL algorithm is for large connected graphs. Here you can specify a <code>root</code>- the node that will be placed in the middle of the layout.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-40_6d3dd9e92e5cb2022238eff4fc89db9e">
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.bg</span>, layout <span class="op">=</span> <span class="va">layout_with_lgl</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># graph &lt;- play_barabasi_albert(n = 100, power = 1.2)</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="fu">layout_with_lgl</span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-40-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>By default, igraph uses a layout called <code>layout_nicely</code> which selects an appropriate layout algorithm based on the properties of the graph. Check out all available layouts in igraph:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-41_46d2bbbfd17afed072bf5c42f7297240">
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">?</span><span class="fu">igraph</span><span class="fu">::</span><span class="va"><a href="https://r.igraph.org/reference/layout_.html">layout_</a></span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-42_ef1591669d67dfc67d8998ab3aec9546">
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">layouts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"^layout_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="st">"package:igraph"</span><span class="op">)</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Remove layouts that do not apply to our graph.</span></span>
<span><span class="va">layouts</span> <span class="op">&lt;-</span> <span class="va">layouts</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"bipartite|merge|norm|sugiyama|tree"</span>, <span class="va">layouts</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">3</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">layout</span> <span class="kw">in</span> <span class="va">layouts</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">layout</span><span class="op">)</span></span>
<span>  <span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="va">layout</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, edge.arrow.mode <span class="op">=</span> <span class="fl">0</span>, layout <span class="op">=</span> <span class="va">l</span>, main <span class="op">=</span> <span class="va">layout</span><span class="op">)</span> <span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_as_star"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_components"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_in_circle"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_nicely"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_on_grid"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_on_sphere"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_randomly"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_dh"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_drl"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_fr"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_gem"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_graphopt"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_kk"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_lgl"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_mds"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-42-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="highlighting-aspects-of-the-network" class="level1"><h1>——-~~ Highlighting aspects of the network ——–</h1>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-43_d27b1f7266c0682cb4ab9482094148a1">
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Notice that our network plot is still not too helpful. We can identify the type and size of nodes, but cannot see much about the structure since the links we’re examining are so dense. One way to approach this is to see if we can sparsify the network.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-44_c13c1987cacca680ddc71badba493935">
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">links</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">links</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12.40816</code></pre>
</div>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">links</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9.905635</code></pre>
</div>
</div>
<p>There are more sophisticated ways to extract the key edges, but for the purposes of this exercise we’ll only keep ones that have weight higher than the mean for the network. We can delete edges using <code>delete_edges(net, edges)</code> (or, by the way, add edges with <code>add_edges(net, edges)</code> )</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-45_521dca9715bd48fca7177392e5765309">
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cut.off</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">links</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span></span>
<span><span class="va">net.sp</span> <span class="op">&lt;-</span> <span class="fu">delete_edges</span><span class="op">(</span><span class="va">net</span>, <span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">weight</span><span class="op">&lt;</span><span class="va">cut.off</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.sp</span>, layout <span class="op">=</span> <span class="va">layout_with_kk</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span><span class="va">graph</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 17 nodes and 49 edges
#
# A directed multigraph with 1 component
#
# Node Data: 17 × 5 (active)
  id    media               media.type type.label audience.size
  &lt;chr&gt; &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;              &lt;int&gt;
1 s01   NY Times                     1 Newspaper             20
2 s02   Washington Post              1 Newspaper             25
3 s03   Wall Street Journal          1 Newspaper             30
4 s04   USA Today                    1 Newspaper             32
5 s05   LA Times                     1 Newspaper             20
6 s06   New York Post                1 Newspaper             50
# … with 11 more rows
#
# Edge Data: 49 × 4
   from    to type      weight
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt;
1     1     2 hyperlink     22
2     1     3 hyperlink     22
3     1     4 hyperlink     21
# … with 46 more rows</code></pre>
</div>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="co"># New stuff here</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  </span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"kk"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span></span>
<span>    <span class="fu">aes</span><span class="op">(</span>width <span class="op">=</span> <span class="va">weight</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"grey80"</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">type.label</span>,</span>
<span>                      size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>,</span>
<span>                  shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                  color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Media Type"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey50"</span>, <span class="st">"gold"</span>, <span class="st">"tomato"</span><span class="op">)</span>,</span>
<span>    guide <span class="op">=</span> <span class="st">"legend"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">scale_edge_width</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">1.5</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_size_continuous</span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># not "limits"!</span></span>
<span>  <span class="fu">guides</span><span class="op">(</span>fill <span class="op">=</span> <span class="fu">guide_legend</span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                                                 size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-45-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Another way to think about this is to plot the two tie types (hyperlinks and mentions) separately. We will do that in section 5 of this tutorial: Plotting multiplex networks.</p>
<section id="community-detection" class="level3"><h3 class="anchored" data-anchor-id="community-detection">Community Detection</h3>
<p>We can also try to make the network map more useful by showing the communities within it.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-46_10fcb50467468b507fd9d09d593d728d">
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Community detection (by optimizing modularity over partitions):</span></span>
<span><span class="va">clp</span> <span class="op">&lt;-</span> <span class="fu">cluster_optimal</span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">clp</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "communities"</code></pre>
</div>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">clp</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH clustering optimal, groups: 4, mod: 0.6
+ groups:
  $`1`
  [1] "s01" "s02" "s03" "s04" "s05" "s11" "s15"
  
  $`2`
  [1] "s06" "s16" "s17"
  
  $`3`
  [1] "s07" "s08" "s09" "s10"
  
  $`4`
  + ... omitted several groups/vertices</code></pre>
</div>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">clp</span><span class="op">$</span><span class="va">membership</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 2 3 3 3 3 1 4 4 4 1 2 2</code></pre>
</div>
</div>
<p>Community detection returns an object of class “communities” which igraph knows how to plot:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-47_ff89e59c8f1b5611743b17709304a1c4">
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">clp</span>, <span class="va">net</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>To plot communities using the <code>tidygraph</code> approach, I have taken help from the <code>ggforce</code> package. This package allows drawing of hull shapes around specific sets of points. Here goes:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-48_6bef470e1fc6acba7a7620d66402aea0">
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># And ggforce</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggforce.data-imaginist.com">ggforce</a></span><span class="op">)</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># new stuff</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>community <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="fu">tidygraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tidygraph/man/group_graph.html">group_optimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Need to pre-compute layout coordinates to pass to ggforce</span></span>
<span><span class="co"># To create a hull around each community</span></span>
<span><span class="va">layout_go</span> <span class="op">&lt;-</span> <span class="fu">layout_with_graphopt</span><span class="op">(</span><span class="va">graph</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu">ggraph</span><span class="op">(</span><span class="va">graph</span>, layout <span class="op">=</span> <span class="va">layout_go</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span> <span class="co"># new stuff</span></span>
<span> <span class="co"># need to pass x and y coordinates of nodes to `geom_mark_hull`</span></span>
<span> <span class="co"># Hull colour is `community`</span></span>
<span> <span class="co">#</span></span>
<span>  <span class="fu">ggforce</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggforce/man/geom_mark_hull.html">geom_mark_hull</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">layout_go</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>,</span>
<span>                     y <span class="op">=</span> <span class="va">layout_go</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span>,</span>
<span>                     color <span class="op">=</span> <span class="va">community</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>width <span class="op">=</span> <span class="va">weight</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"grey80"</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    </span>
<span>    arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">type.label</span>,</span>
<span>                      size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>,</span>
<span>                  shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                  color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_edge_width</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">1.5</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_continuous</a></span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span><span class="st">"Media Type"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_colour_discrete</a></span><span class="op">(</span><span class="st">"Community"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                                                 size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can also plot the communities without relying on their built-in plot:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-49_ccf72e4cbea14cf21ddceadd8fc37a10">
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">community</span> <span class="op">&lt;-</span> <span class="va">clp</span><span class="op">$</span><span class="va">membership</span></span>
<span><span class="va">colrs</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/grDevices/adjustcolor.html">adjustcolor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gray50"</span>, <span class="st">"tomato"</span>, <span class="st">"gold"</span>, <span class="st">"yellowgreen"</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, vertex.color <span class="op">=</span> <span class="va">colrs</span><span class="op">[</span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">community</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># using tidygraph</span></span>
<span><span class="co"># All clustering algorithms from igraph is available in tidygraph using the group_* prefix. All of these functions return an integer vector with nodes (or edges) sharing the same integer being grouped together.</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span><span class="va">graph</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 17 nodes and 49 edges
#
# A directed multigraph with 1 component
#
# Node Data: 17 × 5 (active)
  id    media               media.type type.label audience.size
  &lt;chr&gt; &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;              &lt;int&gt;
1 s01   NY Times                     1 Newspaper             20
2 s02   Washington Post              1 Newspaper             25
3 s03   Wall Street Journal          1 Newspaper             30
4 s04   USA Today                    1 Newspaper             32
5 s05   LA Times                     1 Newspaper             20
6 s06   New York Post                1 Newspaper             50
# … with 11 more rows
#
# Edge Data: 49 × 4
   from    to type      weight
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt;
1     1     2 hyperlink     22
2     1     3 hyperlink     22
3     1     4 hyperlink     21
# … with 46 more rows</code></pre>
</div>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="co"># new stuff</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>community <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="fu">tidygraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tidygraph/man/group_graph.html">group_optimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  </span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"graphopt"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>width <span class="op">=</span> <span class="va">weight</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"grey80"</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    <span class="co"># clears an area near the node</span></span>
<span>    </span>
<span>    arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">community</span>,</span>
<span>                      size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>,</span>
<span>                  shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                  color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Community"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey50"</span>, <span class="st">"gold"</span>, <span class="st">"tomato"</span>, <span class="st">"yellowgreen"</span><span class="op">)</span>,</span>
<span>    guide <span class="op">=</span> <span class="st">"legend"</span><span class="op">)</span> <span class="op">+</span></span>
<span></span>
<span>  <span class="fu">scale_edge_width</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">1.5</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_continuous</a></span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                                                 size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-49-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="highlighting-specific-nodes-or-links" class="level2"><h2 class="anchored" data-anchor-id="highlighting-specific-nodes-or-links">——-~~ Highlighting specific nodes or links ——–</h2>
<p>Sometimes we want to focus the visualization on a particular node or a group of nodes. Let’s represent distance from the NYT:</p>
<ul>
<li>
<code>distances()</code> calculates shortest path from vertices in ‘v’ to ones in ‘to’.</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-50_4428da5bc9c0bf2e3be38e6c4f54981b">
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dist.from.NYT</span> <span class="op">&lt;-</span> <span class="fu">distances</span><span class="op">(</span><span class="va">net</span>, </span>
<span>                           v <span class="op">=</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">media</span> <span class="op">==</span> <span class="st">"NY Times"</span><span class="op">]</span>, </span>
<span>                           to <span class="op">=</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span>, </span>
<span>                           weights <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Set colors to plot the distances:</span></span>
<span><span class="va">oranges</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dark red"</span>, <span class="st">"gold"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">col</span> <span class="op">&lt;-</span> <span class="fu">oranges</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">dist.from.NYT</span><span class="op">)</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">col</span> <span class="op">&lt;-</span> <span class="va">col</span><span class="op">[</span><span class="va">dist.from.NYT</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Let's have same coordinates for Nodes in both graph renderings</span></span>
<span><span class="co"># Then we can verify that the distance calculations are the same for both renderings</span></span>
<span><span class="va">coords</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/layout_nicely.html">layout_nicely</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, vertex.label <span class="op">=</span> <span class="va">dist.from.NYT</span>,</span>
<span>     vertex.color <span class="op">=</span> <span class="va">col</span>, vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>     layout <span class="op">=</span> <span class="va">coords</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-51_e5c603be6fd033afb7ee2332bce77bcc">
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">graph</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 17 nodes and 49 edges
#
# A directed multigraph with 1 component
#
# Node Data: 17 × 5 (active)
  id    media               media.type type.label audience.size
  &lt;chr&gt; &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;              &lt;int&gt;
1 s01   NY Times                     1 Newspaper             20
2 s02   Washington Post              1 Newspaper             25
3 s03   Wall Street Journal          1 Newspaper             30
4 s04   USA Today                    1 Newspaper             32
5 s05   LA Times                     1 Newspaper             20
6 s06   New York Post                1 Newspaper             50
# … with 11 more rows
#
# Edge Data: 49 × 4
   from    to type      weight
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt;
1     1     2 hyperlink     22
2     1     3 hyperlink     22
3     1     4 hyperlink     21
# … with 46 more rows</code></pre>
</div>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Set up NY Times as root node first</span></span>
<span><span class="co"># V(net)[media == "NY Times"] cannot be used since it returns an `igraph.vs` ( i.e. a list ) object. </span></span>
<span><span class="co"># We need an integer node id.</span></span>
<span><span class="va">root_nyt</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowid_to_column</span><span class="op">(</span>var <span class="op">=</span> <span class="st">"node_id"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">media</span> <span class="op">==</span> <span class="st">"NY Times"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">node_id</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">as_vector</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">root_nyt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>node_id 
      1 </code></pre>
</div>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="co"># new stuff:</span></span>
<span>  <span class="co"># breadth first search for all distances from the root node</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>order <span class="op">=</span> <span class="fu">bfs_dist</span><span class="op">(</span>root <span class="op">=</span> <span class="va">root_nyt</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="va">coords</span><span class="op">)</span> <span class="op">+</span> <span class="co"># same layout</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>width <span class="op">=</span> <span class="va">weight</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"grey80"</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">.2</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>    arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span></span>
<span>      type <span class="op">=</span> <span class="st">"closed"</span>,</span>
<span>      ends <span class="op">=</span> <span class="st">"last"</span>,</span>
<span>      length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"mm"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">order</span>,</span>
<span>                      size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>,</span>
<span>                  shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                  color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">order</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"Distance from NY Times"</span>,</span>
<span>    low <span class="op">=</span> <span class="st">"dark red"</span>,</span>
<span>    high <span class="op">=</span> <span class="st">"gold"</span>,</span>
<span>    guide <span class="op">=</span> <span class="st">"legend"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_edge_width</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">1.5</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_continuous</a></span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                                                 size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Or, a bit more readable:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-52_6bc3b121ef68b79d50ceebce3adb35e3">
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, vertex.color <span class="op">=</span> <span class="va">col</span>, </span>
<span>     vertex.label <span class="op">=</span> <span class="va">dist.from.NYT</span>, edge.arrow.size <span class="op">=</span> <span class="fl">.6</span>,</span>
<span>     vertex.label.color <span class="op">=</span> <span class="st">"white"</span>, </span>
<span>     vertex.size <span class="op">=</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">size</span><span class="op">*</span><span class="fl">1.6</span>, </span>
<span>     edge.width <span class="op">=</span> <span class="fl">2</span>,</span>
<span>     layout <span class="op">=</span> <span class="fu">norm_coords</span><span class="op">(</span><span class="fu">layout_with_lgl</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fl">1.4</span>, rescale <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="path-highlighting" class="level2"><h2 class="anchored" data-anchor-id="path-highlighting">Path Highlighting</h2>
<p>We can also highlight paths between the nodes in the network.</p>
<ul>
<li>Say here between MSNBC and the New York Post</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-53_648d2bf2a0e79112ff64b1e2145e8f80">
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">news.path</span> <span class="op">&lt;-</span> <span class="fu">shortest_paths</span><span class="op">(</span><span class="va">net</span>,</span>
<span>                            from  <span class="op">=</span>  <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">media</span> <span class="op">==</span> <span class="st">"MSNBC"</span><span class="op">]</span>,</span>
<span>                            to   <span class="op">=</span>  <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">media</span> <span class="op">==</span> <span class="st">"New York Post"</span><span class="op">]</span>,</span>
<span>                            output  <span class="op">=</span>  <span class="st">"both"</span><span class="op">)</span>  <span class="co">#both path nodes and edges</span></span>
<span><span class="va">news.path.distance</span> <span class="op">&lt;-</span> <span class="fu">distances</span><span class="op">(</span><span class="va">net</span>,</span>
<span>                                <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">media</span> <span class="op">==</span> <span class="st">"MSNBC"</span><span class="op">]</span>,</span>
<span>                                <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">media</span> <span class="op">==</span> <span class="st">"New York Post"</span><span class="op">]</span> <span class="op">)</span></span>
<span><span class="va">news.path</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$vpath
$vpath[[1]]
+ 4/17 vertices, named, from 8e65729:
[1] s08 s03 s12 s06


$epath
$epath[[1]]
+ 3/48 edges from 8e65729 (vertex names):
[1] s08-&gt;s03 s03-&gt;s12 s12-&gt;s06


$predecessors
NULL

$inbound_edges
NULL</code></pre>
</div>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">news.path.distance</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    s06
s08   5</code></pre>
</div>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Generate edge color variable to plot the path:</span></span>
<span><span class="va">ecol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"gray80"</span>, <span class="fu">ecount</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ecol</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">news.path</span><span class="op">$</span><span class="va">epath</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"orange"</span></span>
<span></span>
<span><span class="co">#Generate edge width variable to plot the path:</span></span>
<span><span class="va">ew</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fu">ecount</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ew</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">news.path</span><span class="op">$</span><span class="va">epath</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span></span>
<span><span class="co">#Generate node color variable to plot the path:</span></span>
<span><span class="va">vcol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"gray40"</span>, <span class="fu">vcount</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">vcol</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">news.path</span><span class="op">$</span><span class="va">vpath</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"gold"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, vertex.color <span class="op">=</span> <span class="va">vcol</span>, </span>
<span>     edge.color <span class="op">=</span> <span class="va">ecol</span>,</span>
<span>     edge.width <span class="op">=</span> <span class="va">ew</span>, </span>
<span>     edge.arrow.mode <span class="op">=</span> <span class="fl">0</span>,</span>
<span>     <span class="co">## added lines</span></span>
<span>     vertex.label <span class="op">=</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">media</span>,</span>
<span>     vertex.label.font <span class="op">=</span> <span class="fl">2</span>, </span>
<span>     vertex.label.color <span class="op">=</span> <span class="st">"gray40"</span>,</span>
<span>     vertex.label.cex <span class="op">=</span> <span class="fl">.7</span>,</span>
<span>     layout <span class="op">=</span> <span class="va">coords</span> <span class="op">*</span> <span class="fl">1.5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-54_e5e3dfe7d998ca769f416b44139a96e1">
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># We need to use:</span></span>
<span><span class="co"># to_shortest_path(graph, from, to, mode = "out", weights = NULL)</span></span>
<span><span class="co"># Let's set up `to` and `from` nodes</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># V(net)[media == "NY Times"] cannot be used since it returns an `igraph.vs` ( i.e. a list ) object.</span></span>
<span><span class="co"># We need integer node ids for `from` and `to` in `to_shortest_path`</span></span>
<span></span>
<span><span class="va">msnbc</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowid_to_column</span><span class="op">(</span>var <span class="op">=</span> <span class="st">"node_id"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">media</span> <span class="op">==</span> <span class="st">"MSNBC"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">node_id</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">as_vector</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">msnbc</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>node_id 
      8 </code></pre>
</div>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nypost</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rowid_to_column</span><span class="op">(</span>var <span class="op">=</span> <span class="st">"node_id"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">media</span> <span class="op">==</span> <span class="st">"New York Post"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">node_id</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">as_vector</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">nypost</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>node_id 
      6 </code></pre>
</div>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Let's create a fresh graph object using morph</span></span>
<span><span class="co"># However we want to merge it back with the original `graph`</span></span>
<span><span class="co"># to get an overlay plot</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># # Can do this to obtain a separate graph</span></span>
<span><span class="co"># convert(to_shortest_path,from = msnbc,to = nypost)</span></span>
<span><span class="co"># However we want to merge it back with the original `graph`</span></span>
<span><span class="co"># to get an overlay plot</span></span>
<span><span class="va">msnbc_nyp</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">graph</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co"># first mark all nodes and edges as *not* on the shortest path</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>shortest_path_node <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>shortest_path_edge <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="co"># Find shortest path between MSNBC and NY Post</span></span>
<span>  <span class="fu">morph</span><span class="op">(</span><span class="va">to_shortest_path</span>, from <span class="op">=</span> <span class="va">msnbc</span>, to <span class="op">=</span> <span class="va">nypost</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="co"># Now to mark the shortest_path nodes as TRUE</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>shortest_path_node <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  </span>
<span>  <span class="co"># Now to mark the shortest_path edges as TRUE</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>shortest_path_edge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># Merge back into main graph; Still saving it as a `msnbc_nyp`</span></span>
<span>  <span class="fu">unmorph</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">msnbc_nyp</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tbl_graph: 17 nodes and 49 edges
#
# A directed multigraph with 1 component
#
# Edge Data: 49 × 5 (active)
   from    to type      weight shortest_path_edge
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt; &lt;lgl&gt;             
1     1     2 hyperlink     22 FALSE             
2     1     3 hyperlink     22 FALSE             
3     1     4 hyperlink     21 FALSE             
4     1    15 mention       20 FALSE             
5     2     1 hyperlink     23 FALSE             
6     2     3 hyperlink     21 FALSE             
# … with 43 more rows
#
# Node Data: 17 × 6
  id    media               media.type type.label audience.size shortest_path_n…
  &lt;chr&gt; &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt;              &lt;int&gt; &lt;lgl&gt;           
1 s01   NY Times                     1 Newspaper             20 FALSE           
2 s02   Washington Post              1 Newspaper             25 FALSE           
3 s03   Wall Street Journal          1 Newspaper             30 TRUE            
# … with 14 more rows</code></pre>
</div>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">msnbc_nyp</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span>layout <span class="op">=</span> <span class="va">coords</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">#geom_edge_link0(colour = "grey") +</span></span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">shortest_path_edge</span>,</span>
<span>                      width <span class="op">=</span> <span class="va">shortest_path_edge</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">size</span>,</span>
<span>                      fill <span class="op">=</span> <span class="va">shortest_path_node</span><span class="op">)</span>, shape <span class="op">=</span> <span class="fl">21</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">media</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_continuous</a></span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span><span class="st">"Shortest Path"</span>,</span>
<span>                    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"gold"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">scale_edge_width_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">scale_edge_colour_manual</span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"orange"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span></span>
<span>    fill <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                                            size <span class="op">=</span> <span class="fl">6</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    edge_colour <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    edge_width <span class="op">=</span> <span class="st">"none"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Highlight the edges going into or out of a vertex, for instance the WSJ. For a single node, use <code>incident()</code>, for multiple nodes use <code>incident_edges()</code>
</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-55_75a78ff099632966f4bb93f2af5fdc5f">
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">inc.edges</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">incident</span><span class="op">(</span><span class="va">net</span>, <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">media</span> <span class="op">==</span> <span class="st">"Wall Street Journal"</span><span class="op">]</span>, mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Set colors to plot the selected edges.</span></span>
<span><span class="va">ecol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"gray80"</span>, <span class="fu">ecount</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ecol</span><span class="op">[</span><span class="va">inc.edges</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"orange"</span></span>
<span><span class="va">vcol</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"grey40"</span>, <span class="fu">vcount</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">vcol</span><span class="op">[</span><span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">media</span> <span class="op">==</span> <span class="st">"Wall Street Journal"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"gold"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">net</span>,</span>
<span>  vertex.color <span class="op">=</span> <span class="va">vcol</span>,</span>
<span>  edge.color <span class="op">=</span> <span class="va">ecol</span>,</span>
<span>  edge.width <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  layout <span class="op">=</span> <span class="va">coords</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-56_04e2303a37cef6b63dbb276510ccdb50">
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="va">wsj</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">rowid_to_column</span><span class="op">(</span>var <span class="op">=</span> <span class="st">"node_id"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">media</span> <span class="op">==</span> <span class="st">"Wall Street Journal"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">node_id</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">as_vector</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>wsj_adjacent <span class="op">=</span> <span class="fu">node_is_adjacent</span><span class="op">(</span>to <span class="op">=</span> <span class="va">wsj</span>, mode <span class="op">=</span> <span class="st">"all"</span>, </span>
<span>                                         include_to <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>         size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>WSJ <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">media</span> <span class="op">==</span> <span class="st">"Wall Street Journal"</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>wsj_links <span class="op">=</span> <span class="fu">edge_is_incident</span><span class="op">(</span><span class="va">wsj</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  </span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="va">coords</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">wsj_links</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">WSJ</span>, </span>
<span>                      size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>,shape <span class="op">=</span> <span class="fl">21</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">media</span><span class="op">)</span>, repel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span><span class="st">"WSJ Neighbours"</span>, </span>
<span>                      values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"gold"</span><span class="op">)</span>, </span>
<span>                      guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> </span>
<span>                                             <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>, </span>
<span>                                                  size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">scale_edge_colour_manual</span><span class="op">(</span><span class="st">"WSJ Links"</span>, </span>
<span>                      values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"orange"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size</a></span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span> <span class="fl">2</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Highlighting WSJ Neighbours and Links"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"none"</span>, fill <span class="op">=</span> <span class="st">"none"</span> <span class="co">#, colour = "none"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="highlight-neighbours" class="level2"><h2 class="anchored" data-anchor-id="highlight-neighbours">Highlight Neighbours</h2>
<p>Or we can highlight the immediate neighbors of a vertex, say WSJ. The <code>neighbors</code> function finds all nodes one step out from the focal actor. To find the neighbors for multiple nodes, use <code>adjacent_vertices()</code>. To find node neighborhoods going more than one step out, use function <code>ego()</code> with parameter <code>order</code> set to the number of steps out to go from the focal node(s).</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-57_c2952b40a78d66c2f02bff881ddf73ff">
<div class="sourceCode" id="cb181"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">neigh.nodes</span> <span class="op">&lt;-</span> <span class="fu">neighbors</span><span class="op">(</span><span class="va">net</span>, <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="va">media</span> <span class="op">==</span> <span class="st">"Wall Street Journal"</span><span class="op">]</span>, mode <span class="op">=</span> <span class="st">"out"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set colors to plot the neighbors:</span></span>
<span><span class="va">vcol</span><span class="op">[</span><span class="va">neigh.nodes</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"#ff9d00"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, vertex.color <span class="op">=</span> <span class="va">vcol</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-58_decfe4507434796d6b8ca4c7daa1d2eb">
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="va">wsj</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">rowid_to_column</span><span class="op">(</span>var <span class="op">=</span> <span class="st">"node_id"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">media</span> <span class="op">==</span> <span class="st">"Wall Street Journal"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">node_id</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">as_vector</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>wsj_adjacent <span class="op">=</span> <span class="fu">node_is_adjacent</span><span class="op">(</span>to <span class="op">=</span> <span class="va">wsj</span>, mode <span class="op">=</span> <span class="st">"all"</span>, </span>
<span>  <span class="co"># remove WSJ from the list!</span></span>
<span>  <span class="co"># highlight only the neighbours</span></span>
<span>  </span>
<span>                                         include_to <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>         size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>WSJ <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">media</span> <span class="op">==</span> <span class="st">"Wall Street Journal"</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>wsj_links <span class="op">=</span> <span class="fu">edge_is_incident</span><span class="op">(</span><span class="va">wsj</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  </span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="va">coords</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">wsj_links</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">wsj_adjacent</span>, </span>
<span>                      size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>,shape <span class="op">=</span> <span class="fl">21</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">media</span><span class="op">)</span>, repel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span><span class="st">"WSJ Neighbours"</span>, </span>
<span>                      values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"gold"</span><span class="op">)</span>, </span>
<span>                      guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> </span>
<span>                                             <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">21</span>, </span>
<span>                                                  size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">scale_edge_colour_manual</span><span class="op">(</span><span class="st">"WSJ Links"</span>, </span>
<span>                      values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"grey"</span>, <span class="st">"orange"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size</a></span><span class="op">(</span><span class="st">"Degree"</span>, range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span> <span class="fl">2</span>, <span class="fl">16</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"Highlighting WSJ Neighbours and Links"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"none"</span>, fill <span class="op">=</span> <span class="st">"none"</span> <span class="co">#, colour = "none"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Another way to draw attention to a group of nodes: (This is generally not recommended since, depending on layout, nodes that are not ‘marked’ can accidentally get placed on top of the mark)</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-59_dc3911d035022372f04259363abaef45">
<div class="sourceCode" id="cb183"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, mark.groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">8</span><span class="op">)</span>, mark.col <span class="op">=</span> <span class="st">"#C5E5E7"</span>, mark.border <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Mark multiple groups:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, mark.groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">8</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">15</span><span class="op">:</span><span class="fl">17</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          mark.col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#C5E5E7"</span>,<span class="st">"#ECD89A"</span><span class="op">)</span>, mark.border <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-59-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="interactive-plotting-with-tkplot" class="level2"><h2 class="anchored" data-anchor-id="interactive-plotting-with-tkplot">——-~~ Interactive plotting with ‘tkplot’ ——–</h2>
<p>R and igraph offer interactive plotting capabilities (mostly helpful for small networks)</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-60_152ad19d67487c2c444a9d27033a965d">
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tkid</span> <span class="op">&lt;-</span> <span class="fu">tkplot</span><span class="op">(</span><span class="va">net</span><span class="op">)</span> <span class="co">#tkid is the id of the tkplot</span></span>
<span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">tkplot.getcoords</span><span class="op">(</span><span class="va">tkid</span><span class="op">)</span> <span class="co"># grab the coordinates from tkplot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="other-ways-to-represent-a-network" class="level2"><h2 class="anchored" data-anchor-id="other-ways-to-represent-a-network">——-~~ Other ways to represent a network ——–</h2>
<p>One reminder that there are other ways to represent a network:</p>
<ul>
<li>Heatmap of the network matrix:</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-61_6c6bc88330875d3d0541eeb186683ac3">
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">netm</span> <span class="op">&lt;-</span> <span class="fu">as_adjacency_matrix</span><span class="op">(</span><span class="va">net</span>, attr <span class="op">=</span> <span class="st">"weight"</span>, sparse <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">netm</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">media</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">netm</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">V</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">media</span></span>
<span></span>
<span><span class="va">palf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gold"</span>, <span class="st">"dark orange"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The Rowv &amp; Colv parameters turn dendrograms on and off</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/heatmap.html">heatmap</a></span><span class="op">(</span><span class="va">netm</span><span class="op">[</span>,<span class="fl">17</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span>, Rowv  <span class="op">=</span>  <span class="cn">NA</span>, Colv  <span class="op">=</span>  <span class="cn">NA</span>, col  <span class="op">=</span>  <span class="fu">palf</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>        scale <span class="op">=</span> <span class="st">"none"</span>, margins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span><span class="op">)</span> <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Degree distribution</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-62_020c57db55a99ad83e6d34527469183c">
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">deg.dist</span> <span class="op">&lt;-</span> <span class="fu">degree_distribution</span><span class="op">(</span><span class="va">net</span>, cumulative <span class="op">=</span> <span class="cn">T</span>, mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span><span class="co"># degree is available in `sna` too</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/degree.html">degree</a></span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">)</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">-</span><span class="va">deg.dist</span>, pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">1.4</span>, col <span class="op">=</span> <span class="st">"orange"</span>, xlab <span class="op">=</span> <span class="st">"Degree"</span>, ylab <span class="op">=</span> <span class="st">"Cumulative Frequency"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using Tidygraph</span></span>
<span><span class="co"># https://stackoverflow.com/questions/18356860/cumulative-histogram-with-ggplot2</span></span>
<span><span class="va">graph</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>degree <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">degree</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">stat</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># geom_histogram(aes(y = cumsum(..count..)), binwidth = 1) + </span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">stat_bin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">..count..</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                binwidth <span class="op">=</span> <span class="fl">1</span>,<span class="co"># Ta-Da !!</span></span>
<span>                geom <span class="op">=</span><span class="st">"point"</span>,color <span class="op">=</span><span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.
ℹ Please use `after_stat(count)` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-62-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="plotting-two-mode-networks" class="level2"><h2 class="anchored" data-anchor-id="plotting-two-mode-networks">4. Plotting two-mode networks</h2>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-63_9dff950f8cc9780919590a1c95455f95">
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nodes2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id   media media.type media.name audience.size
1 s01     NYT          1  Newspaper            20
2 s02    WaPo          1  Newspaper            25
3 s03     WSJ          1  Newspaper            30
4 s04    USAT          1  Newspaper            32
5 s05 LATimes          1  Newspaper            20
6 s06     CNN          2         TV            56</code></pre>
</div>
<div class="sourceCode" id="cb192"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">links2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    U01 U02 U03 U04 U05 U06 U07 U08 U09 U10 U11 U12 U13 U14 U15 U16 U17 U18 U19
s01   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
s02   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0
s03   0   0   0   0   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0
s04   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0   0   0
s05   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0
s06   0   0   0   0   0   0   0   0   0   0   0   0   1   1   0   0   1   0   0
    U20
s01   0
s02   1
s03   0
s04   0
s05   0
s06   0</code></pre>
</div>
<div class="sourceCode" id="cb194"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">net2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 9008ce1 UN-B 30 31 -- 
+ attr: type (v/l), name (v/c)
+ edges from 9008ce1 (vertex names):
 [1] s01--U01 s01--U02 s01--U03 s02--U04 s02--U05 s02--U20 s03--U06 s03--U07
 [9] s03--U08 s03--U09 s04--U09 s04--U10 s04--U11 s05--U11 s05--U12 s05--U13
[17] s06--U13 s06--U14 s06--U17 s07--U14 s07--U15 s07--U16 s08--U16 s08--U17
[25] s08--U18 s08--U19 s09--U06 s09--U19 s09--U20 s10--U01 s10--U11</code></pre>
</div>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This time we will make nodes look different based on their type. Media outlets are blue squares, audience nodes are orange circles:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-64_04ecf6fc3f380a6c8e7a38a585679547">
<div class="sourceCode" id="cb197"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"steel blue"</span>, <span class="st">"orange"</span><span class="op">)</span><span class="op">[</span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">shape</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"square"</span>, <span class="st">"circle"</span><span class="op">)</span><span class="op">[</span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Media outlets will have name labels, audience members will not:</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="st">""</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">label</span><span class="op">[</span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">F</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">nodes2</span><span class="op">$</span><span class="va">media</span><span class="op">[</span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="cn">F</span><span class="op">]</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">label.cex</span> <span class="op">=</span> <span class="fl">.6</span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">label.font</span> <span class="op">=</span> <span class="fl">2</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net2</span>, vertex.label.color <span class="op">=</span> <span class="st">"white"</span>, vertex.size <span class="op">=</span> <span class="op">(</span><span class="fl">2</span><span class="op">-</span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">)</span><span class="op">*</span><span class="fl">8</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-65_d04b352b13e9bdf6197bf1b294008520">
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="fu">as_tbl_graph</span><span class="op">(</span>x <span class="op">=</span> <span class="va">links2</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">nodes2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"nicely"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">type</span>, fill <span class="op">=</span> <span class="va">type</span>, size <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">type</span>, <span class="st">""</span>, <span class="va">media</span><span class="op">)</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"white"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_shape_manual</a></span><span class="op">(</span></span>
<span>    <span class="st">"Type"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">22</span>, <span class="fl">21</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Media"</span>, <span class="st">"Persons"</span><span class="op">)</span>,</span>
<span>    guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">6</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    <span class="st">"Type"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>, <span class="st">"orange"</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Media"</span>, <span class="st">"Persons"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_size_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">4</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><code>igraph</code> has a built-in bipartite layout, though it’s not the most helpful:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-66_1a721b03a695b9adde4c52a1ca2c0dfc">
<div class="sourceCode" id="cb199"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net2</span>, vertex.label <span class="op">=</span> <span class="cn">NA</span>, vertex.size <span class="op">=</span> <span class="fl">7</span>, layout <span class="op">=</span> <span class="va">layout_as_bipartite</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># using tidygraph</span></span>
<span><span class="fu">as_tbl_graph</span><span class="op">(</span>x <span class="op">=</span> <span class="va">links2</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">nodes2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="st">"igraph"</span>, algorithm <span class="op">=</span> <span class="st">"bipartite"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">type</span>, fill <span class="op">=</span> <span class="va">type</span>, size <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">type</span>, <span class="st">""</span>, <span class="va">media</span><span class="op">)</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"white"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_shape_manual</a></span><span class="op">(</span></span>
<span>    <span class="st">"Type"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">22</span>, <span class="fl">21</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Media"</span>, <span class="st">"Persons"</span><span class="op">)</span>,</span>
<span>    guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">6</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    <span class="st">"Type"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>, <span class="st">"orange"</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Media"</span>, <span class="st">"Persons"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_size_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">4</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-66-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Using text as nodes:</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-67_50dea571e2e70d9d8fbd223db9c69872">
<div class="sourceCode" id="cb201"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net2</span>, vertex.shape <span class="op">=</span> <span class="st">"none"</span>, vertex.label <span class="op">=</span> <span class="va">nodes2</span><span class="op">$</span><span class="va">media</span>,</span>
<span>     vertex.label.color <span class="op">=</span> <span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">color</span>, vertex.label.font <span class="op">=</span> <span class="fl">2</span>,</span>
<span>     vertex.label.cex <span class="op">=</span> <span class="fl">.95</span>, edge.color <span class="op">=</span> <span class="st">"gray70"</span>,  edge.width <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="fu">as_tbl_graph</span><span class="op">(</span>x <span class="op">=</span> <span class="va">links2</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">nodes2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"nicely"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link</span><span class="op">(</span>end_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">.4</span>,<span class="st">"cm"</span><span class="op">)</span>, </span>
<span>                 start_cap <span class="op">=</span> <span class="fu">circle</span><span class="op">(</span><span class="fl">0.4</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># geom_node&gt;point(aes(shape = type, fill = type, size = type)) +</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span> <span class="va">media</span>, colour <span class="op">=</span> <span class="va">type</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_shape_manual</a></span><span class="op">(</span></span>
<span>    <span class="st">"Type"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">22</span>, <span class="fl">21</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Media"</span>, <span class="st">"Persons"</span><span class="op">)</span>,</span>
<span>    guide <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span></span>
<span>    <span class="st">"Type"</span>,</span>
<span>    values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dodgerblue"</span>, <span class="st">"orange"</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Media"</span>, <span class="st">"Persons"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_size_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">4</span><span class="op">)</span>, guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-67-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Using images as nodes You will need the ‘png’ package to do this:</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-68_9526a74ef8ce7e9b01135956df0ffa8e">
<div class="sourceCode" id="cb203"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># install.packages("png")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="http://www.rforge.net/png/">"png"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">img.1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span><span class="op">(</span><span class="st">"./images/news.png"</span><span class="op">)</span></span>
<span><span class="va">img.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span><span class="op">(</span><span class="st">"./images/user.png"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">img.1</span>, <span class="va">img.2</span><span class="op">)</span><span class="op">[</span><span class="fu">V</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net2</span>, vertex.shape <span class="op">=</span> <span class="st">"raster"</span>, vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>     vertex.size <span class="op">=</span> <span class="fl">16</span>, vertex.size2 <span class="op">=</span> <span class="fl">16</span>, edge.width <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># By the way, you can also add any image you want to any plot. For example, many #network graphs could be improved by a photo of a puppy carrying a basket full of kittens.</span></span>
<span><span class="va">img.3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html">readPNG</a></span><span class="op">(</span><span class="st">"./images/puppy.png"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/rasterImage.html">rasterImage</a></span><span class="op">(</span><span class="va">img.3</span>,  xleft <span class="op">=</span> <span class="op">-</span><span class="fl">1.7</span>, xright <span class="op">=</span> <span class="fl">0</span>, ybottom <span class="op">=</span> <span class="op">-</span><span class="fl">1.2</span>, ytop <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-68-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># The numbers after the image are coordinates for the plot.</span></span>
<span><span class="co"># The limits of your plotting area are given in par()$usr</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-69_7946d3ad4c889375edf6804eab374fb3">
<div class="sourceCode" id="cb205"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using ~~tidygraph~~ visNetwork</span></span>
<span><span class="co"># See this cheatsheet:</span></span>
<span><span class="co"># system.file("fontAwesome/Font_Awesome_Cheatsheet.pdf", package = "visNetwork")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://datastorm-open.github.io/visNetwork/">visNetwork</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_tbl_graph</span><span class="op">(</span>x <span class="op">=</span> <span class="va">links2</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">nodes2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="co"># visNetwork needs a "group" variable for grouping...</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/visNetwork/man/visNetwork-igraph.html">visIgraph</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/visNetwork/man/visGroups.html">visGroups</a></span><span class="op">(</span>groupname <span class="op">=</span> <span class="st">"FALSE"</span>,shape <span class="op">=</span> <span class="st">"icon"</span>, </span>
<span>            icon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>code <span class="op">=</span> <span class="st">"f26c"</span>, size <span class="op">=</span> <span class="fl">75</span>, color <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/visNetwork/man/visGroups.html">visGroups</a></span><span class="op">(</span>groupname <span class="op">=</span> <span class="st">"TRUE"</span>,shape <span class="op">=</span> <span class="st">"icon"</span>, </span>
<span>            icon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>code <span class="op">=</span> <span class="st">"f007"</span>, size <span class="op">=</span> <span class="fl">75</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/visNetwork/man/addFontAwesome.html">addFontAwesome</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="visNetwork html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-7365c0e31c602faa4645" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7365c0e31c602faa4645">{"x":{"nodes":{"id":["s01","s02","s03","s04","s05","s06","s07","s08","s09","s10","U01","U02","U03","U04","U05","U06","U07","U08","U09","U10","U11","U12","U13","U14","U15","U16","U17","U18","U19","U20"],"type":[false,false,false,false,false,false,false,false,false,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true],"media":["NYT","WaPo","WSJ","USAT","LATimes","CNN","MSNBC","FOX ","ABC","BBC","John","Mary","Paul","Ted","Tom","Kate","Ed","Anna","Dan","Nancy","Sandra","Ronda","Sheila","Jim","Jill","Jo","Brian","Jason","Lisa","Dave"],"media.type":[1,1,1,1,1,2,2,2,2,2,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"media.name":["Newspaper","Newspaper","Newspaper","Newspaper","Newspaper","TV","TV","TV","TV","TV",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"audience.size":[20,25,30,32,20,56,34,60,23,34,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"group":["FALSE","FALSE","FALSE","FALSE","FALSE","FALSE","FALSE","FALSE","FALSE","FALSE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE","TRUE"],"label":["s01","s02","s03","s04","s05","s06","s07","s08","s09","s10","U01","U02","U03","U04","U05","U06","U07","U08","U09","U10","U11","U12","U13","U14","U15","U16","U17","U18","U19","U20"],"x":[-0.866618414351358,0.852827292000127,0.349374701366662,-0.103726463729829,-0.463083392969077,-0.386799280191402,-0.414251551096209,-0.0478027201907705,0.448846405623579,-0.549673238952431,-0.715942785983297,-1,-0.908468626927088,1,0.934617772877568,0.421526144731539,0.43795446642066,0.495610831675751,0.133158036187985,-0.0594010210949086,-0.371858854797756,-0.596916553232496,-0.445119747127929,-0.446216596245728,-0.516127215490021,-0.23222362578858,-0.220025674906454,-0.0178826467706494,0.209830187437779,0.662104048510376],"y":[-0.856451707533748,0.871891044018408,0.0845204673849764,-0.236809982974463,-0.0727373013055161,0.420405646314536,0.778827064659728,0.702215012225584,0.595642323505448,-0.504530705427207,-0.690856688708264,-0.918548364691779,-1,0.896846502756263,1,0.340896776323288,-0.0344923627714656,0.0665150845834825,-0.0898311057342541,-0.371022778632787,-0.295599297286601,-0.103863518399502,0.174654377385528,0.600464006821882,0.901441285160305,0.77983112252351,0.559482111582943,0.84741202561301,0.6672453407444,0.741494285122438]},"edges":{"from":["s01","s01","s01","s02","s02","s02","s03","s03","s03","s03","s04","s04","s04","s05","s05","s05","s06","s06","s06","s07","s07","s07","s08","s08","s08","s08","s09","s09","s09","s10","s10"],"to":["U01","U02","U03","U04","U05","U20","U06","U07","U08","U09","U09","U10","U11","U11","U12","U13","U13","U14","U17","U14","U15","U16","U16","U17","U18","U19","U06","U19","U20","U01","U11"],"weight":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":false,"arrows":"to"},"physics":{"stabilization":false},"groups":{"FALSE":{"shape":"icon","icon":{"code":"f26c","size":75,"color":"orange"}},"useDefaultGroups":true,"TRUE":{"shape":"icon","icon":{"code":"f007","size":75,"color":"#2B7CE9"}}}},"groups":["FALSE","TRUE"],"width":null,"height":null,"idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","igraphlayout":{"type":"square"},"iconsRedraw":true},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>We can also generate and plot <strong>bipartite projections</strong> for the <strong>two-mode network</strong> : (co-memberships are easy to calculate by multiplying the network matrix by its transposed matrix, or using igraph’s <code>bipartite.projection</code> function)</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-70_549985d59e7165fe2518446cd562f212">
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">net2.bp</span> <span class="op">&lt;-</span> <span class="fu">bipartite.projection</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#We can calculate the projections manually as well:</span></span>
<span><span class="fu">as_incidence_matrix</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span>  <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu">as_incidence_matrix</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    s01 s02 s03 s04 s05 s06 s07 s08 s09 s10
s01   3   0   0   0   0   0   0   0   0   1
s02   0   3   0   0   0   0   0   0   1   0
s03   0   0   4   1   0   0   0   0   1   0
s04   0   0   1   3   1   0   0   0   0   1
s05   0   0   0   1   3   1   0   0   0   1
s06   0   0   0   0   1   3   1   1   0   0
s07   0   0   0   0   0   1   3   1   0   0
s08   0   0   0   0   0   1   1   4   1   0
s09   0   1   1   0   0   0   0   1   3   0
s10   1   0   0   1   1   0   0   0   0   2</code></pre>
</div>
<div class="sourceCode" id="cb208"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu">as_incidence_matrix</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span>   <span class="fu">as_incidence_matrix</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in rm(list = cmd, envir = .tkplot.env): object 'tkp.1' not found</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>    U01 U02 U03 U04 U05 U06 U07 U08 U09 U10 U11 U12 U13 U14 U15 U16 U17 U18 U19
U01   2   1   1   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0
U02   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
U03   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
U04   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0
U05   0   0   0   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0
U06   0   0   0   0   0   2   1   1   1   0   0   0   0   0   0   0   0   0   1
U07   0   0   0   0   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0
U08   0   0   0   0   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0
U09   0   0   0   0   0   1   1   1   2   1   1   0   0   0   0   0   0   0   0
U10   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0   0   0
U11   1   0   0   0   0   0   0   0   1   1   3   1   1   0   0   0   0   0   0
U12   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0   0   0   0
U13   0   0   0   0   0   0   0   0   0   0   1   1   2   1   0   0   1   0   0
U14   0   0   0   0   0   0   0   0   0   0   0   0   1   2   1   1   1   0   0
U15   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   0   0   0
U16   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   2   1   1   1
U17   0   0   0   0   0   0   0   0   0   0   0   0   1   1   0   1   2   1   1
U18   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   1   1   1
U19   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   1   1   1   2
U20   0   0   0   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   1
    U20
U01   0
U02   0
U03   0
U04   1
U05   1
U06   1
U07   0
U08   0
U09   0
U10   0
U11   0
U12   0
U13   0
U14   0
U15   0
U16   0
U17   0
U18   0
U19   1
U20   2</code></pre>
</div>
<div class="sourceCode" id="cb211"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">net2.bp</span><span class="op">$</span><span class="va">proj1</span>,</span>
<span>  vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  vertex.label.dist <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  vertex.label <span class="op">=</span> <span class="va">nodes2</span><span class="op">$</span><span class="va">media</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">nodes2</span><span class="op">$</span><span class="va">media.type</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">net2.bp</span><span class="op">$</span><span class="va">proj2</span>,</span>
<span>  vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  vertex.label.dist <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  vertex.label <span class="op">=</span> <span class="va">nodes2</span><span class="op">$</span><span class="va">media</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">nodes2</span><span class="op">$</span><span class="va">media.type</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-70-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-71_064b309fd0017c9e7140b52f7c9e6933">
<div class="sourceCode" id="cb212"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="co"># Calculate projections and add attributes/labels</span></span>
<span><span class="va">proj1</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">as_incidence_matrix</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span>  <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu">as_incidence_matrix</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">as_tbl_graph</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>, <span class="va">nodes2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (is.null(rownames(x)) &amp;&amp; is.null(colnames(x))) || colnames(x) == :
'length(x) = 10 &gt; 1' in coercion to 'logical(1)'</code></pre>
</div>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">proj2</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="fu">as_incidence_matrix</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span>   <span class="fu">as_incidence_matrix</span><span class="op">(</span><span class="va">net2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">as_tbl_graph</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">left_join</span><span class="op">(</span><span class="va">.</span>, <span class="va">nodes2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (is.null(rownames(x)) &amp;&amp; is.null(colnames(x))) || colnames(x) == :
'length(x) = 20 &gt; 1' in coercion to 'logical(1)'</code></pre>
</div>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">proj1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"graphopt"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">6</span>, colour <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">media</span><span class="op">)</span>, repel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">proj2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"graphopt"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_link0</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">media.type</span><span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    shape  <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"dodgerblue"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">media</span><span class="op">)</span>, repel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1</span> <span class="op">+</span> <span class="va">p2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="plotting-multiplex-networks" class="level2"><h2 class="anchored" data-anchor-id="plotting-multiplex-networks">5. Plotting multiplex networks</h2>
<p>In some cases, the networks we want to plot are <strong>multigraphs</strong>: they can have multiple edges connecting the same two nodes. A related concept, <strong>multiplex networks</strong>, contain multiple types of ties – e.g. friendship, romantic, and work relationships between individuals.</p>
<p>In our example network, we also have two tie types: hyperlinks and mentions. One thing we can do is plot each type of tie separately:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-72_a10ad36d6468c4f9a64e624bae4556d7">
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">width</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">net</span>,</span>
<span>  edge.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dark red"</span>, <span class="st">"slategrey"</span><span class="op">)</span><span class="op">[</span><span class="op">(</span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"hyperlink"</span><span class="op">)</span> <span class="op">+</span></span>
<span>                                            <span class="fl">1</span><span class="op">]</span>,</span>
<span>  vertex.color <span class="op">=</span> <span class="st">"gray40"</span>,</span>
<span>  layout <span class="op">=</span> <span class="va">layout_in_circle</span>,</span>
<span>  edge.curved <span class="op">=</span> <span class="fl">.3</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Another way to delete edges using the minus operator:</span></span>
<span><span class="va">net.m</span> <span class="op">&lt;-</span> <span class="va">net</span> <span class="op">-</span> <span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"hyperlink"</span><span class="op">]</span></span>
<span><span class="va">net.h</span> <span class="op">&lt;-</span> <span class="va">net</span> <span class="op">-</span> <span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">[</span><span class="fu">E</span><span class="op">(</span><span class="va">net</span><span class="op">)</span><span class="op">$</span><span class="va">type</span> <span class="op">==</span> <span class="st">"mention"</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#Plot the two links separately:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.h</span>,</span>
<span>     vertex.color <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>     layout <span class="op">=</span> <span class="va">layout_with_fr</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Tie: Hyperlink"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.m</span>,</span>
<span>     vertex.color <span class="op">=</span> <span class="st">"lightsteelblue2"</span>,</span>
<span>     layout <span class="op">=</span> <span class="va">layout_with_fr</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Tie: Mention"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-72-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>Make sure the nodes stay in the same place in both plots:</li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-73_cc2d1723362a49b5ef23bde05b8c5132">
<div class="sourceCode" id="cb219"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_with_fr</span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.h</span>,</span>
<span>     vertex.color <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>     layout <span class="op">=</span> <span class="va">l</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Tie: Hyperlink"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">net.m</span>,</span>
<span>     vertex.color <span class="op">=</span> <span class="st">"lightsteelblue2"</span>,</span>
<span>     layout <span class="op">=</span> <span class="va">l</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Tie: Mention"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-74_1d44473a89d184729618e7b1d9b7997c">
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#Using tidygraph</span></span>
<span></span>
<span><span class="va">layout</span> <span class="op">&lt;-</span> <span class="fu">layout_in_circle</span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"hyperlink"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  </span>
<span>  <span class="co"># reusing the earlier computed layout</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span>layout <span class="op">=</span> <span class="va">layout</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_arc</span><span class="op">(</span>strength <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>, shape <span class="op">=</span> <span class="fl">21</span>, </span>
<span>                  fill <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tie: Hyperlink"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">1</span>,,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">type</span> <span class="op">==</span> <span class="st">"mention"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>   <span class="co"># reusing the earlier computed layout</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span>layout <span class="op">=</span> <span class="va">layout</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_arc</span><span class="op">(</span>strength <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>, shape <span class="op">=</span> <span class="fl">21</span>, </span>
<span>                  fill <span class="op">=</span> <span class="st">"lightsteelblue2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tie: Mention"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">1</span>, legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wrap_plots</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>,guides <span class="op">=</span> <span class="st">"collect"</span><span class="op">)</span> <span class="op">&amp;</span> </span>
<span>  <span class="co"># note this "pipe" for patchwork!</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In our example network, we don’t have <strong>node dyads</strong> connected by multiple types of connections (we never have both a ‘hyperlink’ and a ‘mention’ tie between the same two news outlets) – however that could happen.</p>
<p>Note: See the edges between <code>s03</code> and <code>s10</code>…these are in opposite directions. So no dyads.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-75_f6d6176767f3c375862722236cc7d98d">
<div class="sourceCode" id="cb221"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">layout</span> <span class="op">&lt;-</span> <span class="fu">layout_in_circle</span><span class="op">(</span><span class="va">net</span><span class="op">)</span></span>
<span><span class="fu">tbl_graph</span><span class="op">(</span><span class="va">nodes</span>, <span class="va">links</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">centrality_degree</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span></span>
<span>  <span class="co"># reusing the earlier computed layout</span></span>
<span>  <span class="fu">ggraph</span><span class="op">(</span>layout <span class="op">=</span> <span class="va">layout</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_arc</span><span class="op">(</span>strength <span class="op">=</span> <span class="fl">0.05</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">size</span><span class="op">)</span>, shape <span class="op">=</span> <span class="fl">21</span>, </span>
<span>                  fill <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_node_text</span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">id</span><span class="op">)</span>, repel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Tie: Hyperlink"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">1</span>,,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>One challenge in visualizing multiplex networks is that multiple edges between the same two nodes may get plotted on top of each other in a way that makes them impossible to distinguish. For example, let us generate a simple multiplex network with two nodes and three ties between them:</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-76_f9b593ceaef36b7d634fb17940e4db21">
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">multigtr</span> <span class="op">&lt;-</span> <span class="fu">graph</span><span class="op">(</span>edges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">l</span> <span class="op">&lt;-</span> <span class="fu">layout_with_kk</span><span class="op">(</span><span class="va">multigtr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Let's just plot the graph:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">multigtr</span>,</span>
<span>  vertex.color <span class="op">=</span> <span class="st">"lightsteelblue"</span>,</span>
<span>  vertex.frame.color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  vertex.size <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  vertex.shape <span class="op">=</span> <span class="st">"circle"</span>,</span>
<span>  vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  edge.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gold"</span>, <span class="st">"tomato"</span>, <span class="st">"yellowgreen"</span><span class="op">)</span>,</span>
<span>  edge.width <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  edge.arrow.size <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  edge.curved <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  layout <span class="op">=</span> <span class="va">l</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Using tidygraph</span></span>
<span><span class="va">multigtr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">as_tbl_graph</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>edge_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gold"</span>, <span class="st">"tomato"</span>, <span class="st">"yellowgreen"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span><span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_arc</span><span class="op">(</span>strength <span class="op">=</span> <span class="fl">0.1</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">edge_col</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span>, colour <span class="op">=</span> <span class="st">"lightsteelblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-76-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Because all edges in the graph have the same curvature, they are drawn over each other so that we only see the last one. What we can do is assign each edge a different curvature. One useful function in ‘igraph’ called <code>curve_multiple()</code> can help us here. For a graph G, <code>curve.multiple(G)</code> will generate a curvature for each edge that maximizes visibility.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-77_2a9a6c465d1fa1c044f93c853bd4ba2d">
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">multigtr</span>,</span>
<span>  vertex.color <span class="op">=</span> <span class="st">"lightsteelblue"</span>,</span>
<span>  vertex.frame.color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  vertex.size <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  vertex.shape <span class="op">=</span> <span class="st">"circle"</span>,</span>
<span>  vertex.label <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  edge.color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gold"</span>, <span class="st">"tomato"</span>, <span class="st">"yellowgreen"</span><span class="op">)</span>,</span>
<span>  edge.width <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  edge.arrow.size <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  edge.curved <span class="op">=</span> <span class="fu">curve_multiple</span><span class="op">(</span><span class="va">multigtr</span><span class="op">)</span>,</span>
<span>  layout <span class="op">=</span> <span class="va">l</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-78_4221c1cc55a119b7876bea4f97141bd1">
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">multigtr</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">as_tbl_graph</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">activate</span><span class="op">(</span><span class="va">edges</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>edge_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gold"</span>, <span class="st">"tomato"</span>, <span class="st">"yellowgreen"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span><span class="fu">ggraph</span><span class="op">(</span><span class="va">.</span>, layout <span class="op">=</span> <span class="va">l</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_edge_fan</span><span class="op">(</span>strength <span class="op">=</span> <span class="fl">0.1</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">edge_col</span><span class="op">)</span>,width <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_node_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span>, colour <span class="op">=</span> <span class="st">"lightsteelblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-78-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>And that is the end of this reoworked tutorial! Hope you enjoyed it and found it useful!!</p>


</section></section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp("https:\/\/av-quarto\.netlify\.app");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">Website made with ❤️ and <a href="https://quarto.org/">Quarto</a>, by Arvind V.<br> License: <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA 2.0</a>.</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


<script src="../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>